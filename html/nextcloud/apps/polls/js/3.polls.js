(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{214:function(t,e,n){var s=n(333);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(5).default)("3931bae9",s,!1,{})},215:function(t,e,n){var s=n(335);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(5).default)("6cec929d",s,!1,{})},216:function(t,e,n){var s={"./af":68,"./af.js":68,"./ar":69,"./ar-dz":70,"./ar-dz.js":70,"./ar-kw":71,"./ar-kw.js":71,"./ar-ly":72,"./ar-ly.js":72,"./ar-ma":73,"./ar-ma.js":73,"./ar-sa":74,"./ar-sa.js":74,"./ar-tn":75,"./ar-tn.js":75,"./ar.js":69,"./az":76,"./az.js":76,"./be":77,"./be.js":77,"./bg":78,"./bg.js":78,"./bm":79,"./bm.js":79,"./bn":80,"./bn.js":80,"./bo":81,"./bo.js":81,"./br":82,"./br.js":82,"./bs":83,"./bs.js":83,"./ca":84,"./ca.js":84,"./cs":85,"./cs.js":85,"./cv":86,"./cv.js":86,"./cy":87,"./cy.js":87,"./da":88,"./da.js":88,"./de":89,"./de-at":90,"./de-at.js":90,"./de-ch":91,"./de-ch.js":91,"./de.js":89,"./dv":92,"./dv.js":92,"./el":93,"./el.js":93,"./en-SG":94,"./en-SG.js":94,"./en-au":95,"./en-au.js":95,"./en-ca":96,"./en-ca.js":96,"./en-gb":97,"./en-gb.js":97,"./en-ie":98,"./en-ie.js":98,"./en-il":99,"./en-il.js":99,"./en-nz":100,"./en-nz.js":100,"./eo":101,"./eo.js":101,"./es":102,"./es-do":103,"./es-do.js":103,"./es-us":104,"./es-us.js":104,"./es.js":102,"./et":105,"./et.js":105,"./eu":106,"./eu.js":106,"./fa":107,"./fa.js":107,"./fi":108,"./fi.js":108,"./fo":109,"./fo.js":109,"./fr":110,"./fr-ca":111,"./fr-ca.js":111,"./fr-ch":112,"./fr-ch.js":112,"./fr.js":110,"./fy":113,"./fy.js":113,"./ga":114,"./ga.js":114,"./gd":115,"./gd.js":115,"./gl":116,"./gl.js":116,"./gom-latn":117,"./gom-latn.js":117,"./gu":118,"./gu.js":118,"./he":119,"./he.js":119,"./hi":120,"./hi.js":120,"./hr":121,"./hr.js":121,"./hu":122,"./hu.js":122,"./hy-am":123,"./hy-am.js":123,"./id":124,"./id.js":124,"./is":125,"./is.js":125,"./it":126,"./it-ch":127,"./it-ch.js":127,"./it.js":126,"./ja":128,"./ja.js":128,"./jv":129,"./jv.js":129,"./ka":130,"./ka.js":130,"./kk":131,"./kk.js":131,"./km":132,"./km.js":132,"./kn":133,"./kn.js":133,"./ko":134,"./ko.js":134,"./ku":135,"./ku.js":135,"./ky":136,"./ky.js":136,"./lb":137,"./lb.js":137,"./lo":138,"./lo.js":138,"./lt":139,"./lt.js":139,"./lv":140,"./lv.js":140,"./me":141,"./me.js":141,"./mi":142,"./mi.js":142,"./mk":143,"./mk.js":143,"./ml":144,"./ml.js":144,"./mn":145,"./mn.js":145,"./mr":146,"./mr.js":146,"./ms":147,"./ms-my":148,"./ms-my.js":148,"./ms.js":147,"./mt":149,"./mt.js":149,"./my":150,"./my.js":150,"./nb":151,"./nb.js":151,"./ne":152,"./ne.js":152,"./nl":153,"./nl-be":154,"./nl-be.js":154,"./nl.js":153,"./nn":155,"./nn.js":155,"./pa-in":156,"./pa-in.js":156,"./pl":157,"./pl.js":157,"./pt":158,"./pt-br":159,"./pt-br.js":159,"./pt.js":158,"./ro":160,"./ro.js":160,"./ru":161,"./ru.js":161,"./sd":162,"./sd.js":162,"./se":163,"./se.js":163,"./si":164,"./si.js":164,"./sk":165,"./sk.js":165,"./sl":166,"./sl.js":166,"./sq":167,"./sq.js":167,"./sr":168,"./sr-cyrl":169,"./sr-cyrl.js":169,"./sr.js":168,"./ss":170,"./ss.js":170,"./sv":171,"./sv.js":171,"./sw":172,"./sw.js":172,"./ta":173,"./ta.js":173,"./te":174,"./te.js":174,"./tet":175,"./tet.js":175,"./tg":176,"./tg.js":176,"./th":177,"./th.js":177,"./tl-ph":178,"./tl-ph.js":178,"./tlh":179,"./tlh.js":179,"./tr":180,"./tr.js":180,"./tzl":181,"./tzl.js":181,"./tzm":182,"./tzm-latn":183,"./tzm-latn.js":183,"./tzm.js":182,"./ug-cn":184,"./ug-cn.js":184,"./uk":185,"./uk.js":185,"./ur":186,"./ur.js":186,"./uz":187,"./uz-latn":188,"./uz-latn.js":188,"./uz.js":187,"./vi":189,"./vi.js":189,"./x-pseudo":190,"./x-pseudo.js":190,"./yo":191,"./yo.js":191,"./zh-cn":192,"./zh-cn.js":192,"./zh-hk":193,"./zh-hk.js":193,"./zh-tw":194,"./zh-tw.js":194};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}o.keys=function(){return Object.keys(s)},o.resolve=i,t.exports=o,o.id=216},332:function(t,e,n){"use strict";var s=n(214);n.n(s).a},333:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".table-row {\n  width: 100%;\n  padding-left: 15px;\n  padding-right: 15px;\n  line-height: 2em;\n  transition: background-color 0.3s ease;\n  background-color: var(--color-main-background);\n  min-height: 4em;\n  border-bottom: 1px solid var(--color-border);\n}\n.table-row.table-header .name, .table-row.table-header .description {\n    padding-left: 52px;\n}\n.table-row.table-header .owner {\n    padding-left: 6px;\n}\n.table-row.table-body:hover, .table-row.table-body:focus, .table-row.table-body:active, .table-row.table-body.mouseOver {\n    transition: background-color 0.3s ease;\n    background-color: var(--color-background-dark);\n}\n.table-row.table-body .icon-more {\n    right: 14px;\n    opacity: 0.3;\n    cursor: pointer;\n    height: 44px;\n    width: 44px;\n}\n.table-row.table-body .symbol {\n    padding: 2px;\n}\n.table-row.table-header {\n    opacity: 0.5;\n}\n.wrapper {\n  display: flex;\n  align-items: center;\n  position: relative;\n  flex-grow: 0;\n}\n.name {\n  width: 150px;\n}\n.description {\n  width: 150px;\n  opacity: 0.5;\n}\n.name, .description {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.actions {\n  width: 44px;\n  position: relative;\n  overflow: initial;\n}\n.access {\n  width: 44px;\n}\n.owner {\n  width: 140px;\n}\n.created {\n  width: 120px;\n}\n.expiry {\n  width: 120px;\n}\n.expiry.expired {\n    color: red;\n}\n.group-1, .group-1-1 {\n  flex-grow: 1;\n}\n.group-1-1 {\n  flex-direction: column;\n  width: 150px;\n}\n.group-1-1 > div {\n    width: 100%;\n}\n@media all and (max-width: 787px) {\n.group-1 {\n    width: 238px;\n}\n.group-2-1, .group-2-2 {\n    flex-direction: column;\n}\n.created {\n    width: 120px;\n}\n.expiry, .participants {\n    width: 120px;\n}\n}\n@media all and (max-width: 648px) {\n.table-row {\n    padding: 0;\n}\n.group-2-1 {\n    display: none;\n}\n}\n@media all and (max-width: 528px) {\n.group-2 {\n    display: none;\n}\n}\n.thumbnail {\n  width: 44px;\n  height: 44px;\n  padding-right: 4px;\n  font-size: 0;\n  background-color: var(--color-text-light);\n}\n.thumbnail.datePoll {\n    mask-image: var(--icon-calendar-000) no-repeat 50% 50%;\n    -webkit-mask: var(--icon-calendar-000) no-repeat 50% 50%;\n    mask-size: 16px;\n}\n.thumbnail.textPoll {\n    mask-image: var(--icon-organization-000) no-repeat 50% 50%;\n    -webkit-mask: var(--icon-organization-000) no-repeat 50% 50%;\n    mask-size: 16px;\n}\n.thumbnail.expired {\n    background-color: var(--color-background-darker);\n}\n.thumbnail.access {\n    display: inherit;\n}\n.thumbnail.access.hidden {\n      mask-image: var(--icon-password-000) no-repeat 50% 50%;\n      -webkit-mask: var(--icon-password-000) no-repeat 50% 50%;\n      mask-size: 16px;\n}\n.thumbnail.access.public {\n      mask-image: var(--icon-link-000) no-repeat 50% 50%;\n      -webkit-mask: var(--icon-link-000) no-repeat 50% 50%;\n      mask-size: 16px;\n}\n.thumbnail.access.select {\n      mask-image: var(--icon-share-000) no-repeat 50% 50%;\n      -webkit-mask: var(--icon-share-000) no-repeat 50% 50%;\n      mask-size: 16px;\n}\n.thumbnail.access.registered {\n      mask-image: var(--icon-group-000) no-repeat 50% 50%;\n      -webkit-mask: var(--icon-group-000) no-repeat 50% 50%;\n      mask-size: 16px;\n}\n.icon-voted {\n  background-image: var(--icon-checkmark-fff);\n}\n.comment-badge {\n  position: absolute;\n  top: 0;\n  width: 26px;\n  line-height: 26px;\n  text-align: center;\n  font-size: 0.7rem;\n  color: white;\n  background-image: var(--icon-comment-49bc49);\n  background-repeat: no-repeat;\n  background-size: 26px;\n  z-index: 1;\n}\n.app-navigation-entry-utils-counter {\n  padding-right: 0 !important;\n  overflow: hidden;\n  text-align: right;\n  font-size: 9pt;\n  line-height: 44px;\n  padding: 0 12px;\n}\n.app-navigation-entry-utils-counter.highlighted {\n    padding: 0;\n    text-align: center;\n}\n.app-navigation-entry-utils-counter.highlighted span {\n      padding: 2px 5px;\n      border-radius: 10px;\n      background-color: var(--color-primary);\n      color: var(--color-primary-text);\n}\n.symbol.icon-voted {\n  position: absolute;\n  left: 11px;\n  top: 16px;\n  background-size: 0;\n  min-width: 8px;\n  min-height: 8px;\n  background-color: var(--color-success);\n  border-radius: 50%;\n}\n",""])},334:function(t,e,n){"use strict";var s=n(215);n.n(s).a},335:function(t,e,n){e=t.exports=n(4)(!1);var s=n(336)(n(337));e.push([t.i,".table {\n  width: 100%;\n  margin-top: 45px;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  flex-wrap: nowrap;\n}\n#emptycontent .icon-polls {\n  background-color: black;\n  -webkit-mask: url("+s+") no-repeat 50% 50%;\n  mask: url("+s+") no-repeat 50% 50%;\n}\n",""])},336:function(t,e,n){"use strict";t.exports=function(t,e){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)||e?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},337:function(t,e,n){t.exports=n.p+"app.svg?acc601d7eb0da0d52a9655926468f275"},339:function(e,s,o){"use strict";o.r(s);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app-content"}},[n("controls",[n("router-link",{staticClass:"button",attrs:{to:{name:"create"}}},[n("span",{staticClass:"symbol icon-add"}),t._v(" "),n("span",{staticClass:"hidden-visually"},[t._v("\n\t\t\t\t"+t._s(t.t("polls","New"))+"\n\t\t\t")])])],1),t._v(" "),t.noPolls?n("div",{},[n("div",{staticClass:"icon-polls"}),t._v(" "),n("h2",[t._v(" "+t._s(t.t("No existing polls."))+" ")]),t._v(" "),n("router-link",{staticClass:"button new",attrs:{to:{name:"create"}}},[n("span",[t._v(t._s(t.t("polls","Click here to add a poll")))])])],1):t._e(),t._v(" "),t.noPolls?t._e():n("transition-group",{staticClass:"table",attrs:{name:"list",tag:"div"}},[n("poll-list-item",{key:"0",attrs:{header:!0}}),t._v(" "),t._l(t.polls,function(e,s){return n("poll-list-item",{key:e.id,tag:"li",attrs:{poll:e},on:{deletePoll:function(n){return t.removePoll(s,e.event)},editPoll:function(n){return t.editPoll(s,e.event,"edit")},clonePoll:function(n){return t.editPoll(s,e.event,"clone")}}})})],2),t._v(" "),t.loading?n("loading-overlay"):t._e(),t._v(" "),n("modal-dialog")],1)};i._withStripped=!0;var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.header?n("div",{staticClass:"wrapper group-master table-row table-header"},[n("div",{staticClass:"wrapper group-1"},[n("div",{staticClass:"wrapper group-1-1"},[n("div",{staticClass:"name"},[t._v("\n\t\t\t\t"+t._s(t.t("polls","Title"))+"\n\t\t\t")])]),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"wrapper group-2"},[n("div",{staticClass:"wrapper group-2-1"},[n("div",{staticClass:"access"},[t._v("\n\t\t\t\t"+t._s(t.t("polls","Access"))+"\n\t\t\t")])]),t._v(" "),n("div",{staticClass:"owner"},[t._v("\n\t\t\t"+t._s(t.t("polls","Owner"))+"\n\t\t")]),t._v(" "),n("div",{staticClass:"wrapper group-2-2"},[n("div",{staticClass:"created"},[t._v("\n\t\t\t\t"+t._s(t.t("polls","Created"))+"\n\t\t\t")]),t._v(" "),n("div",{staticClass:"expiry"},[t._v("\n\t\t\t\t"+t._s(t.t("polls","Expires"))+"\n\t\t\t")])])])]):n("div",{staticClass:"wrapper table-row table-body group-master"},[n("div",{staticClass:"wrapper group-1"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.pollType,expression:"pollType"}],staticClass:"thumbnail",class:[t.poll.event.type,{expired:t.poll.event.expired}]},[t._v("\n\t\t\t"+t._s(t.pollType)+"\n\t\t")]),t._v(" "),t.votedBycurrentUser?n("div",{staticClass:"symbol icon-voted"}):t._e(),t._v(" "),n("a",{staticClass:"wrapper group-1-1",attrs:{href:t.voteUrl}},[n("div",{staticClass:"name"},[t._v("\n\t\t\t\t"+t._s(t.poll.event.title)+"\n\t\t\t")]),t._v(" "),n("div",{staticClass:"description"},[t._v("\n\t\t\t\t"+t._s(t.poll.event.description)+"\n\t\t\t")])]),t._v(" "),t.countComments?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.countCommentsHint,expression:"countCommentsHint"}],staticClass:"app-navigation-entry-utils-counter highlighted"},[n("span",[t._v(t._s(t.countComments))])]):t._e(),t._v(" "),n("div",{staticClass:"actions"},[n("div",{staticClass:"toggleUserActions"},[n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideMenu,expression:"hideMenu"}],staticClass:"icon-more",on:{click:t.toggleMenu}}),t._v(" "),n("div",{staticClass:"popovermenu",class:{open:t.openedMenu}},[n("popover-menu",{attrs:{menu:t.menuItems}})],1)])])]),t._v(" "),n("div",{staticClass:"wrapper group-2"},[n("div",{staticClass:"wrapper group-2-1"},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.accessType,expression:"accessType"}],staticClass:"thumbnail access",class:t.poll.event.access},[t._v("\n\t\t\t\t"+t._s(t.accessType)+"\n\t\t\t")])]),t._v(" "),n("div",{staticClass:"owner"},[n("user-div",{attrs:{"user-id":t.poll.event.owner,"display-name":t.poll.event.ownerDisplayName}})],1),t._v(" "),n("div",{staticClass:"wrapper group-2-2"},[n("div",{staticClass:"created "},[t._v("\n\t\t\t\t"+t._s(t.timeSpanCreated)+"\n\t\t\t")]),t._v(" "),n("div",{staticClass:"expiry",class:{expired:t.poll.event.expired}},[t._v("\n\t\t\t\t"+t._s(t.timeSpanExpiration)+"\n\t\t\t")])])])])};l._withStripped=!0;var a=o(61),r=o.n(a),p={props:{header:{type:Boolean,default:!1},poll:{type:Object,default:void 0}},data:function(){return{openedMenu:!1,hostName:this.$route.query.page}},computed:{accessType:function(){return"public"===this.poll.event.access?t("polls","Public access"):"select"===this.poll.event.access?t("polls","Only shared"):"registered"===this.poll.event.access?t("polls","Registered users only"):"hidden"===this.poll.event.access?t("polls","Hidden poll"):""},pollType:function(){return"textPoll"===this.poll.event.type?t("polls","Text poll"):t("polls","Date poll")},timeSpanCreated:function(){return r()(this.poll.event.created).fromNow()},timeSpanExpiration:function(){return this.poll.event.expiration?r()(this.poll.event.expirationDate).fromNow():t("polls","never")},participants:function(){return this.poll.votes.map(function(t){return t.userId}).filter(function(t,e,n){return n.indexOf(t)===e})},countvotes:function(){return this.participants.length},countComments:function(){return this.poll.comments.length>999?"999+":this.poll.comments.length},countCommentsHint:function(){return n("polls","There is %n comment","There are %n comments",this.poll.comments.length)},countShares:function(){return this.poll.shares.length},votedBycurrentUser:function(){return this.participants.indexOf(OC.getCurrentUser().uid)>-1},voteUrl:function(){return OC.generateUrl("apps/polls/poll/")+this.poll.event.hash},menuItems:function(){var e=[{key:"copyLink",icon:"icon-clippy",text:t("polls","Copy Link"),action:this.copyLink},{key:"clonePoll",icon:"icon-confirm",text:t("polls","Clone poll"),action:this.clonePoll}];return this.poll.event.owner===OC.getCurrentUser().uid?(e.push({key:"deletePoll",icon:"icon-rename",text:t("polls","Edit poll"),action:this.editPoll}),e.push({key:"deletePoll",icon:"icon-delete",text:t("polls","Delete poll"),action:this.deletePoll})):OC.isUserAdmin()&&(e.push({key:"editPoll",icon:"icon-rename",text:t("polls","Edit poll as admin"),action:this.editPoll}),e.push({key:"deletePoll",icon:"icon-delete",text:t("polls","Delete poll as admin"),action:this.deletePoll})),e}},methods:{toggleMenu:function(){this.openedMenu=!this.openedMenu},hideMenu:function(){this.openedMenu=!1},copyLink:function(){this.$copyText(window.location.origin+this.voteUrl).then(function(e){OC.Notification.showTemporary(t("polls","Link copied to clipboard"))},function(e){OC.Notification.showTemporary(t("polls","Error, while copying link to clipboard"))}),this.hideMenu()},deletePoll:function(){this.$emit("deletePoll"),this.hideMenu()},editPoll:function(){this.$emit("editPoll"),this.hideMenu()},clonePoll:function(){this.$emit("clonePoll"),this.hideMenu()}}},c=(o(332),o(1)),d=Object(c.a)(p,l,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper group-1-2"},[e("div",{staticClass:"actions"})])}],!1,null,null,null);d.options.__file="src/js/components/pollListItem.vue";var u={name:"List",components:{pollListItem:d.exports},data:function(){return{noPolls:!1,loading:!0,polls:[]}},created:function(){this.indexPage=OC.generateUrl("apps/polls/"),this.loadPolls()},methods:{loadPolls:function(){var t=this;this.loading=!0,this.$http.get(OC.generateUrl("apps/polls/get/polls")).then(function(e){t.polls=e.data,t.loading=!1},function(e){console.log(e.response),t.loading=!1})},editPoll:function(t,e,n){this.$router.push({name:n,params:{hash:e.id}})},clonePoll:function(t,e,n){this.$router.push({name:n,params:{hash:e.id}})},removePoll:function(e,n){var s=this,o={title:t("polls","Delete poll"),text:t("polls",'Do you want to delete "%n"?',1,n.title),buttonHideText:t("polls","No, keep poll."),buttonConfirmText:t("polls","Yes, delete poll."),onConfirm:function(){s.$http.post(OC.generateUrl("apps/polls/remove/poll"),n).then(function(o){s.polls.splice(e,1),OC.Notification.showTemporary(t("polls",'Poll "%n" deleted',1,n.title))},function(e){OC.Notification.showTemporary(t("polls",'Error while deleting Poll "%n"',1,n.title)),console.log(e.response)})}};this.$modal.show(o)}}},h=(o(334),Object(c.a)(u,i,[],!1,null,null,null));h.options.__file="src/js/views/List.vue";s.default=h.exports}}]);
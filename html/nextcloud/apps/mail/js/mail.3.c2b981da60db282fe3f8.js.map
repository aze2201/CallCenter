{"version":3,"sources":["webpack:///./src/components/AppSettingsMenu.vue?7980","webpack:///./src/util/AccountColor.js","webpack:///./src/components/AppSettingsMenu.vue?efdb","webpack:///./src/components/AppSettingsMenu.vue?7bf6","webpack:///./src/components/Navigation.vue?fc69","webpack:///./src/components/NavigationAccount.vue?6cd9","webpack:///src/components/NavigationAccount.vue","webpack:///./src/components/NavigationAccount.vue","webpack:///./src/components/NavigationAccount.vue?eeea","webpack:///./src/components/NavigationAccountExpandCollapse.vue?f1fb","webpack:///src/components/NavigationAccountExpandCollapse.vue","webpack:///./src/components/NavigationAccountExpandCollapse.vue","webpack:///./src/components/NavigationAccountExpandCollapse.vue?f762","webpack:///./src/l10n/MailboxTranslator.js","webpack:///./src/components/NavigationFolder.vue?7c72","webpack:///src/components/NavigationFolder.vue","webpack:///./src/components/NavigationFolder.vue","webpack:///./src/components/NavigationFolder.vue?b73d","webpack:///./src/components/AppSettingsMenu.vue?2b54","webpack:///src/components/AppSettingsMenu.vue","webpack:///./src/components/AppSettingsMenu.vue","webpack:///./src/components/AppSettingsMenu.vue?52d5","webpack:///src/components/Navigation.vue","webpack:///./src/components/Navigation.vue?b567","webpack:///./src/components/Navigation.vue","webpack:///./src/components/AppDetailsToggle.vue?00e0","webpack:///./src/components/Envelope.vue?cddd","webpack:///./src/components/EnvelopeList.vue?fb71","webpack:///./src/components/ComposerAttachments.vue?a809","webpack:///./src/components/Composer.vue?51db","webpack:///./src/components/Composer.vue?6c15","webpack:///./src/components/MessageHTMLBody.vue?3a2e","webpack:///./src/components/MessagePlainTextBody.vue?1cec","webpack:///./src/components/MessageAttachment.vue?8116","webpack:///./src/components/MessageAttachments.vue?6925","webpack:///./src/components/Message.vue?0245","webpack:///./src/components/NoMessageSelected.vue?ff50","webpack:///./src/components/AppDetailsToggle.vue?7cca","webpack:///./src/components/AppDetailsToggle.vue?4e72","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/components/Envelope.vue?816b","webpack:///./src/components/Envelope.vue?9483","webpack:///./img/reply.svg","webpack:///./src/components/EnvelopeList.vue?a5b1","webpack:///./src/components/EnvelopeList.vue?3122","webpack:///./src/components/ComposerAttachments.vue?d719","webpack:///./src/components/ComposerAttachments.vue?0ad8","webpack:///./src/components/Composer.vue?76f8","webpack:///./src/components/Composer.vue?8321","webpack:///./src/components/Composer.vue?821d","webpack:///./src/components/Composer.vue?a204","webpack:///./src/components/MessageHTMLBody.vue?a0b4","webpack:///./src/components/MessageHTMLBody.vue?251f","webpack:///./src/components/MessagePlainTextBody.vue?5e5b","webpack:///./src/components/MessagePlainTextBody.vue?433d","webpack:///./src/components/MessageAttachment.vue?0aea","webpack:///./src/components/MessageAttachment.vue?a54e","webpack:///./src/components/MessageAttachments.vue?387a","webpack:///./src/components/MessageAttachments.vue?dd87","webpack:///./src/components/Message.vue?29bb","webpack:///./src/components/Message.vue?9293","webpack:///./src/components/NoMessageSelected.vue?33d3","webpack:///./src/components/NoMessageSelected.vue?9774","webpack:///./src/views/Home.vue?78c5","webpack:///./src/components/AppDetailsToggle.vue?9998","webpack:///src/components/AppDetailsToggle.vue","webpack:///./src/components/AppDetailsToggle.vue","webpack:///./src/components/AppDetailsToggle.vue?5482","webpack:///./src/components/EmptyFolder.vue?2112","webpack:///src/components/EmptyFolder.vue","webpack:///./src/components/EmptyFolder.vue","webpack:///./src/components/EmptyFolder.vue?05bc","webpack:///src/components/Moment.vue","webpack:///./src/components/Moment.vue?eaed","webpack:///./src/components/Moment.vue","webpack:///./src/components/Moment.vue?d317","webpack:///./src/service/AvatarService.js","webpack:///./src/components/Avatar.vue?0735","webpack:///src/components/Avatar.vue","webpack:///./src/components/Avatar.vue","webpack:///./src/components/Avatar.vue?d1ba","webpack:///./src/components/Envelope.vue?f968","webpack:///src/components/Envelope.vue","webpack:///./src/components/Envelope.vue","webpack:///./src/components/Envelope.vue?fb48","webpack:///src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?f5c3","webpack:///./src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?0d9c","webpack:///./src/components/Loading.vue?8bea","webpack:///src/components/Loading.vue","webpack:///./src/components/Loading.vue","webpack:///./src/components/Loading.vue?646d","webpack:///./src/components/Address.vue?5fef","webpack:///src/components/Address.vue","webpack:///./src/components/AddressList.vue?41bb","webpack:///src/components/AddressList.vue","webpack:///./src/components/Address.vue","webpack:///./src/components/Address.vue?5be8","webpack:///./src/components/AddressList.vue","webpack:///./src/components/AddressList.vue?97a9","webpack:///./src/ReplyBuilder.js","webpack:///./src/service/AttachmentService.js","webpack:///./src/components/ComposerAttachments.vue?8b74","webpack:///src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue?d963","webpack:///src/components/Composer.vue","webpack:///./src/service/AutocompleteService.js","webpack:///./src/components/Composer.vue?b085","webpack:///./src/components/Composer.vue","webpack:///./src/components/Composer.vue?04fa","webpack:///./src/util/CrashReport.js","webpack:///./src/components/Error.vue?1fd4","webpack:///src/components/Error.vue","webpack:///./src/components/Error.vue","webpack:///./src/components/Error.vue?5480","webpack:///./src/util/ErrorMessageFactory.js","webpack:///src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?aa4c","webpack:///./src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?9835","webpack:///./src/components/MessagePlainTextBody.vue?6434","webpack:///src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue?edbf","webpack:///./src/service/DAVService.js","webpack:///./src/components/MessageAttachment.vue?426a","webpack:///src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachments.vue?43cf","webpack:///src/components/MessageAttachments.vue","webpack:///./src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachment.vue?d850","webpack:///./src/components/MessageAttachments.vue","webpack:///./src/components/MessageAttachments.vue?d539","webpack:///./src/components/Message.vue?7d74","webpack:///src/components/Message.vue","webpack:///./src/util/HtmlHelper.js","webpack:///./src/components/Message.vue","webpack:///./src/components/Message.vue?0c2d","webpack:///./src/components/NewMessageDetail.vue?15b4","webpack:///src/components/NewMessageDetail.vue","webpack:///./src/components/NewMessageDetail.vue","webpack:///./src/components/NewMessageDetail.vue?f684","webpack:///./src/components/NoMessageSelected.vue?7c7e","webpack:///src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue?5862","webpack:///./src/components/FolderContent.vue?c9af","webpack:///src/components/FolderContent.vue","webpack:///./src/components/FolderContent.vue","webpack:///./src/components/FolderContent.vue?9eaa","webpack:///./src/views/Home.vue?8c94","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue"],"names":["content","module","i","locals","exports","add","default","calculateAccountColor","name","hashed","md5","hsl","conv","hex","fixedHsl","Math","round","push","_vm","this","_h","$createElement","_c","_self","attrs","data","menuOpen","on","$event","_e","translate","folder","specialUse","length","includes","t","Error","translateSpecial","e","console","error","atob","id","staticClass","_v","_s","domProps","useExternalAvatars","onToggleExternalAvatars","onNewMessage","_l","group","key","account","item","directives","rawName","value","collapsed","SHOW_COLLAPSED","indexOf","specialRole","expression","isUnified","folders","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","keys","Object","resolve","___CSS_LOADER_URL___0___","getUrl","$emit","OC","timestamp","title","formatted","fetchAvatarUrlMemoized","_","memoize","email","Promise","undefined","url","generateUrl","Axios","get","then","resp","avatar","isExternal","catch","err","response","status","reject","loading","hasAvatar","displayName","avatarUrl","class","unseen","flags","draft","link","style","accountColor","flagged","preventDefault","onToggleFlagged","sender","senderEmail","subject","dateInt","onToggleSeen","onDelete","show","modifiers","nativeOn","handleShortcut","refreshing","envelopes","env","uid","onEnvelopeDeleted","loadingMore","hint","newMessageRoute","label","entry","idx","entries","moment","locale","getLocale","buildReplyBody","original","from","date","body","replace","dateString","unix","format","RecipientType","seal","None","To","Cc","replyPrepends","forwardPrepends","saveAttachmentToFiles","accountId","folderId","messageId","attachmentId","directory","post","targetPath","file","progress","FormData","opts","onUploadProgress","prog","loaded","total","append","attachment","uploading","onAddLocalAttachment","percent","uploadProgress","onAddCloudAttachment","ref","staticStyle","onLocalAttachmentSelected","term","state","STATES","EDITING","aliases","formatAliases","onInputChanged","model","callback","$$v","selectedAlias","selectableRecipients","onNewToAddr","onAutocomplete","selectTo","showCC","onNewCcAddr","selectCc","onNewBccAddr","selectBcc","target","composing","subjectVal","onBodyKeyPress","bodyVal","submitButtonTitle","onSend","onAttachmentsUploading","attachments","savingDraft","UPLOADING","SENDING","ERROR","errorText","isReply","reset","flattenTrace","trace","reduce","acc","text","function","line","getReportUrl","message","endsWith","template","IssueTemplateBuilder","addEmptyStepsToReproduce","addExpectedActualBehaviour","addLogs","type","stack","flattenError","render","encodeURIComponent","debug","reportUrl","smileys","getRandomSmiley","floor","random","getRandomMessageErrorMessage","texts","onShowBlockedContent","hidden","onMessageFrameLoad","signature","client","dav","Client","baseUrl","generateRemoteUrl","xmlNamespaces","props","getUserCalendars","getCurrentUser","getRequestToken","token","propFind","requesttoken","calendars","forEach","cal","propStat","parseInt","split","getResponseCodeFromHTTPResponse","properties","canWrite","acl","k","href","getElementsByTagNameNS","textContent","getACLFromResponse","displayname","color","order","components","vevent","writable","attributes","getNamedItem","toLowerCase","hasOwnProperty","getCalendarData","getRandomString","str","toString","substring","importCalendarEvent","Logger","promises","timezones","allObjects","jCal","ical","parse","Component","getAllSubcomponents","vtimezone","componentNames","componentName","vobjects","vobject","getFirstPropertyValue","objectsId","objects","component","root","updatePropertyWithValue","theme","objectId","addSubcomponent","splitCalendar","componentId","$","ajax","method","contentType","all","res","download","mimeUrl","fileName","humanReadable","size","loadingCalendars","stopPropagation","loadCalendars","savingToCloud","saveToCloud","open","showCalendarPopover","calendarMenuEntries","downloadUrl","isImage","isCalendarEvent","saveAll","envelope","ownAddress","recipientType","isOwnAddress","a","isNotOwnAddress","negate","replyingAddress","to","find","isUndefined","cc","filter","concat","some","prepend","startsWith","html","fromString","noLinkBrackets","ignoreHref","ignoreImage","wordwrap","htmlUrl","onHtmlBodyLoaded","forwardMessage","hasHtmlBody","htmlBodyLoaded","replyRecipient","replySubject","replyBody","replyTo","sendReply","saveReplyDraft","errorMessage","composerData","bcc","saveDraft","sendMessage","mailbox","hideMessage","searchQuery","showMessage","activeAccount","activeFolder"],"mappings":"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CA,WACA,M,SE2HF,QClH6B,SAAAC,GAC5B,IAAM9F,EAAMC,sBAAY,0CAA2C,CAClE6F,SAGD,OAAO5F,IAAMC,IAAIH,GAAKI,KAAK,SAAAC,GAAI,OAAIA,EAAKpE,QD6GzC,KAEA,oBAEA,oBACA,UACA,YACA,UACA,QACA,aEnJwL,GFsJxL,CACA,gBACA,YACA,uBACA,UACA,kBAEA,OACA,SACA,YACA,sBAEA,aACA,YACA,sBAEA,IACA,WACA,8BAEA,IACA,WACA,8BAEA,KACA,WACA,8BAEA,SACA,YACA,YAEA,MACA,YACA,YAEA,OACA,cACA,aAEA,MACA,cACA,cAGA,KA7CA,WA8CA,OACA,wBACA,iBACA,gEACA,iBACA,wBACA,kBACA,eACA,0GACA,mCACA,gCACA,qCACA,mBACA,oDACA,iBACA,iBACA,UACA,iBACA,iBACA,qBAGA,UACA,QADA,WAEA,kFAEA,qBAJA,WAKA,+DAEA,QAPA,WAQA,sCAEA,UAVA,WAWA,gDAGA,YAlFA,WAkFA,WACA,iBACA,+EAEA,mCAEA,mEAEA,SACA,kBADA,SACA,GACA,yBAEA,QACA,aAEA,QACA,4CAEA,QAGA,+CAGA,eAhBA,WAgBA,WACA,mBACA,OACA,2BACA,kDACA,kDACA,oDACA,WACA,qBACA,eACA,0BACA,6CACA,kDAIA,UAhCA,SAgCA,cACA,oBACA,sCACA,wCACA,iBACA,iBAEA,OADA,iBACA,KAGA,eA1CA,WA2CA,gDAEA,eA7CA,SA6CA,cACA,4BAGA,uBACA,mFAGA,uBArDA,SAqDA,GACA,gDACA,2BACA,+EACA,4DAEA,eA3DA,SA2DA,GAEA,6BACA,sBAGA,YAjEA,SAiEA,GACA,iCAEA,YApEA,SAoEA,GACA,iCAEA,aAvEA,SAuEA,GACA,kCAEA,UA1EA,SA0EA,KACA,OACA,QACA,SAEA,2BACA,WAEA,OAlFA,WAkFA,WAGA,OAFA,wBAEA,wBACA,4CACA,yCACA,4BACA,oCACA,kDACA,6CACA,kBACA,8CACA,gBACA,0BAEA,oBAGA,MApGA,WAqGA,iBACA,iBACA,kBACA,mBACA,gBACA,oBACA,sBAC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","file":"mail.3.c2b981da60db282fe3f8.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=style&index=0&id=768f6630&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"fcfb9244\", content, true, {});","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport md5 from 'md5'\nimport conv from 'color-convert'\n\nexport const calculateAccountColor = name => {\n\tconst hashed = md5(name)\n\tconst hsl = conv.hex.hsl(hashed)\n\tconst fixedHsl = [Math.round(hsl[0] / 40) * 40, hsl[1], hsl[2]]\n\n\treturn '#' + conv.hsl.hex(fixedHsl)\n}\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=style&index=0&id=768f6630&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=style&index=0&id=768f6630&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\np.avatar-settings span.icon-loading-small[data-v-768f6630] {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 5px 0;\\n}\\n\", \"\"]);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppNavigation',[_c('AppNavigationNew',{attrs:{\"text\":_vm.t('mail', 'New message'),\"button-id\":\"mail_new_message\",\"button-class\":\"icon-add\"},on:{\"click\":_vm.onNewMessage}}),_vm._v(\" \"),_c('ul',{attrs:{\"id\":\"accounts-list\"}},[_vm._l((_vm.menu),function(group){return [(group.account)?_c('NavigationAccount',{key:group.account.id,attrs:{\"account\":group.account}}):_vm._e(),_vm._v(\" \"),_vm._l((group.folders),function(item){return _c('NavigationFolder',{directives:[{name:\"show\",rawName:\"v-show\",value:(!group.account.collapsed || _vm.SHOW_COLLAPSED.indexOf(item.specialRole) !== -1),expression:\"!group.account.collapsed || SHOW_COLLAPSED.indexOf(item.specialRole) !== -1\"}],key:item.key,attrs:{\"account\":group.account,\"folder\":item}})}),_vm._v(\" \"),(!group.account.isUnified && group.account.folders.length > 0)?_c('NavigationAccountExpandCollapse',{key:'collapse-' + group.account.id,attrs:{\"account\":group.account}}):_vm._e(),_vm._v(\" \"),_c('AppNavigationSpacer',{key:'spacer-' + group.account.id})]})],2),_vm._v(\" \"),_c('AppNavigationSettings',{attrs:{\"title\":_vm.t('mail', 'Settings')}},[_c('AppSettingsMenu')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccount.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccount.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppNavigationItem v-if=\"visible\" :item=\"data\" :menu-open.sync=\"menuOpen\" />\n</template>\n\n<script>\nimport AppNavigationItem from 'nextcloud-vue/dist/Components/AppNavigationItem'\n\nimport {calculateAccountColor} from '../util/AccountColor'\nimport Logger from '../logger'\n\nexport default {\n\tname: 'NavigationAccount',\n\tcomponents: {\n\t\tAppNavigationItem,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmenuOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tvisible() {\n\t\t\treturn this.account.isUnified !== true && this.account.visible !== false\n\t\t},\n\t\tdata() {\n\t\t\tconst route = {\n\t\t\t\tname: 'accountSettings',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t},\n\t\t\t}\n\n\t\t\tconst isError = this.account.error\n\t\t\treturn {\n\t\t\t\tid: 'account' + this.account.id,\n\t\t\t\tkey: 'account' + this.account.id,\n\t\t\t\ttext: this.account.emailAddress,\n\t\t\t\tbullet: isError ? undefined : calculateAccountColor(this.account.name), // TODO\n\t\t\t\ticon: isError ? 'icon-error' : undefined,\n\t\t\t\trouter: route,\n\t\t\t\tutils: {\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: 'icon-settings',\n\t\t\t\t\t\t\ttext: t('mail', 'Edit'),\n\t\t\t\t\t\t\taction: () => {\n\t\t\t\t\t\t\t\t\tthis.$router.push(route) // eslint-disable-line\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: 'icon-delete',\n\t\t\t\t\t\t\ttext: t('mail', 'Delete'),\n\t\t\t\t\t\t\taction: () => {\n\t\t\t\t\t\t\t\tthis.$store\n\t\t\t\t\t\t\t\t\t.dispatch('deleteAccount', this.account)\n\t\t\t\t\t\t\t\t\t.catch(error => Logger.error('could not delete account', {error}))\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: 'icon-add',\n\t\t\t\t\t\t\ttext: t('mail', 'Add folder'),\n\t\t\t\t\t\t\tinput: 'text',\n\t\t\t\t\t\t\taction: e => {\n\t\t\t\t\t\t\t\tthis.createFolder(e)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tcreateFolder(e) {\n\t\t\tconst name = e.target.elements[0].value\n\t\t\tLogger.info('creating folder ' + name)\n\t\t\tthis.menuOpen = false\n\t\t\tthis.$store\n\t\t\t\t.dispatch('createFolder', {account: this.account, name})\n\t\t\t\t.then(() => Logger.info(`folder ${name} created`))\n\t\t\t\t.catch(error => {\n\t\t\t\t\tLogger.error('could not create folder', {error})\n\t\t\t\t\tthrow error\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./NavigationAccount.vue?vue&type=template&id=1130357c&\"\nimport script from \"./NavigationAccount.vue?vue&type=script&lang=js&\"\nexport * from \"./NavigationAccount.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('AppNavigationItem',{attrs:{\"item\":_vm.data,\"menu-open\":_vm.menuOpen},on:{\"update:menuOpen\":function($event){_vm.menuOpen=$event},\"update:menu-open\":function($event){_vm.menuOpen=$event}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccountExpandCollapse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationAccountExpandCollapse.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppNavigationItem :item=\"data\" />\n</template>\n\n<script>\nimport AppNavigationItem from 'nextcloud-vue/dist/Components/AppNavigationItem'\n\nexport default {\n\tname: 'NavigationAccount',\n\tcomponents: {\n\t\tAppNavigationItem,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tid: 'collapse-' + this.account.id,\n\t\t\t\tkey: 'collapse-' + this.account.id,\n\t\t\t\tclasses: ['collapse-folders'],\n\t\t\t\ttext: this.account.collapsed ? t('mail', 'Show all folders') : t('mail', 'Collapse folders'),\n\t\t\t\taction: () => this.$store.commit('toggleAccountCollapsed', this.account.id),\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./NavigationAccountExpandCollapse.vue?vue&type=template&id=05d4d6f1&\"\nimport script from \"./NavigationAccountExpandCollapse.vue?vue&type=script&lang=js&\"\nexport * from \"./NavigationAccountExpandCollapse.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppNavigationItem',{attrs:{\"item\":_vm.data}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {translate as t} from 'nextcloud-l10n'\n\nconst translateSpecial = folder => {\n\tif (folder.specialUse.includes('all')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'All')\n\t}\n\tif (folder.specialUse.includes('archive')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Archive')\n\t}\n\tif (folder.specialUse.includes('drafts')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Drafts')\n\t}\n\tif (folder.specialUse.includes('flagged')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Favorites')\n\t}\n\tif (folder.specialUse.includes('inbox')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Inbox')\n\t}\n\tif (folder.specialUse.includes('junk')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Junk')\n\t}\n\tif (folder.specialUse.includes('sent')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Sent')\n\t}\n\tif (folder.specialUse.includes('trash')) {\n\t\t// TRANSLATORS: translated mail box name\n\t\treturn t('mail', 'Trash')\n\t}\n\tthrow new Error(`unknown special use ${folder.specialUse}`)\n}\n\nexport const translate = folder => {\n\tif (folder.specialUse.length > 0) {\n\t\ttry {\n\t\t\treturn translateSpecial(folder)\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t\treturn atob(folder.id)\n\t\t}\n\t}\n\treturn atob(folder.id)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationFolder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavigationFolder.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppNavigationItem :item=\"data\" :menu-open.sync=\"menuOpen\" />\n</template>\n\n<script>\nimport AppNavigationItem from 'nextcloud-vue/dist/Components/AppNavigationItem'\n\nimport {getFolderStats} from '../service/FolderService'\nimport Logger from '../logger'\nimport {translate as translateMailboxName} from '../l10n/MailboxTranslator'\n\nexport default {\n\tname: 'NavigationFolder',\n\tcomponents: {\n\t\tAppNavigationItem,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfolder: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmenuOpen: false,\n\t\t\tloadingFolderStats: true,\n\t\t\tfolderStats: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tdata() {\n\t\t\treturn this.folderToEntry(this.folder, true)\n\t\t},\n\t},\n\twatch: {\n\t\tmenuOpen() {\n\t\t\t// Fetch current stats when the menu is opened\n\t\t\tif (this.menuOpen) {\n\t\t\t\tthis.fetchFolderStats()\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tfolderToEntry(folder, top) {\n\t\t\tlet icon = 'folder'\n\t\t\tif (folder.specialRole) {\n\t\t\t\ticon = folder.specialRole\n\t\t\t}\n\n\t\t\tconst actions = []\n\n\t\t\tif (top) {\n\t\t\t\tif (this.loadingFolderStats) {\n\t\t\t\t\tactions.push({\n\t\t\t\t\t\ticon: 'icon-info',\n\t\t\t\t\t\ttext: atob(this.folder.id),\n\t\t\t\t\t\tlongtext: t('mail', 'Loading …'),\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tactions.push({\n\t\t\t\t\t\ticon: 'icon-info',\n\t\t\t\t\t\ttext: atob(this.folder.id),\n\t\t\t\t\t\tlongtext: t('mail', '{total} messages ({unread} unread)', {\n\t\t\t\t\t\t\ttotal: this.folderStats.total,\n\t\t\t\t\t\t\tunread: this.folderStats.unread,\n\t\t\t\t\t\t}),\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (top) {\n\t\t\t\t// TODO: make *mark as read* available for all folders once there is\n\t\t\t\t//       more than one action\n\t\t\t\tactions.push({\n\t\t\t\t\ticon: 'icon-checkmark',\n\t\t\t\t\ttext: t('mail', 'Mark all as read'),\n\t\t\t\t\tlongtext: t('mail', 'Mark all messages of this folder as read'),\n\t\t\t\t\taction: this.markAsRead(folder),\n\t\t\t\t})\n\n\t\t\t\tactions.push({\n\t\t\t\t\ticon: 'icon-add',\n\t\t\t\t\ttext: t('mail', 'Add subfolder'),\n\t\t\t\t\tinput: 'text',\n\t\t\t\t\taction: this.createFolder,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tid: 'account' + this.account.id + '_' + folder.id,\n\t\t\t\tkey: 'account' + this.account.id + '_' + folder.id,\n\t\t\t\ttext: translateMailboxName(folder),\n\t\t\t\ticon: 'icon-' + icon,\n\t\t\t\trouter: {\n\t\t\t\t\tname: 'folder',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\t\tfolderId: folder.id,\n\t\t\t\t\t},\n\t\t\t\t\texact: false,\n\t\t\t\t},\n\t\t\t\tutils: {\n\t\t\t\t\tactions,\n\t\t\t\t\tcounter: folder.unread,\n\t\t\t\t},\n\t\t\t\tcollapsible: true,\n\t\t\t\topened: folder.opened,\n\t\t\t\tchildren: this.$store.getters\n\t\t\t\t\t.getSubfolders(this.account.id, folder.id)\n\t\t\t\t\t.map(folder => this.folderToEntry(folder, false)),\n\t\t\t}\n\t\t},\n\t\tfetchFolderStats() {\n\t\t\tthis.loadingFolderStats = true\n\n\t\t\tgetFolderStats(this.account.id, this.folder.id)\n\t\t\t\t.then(stats => {\n\t\t\t\t\tLogger.debug('loaded folder stats', {stats})\n\t\t\t\t\tthis.folderStats = stats\n\n\t\t\t\t\tthis.loadingFolderStats = false\n\t\t\t\t})\n\t\t\t\t.catch(error => Logger.error(`could not load folder states for ${this.folder.id}`, {error}))\n\t\t},\n\t\tcreateFolder(e) {\n\t\t\tconst name = e.target.elements[0].value\n\t\t\tconst withPrefix = atob(this.folder.id) + this.folder.delimiter + name\n\t\t\tLogger.info(`creating folder ${withPrefix} as subfolder of ${this.folder.id}`)\n\t\t\tthis.menuOpen = false\n\t\t\tthis.$store\n\t\t\t\t.dispatch('createFolder', {account: this.account, name: withPrefix})\n\t\t\t\t.then(() => Logger.info(`folder ${withPrefix} created`))\n\t\t\t\t.catch(error => {\n\t\t\t\t\tLogger.error(`could not create folder ${withPrefix}`, {error})\n\t\t\t\t\tthrow error\n\t\t\t\t})\n\t\t},\n\t\tmarkAsRead(folder) {\n\t\t\treturn () => {\n\t\t\t\tthis.menuOpen = false\n\t\t\t\tthis.$store\n\t\t\t\t\t.dispatch('markFolderRead', {account: this.account, folderId: folder.id})\n\t\t\t\t\t.then(() => Logger.info(`folder ${folder.id} marked as read`))\n\t\t\t\t\t.catch(error => Logger.error(`could not mark folder ${folder.id} as read`, {error}))\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./NavigationFolder.vue?vue&type=template&id=36162a96&\"\nimport script from \"./NavigationFolder.vue?vue&type=script&lang=js&\"\nexport * from \"./NavigationFolder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppNavigationItem',{attrs:{\"item\":_vm.data,\"menu-open\":_vm.menuOpen},on:{\"update:menuOpen\":function($event){_vm.menuOpen=$event},\"update:menu-open\":function($event){_vm.menuOpen=$event}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSettingsMenu.vue?vue&type=script&lang=js&\"","<template>\n\t<div>\n\t\t<router-link to=\"/setup\" class=\"button new-button\">{{ t('mail', 'Add mail account') }} </router-link>\n\n\t\t<p v-if=\"loadingAvatarSettings\" class=\"avatar-settings\">\n\t\t\t<span class=\"icon-loading-small\"></span>\n\t\t\t{{ t('mail', 'Use Gravatar and favicon avatars') }}\n\t\t</p>\n\t\t<p v-else>\n\t\t\t<input\n\t\t\t\tid=\"gravatar-enabled\"\n\t\t\t\tclass=\"checkbox\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t:checked=\"useExternalAvatars\"\n\t\t\t\t@change=\"onToggleExternalAvatars\"\n\t\t\t/>\n\t\t\t<label for=\"gravatar-enabled\">{{ t('mail', 'Use Gravatar and favicon avatars') }}</label>\n\t\t</p>\n\n\t\t<p class=\"app-settings-hint\">\n\t\t\t<router-link :to=\"{name: 'keyboardShortcuts'}\">\n\t\t\t\t{{ t('mail', 'Keyboard shortcuts') }}\n\t\t\t</router-link>\n\t\t</p>\n\n\t\t<p class=\"app-settings-hint\">\n\t\t\t<a href=\"https://www.mailvelope.com/\" target=\"_blank\">{{\n\t\t\t\tt('mail', 'Looking for a way to encrypt your emails? Install the Mailvelope browser extension!')\n\t\t\t}}</a>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport Logger from '../logger'\n\nexport default {\n\tname: 'AppSettingsMenu',\n\tdata() {\n\t\treturn {\n\t\t\tloadingAvatarSettings: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tuseExternalAvatars() {\n\t\t\treturn this.$store.getters.getPreference('external-avatars', 'true') === 'true'\n\t\t},\n\t},\n\tmethods: {\n\t\tonToggleExternalAvatars(e) {\n\t\t\tthis.loadingAvatarSettings = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('savePreference', {\n\t\t\t\t\tkey: 'external-avatars',\n\t\t\t\t\tvalue: e.target.checked ? 'true' : 'false',\n\t\t\t\t})\n\t\t\t\t.catch(error => Logger.error('could not save preferences', {error}))\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loadingAvatarSettings = false\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\np.avatar-settings span.icon-loading-small {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 5px 0;\n}\n</style>\n","import { render, staticRenderFns } from \"./AppSettingsMenu.vue?vue&type=template&id=768f6630&scoped=true&\"\nimport script from \"./AppSettingsMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./AppSettingsMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppSettingsMenu.vue?vue&type=style&index=0&id=768f6630&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"768f6630\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('router-link',{staticClass:\"button new-button\",attrs:{\"to\":\"/setup\"}},[_vm._v(_vm._s(_vm.t('mail', 'Add mail account'))+\" \")]),_vm._v(\" \"),(_vm.loadingAvatarSettings)?_c('p',{staticClass:\"avatar-settings\"},[_c('span',{staticClass:\"icon-loading-small\"}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Use Gravatar and favicon avatars'))+\"\\n\\t\")]):_c('p',[_c('input',{staticClass:\"checkbox\",attrs:{\"id\":\"gravatar-enabled\",\"type\":\"checkbox\"},domProps:{\"checked\":_vm.useExternalAvatars},on:{\"change\":_vm.onToggleExternalAvatars}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"gravatar-enabled\"}},[_vm._v(_vm._s(_vm.t('mail', 'Use Gravatar and favicon avatars')))])]),_vm._v(\" \"),_c('p',{staticClass:\"app-settings-hint\"},[_c('router-link',{attrs:{\"to\":{name: 'keyboardShortcuts'}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Keyboard shortcuts'))+\"\\n\\t\\t\")])],1),_vm._v(\" \"),_c('p',{staticClass:\"app-settings-hint\"},[_c('a',{attrs:{\"href\":\"https://www.mailvelope.com/\",\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.t('mail', 'Looking for a way to encrypt your emails? Install the Mailvelope browser extension!')))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppNavigation>\n\t\t<AppNavigationNew\n\t\t\t:text=\"t('mail', 'New message')\"\n\t\t\tbutton-id=\"mail_new_message\"\n\t\t\tbutton-class=\"icon-add\"\n\t\t\t@click=\"onNewMessage\"\n\t\t/>\n\t\t<ul id=\"accounts-list\">\n\t\t\t<template v-for=\"group in menu\">\n\t\t\t\t<NavigationAccount v-if=\"group.account\" :key=\"group.account.id\" :account=\"group.account\" />\n\t\t\t\t<NavigationFolder\n\t\t\t\t\tv-for=\"item in group.folders\"\n\t\t\t\t\tv-show=\"!group.account.collapsed || SHOW_COLLAPSED.indexOf(item.specialRole) !== -1\"\n\t\t\t\t\t:key=\"item.key\"\n\t\t\t\t\t:account=\"group.account\"\n\t\t\t\t\t:folder=\"item\"\n\t\t\t\t/>\n\t\t\t\t<NavigationAccountExpandCollapse\n\t\t\t\t\tv-if=\"!group.account.isUnified && group.account.folders.length > 0\"\n\t\t\t\t\t:key=\"'collapse-' + group.account.id\"\n\t\t\t\t\t:account=\"group.account\"\n\t\t\t\t/>\n\t\t\t\t<AppNavigationSpacer :key=\"'spacer-' + group.account.id\" />\n\t\t\t</template>\n\t\t</ul>\n\t\t<AppNavigationSettings :title=\"t('mail', 'Settings')\">\n\t\t\t<AppSettingsMenu />\n\t\t</AppNavigationSettings>\n\t</AppNavigation>\n</template>\n\n<script>\nimport AppNavigation from 'nextcloud-vue/dist/Components/AppNavigation'\nimport AppNavigationNew from 'nextcloud-vue/dist/Components/AppNavigationNew'\nimport AppNavigationSettings from 'nextcloud-vue/dist/Components/AppNavigationSettings'\nimport AppNavigationSpacer from 'nextcloud-vue/dist/Components/AppNavigationSpacer'\n\nimport NavigationAccount from './NavigationAccount'\nimport NavigationAccountExpandCollapse from './NavigationAccountExpandCollapse'\nimport NavigationFolder from './NavigationFolder'\n\nconst SHOW_COLLAPSED = Object.seal(['inbox', 'flagged', 'drafts', 'sent'])\n\nimport AppSettingsMenu from '../components/AppSettingsMenu'\n\nexport default {\n\tname: 'Navigation',\n\tcomponents: {\n\t\tAppNavigation,\n\t\tAppNavigationNew,\n\t\tAppNavigationSettings,\n\t\tAppNavigationSpacer,\n\t\tAppSettingsMenu,\n\t\tNavigationAccount,\n\t\tNavigationAccountExpandCollapse,\n\t\tNavigationFolder,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tSHOW_COLLAPSED,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmenu() {\n\t\t\treturn this.$store.getters.getAccounts().map(account => {\n\t\t\t\tconst folders = this.$store.getters\n\t\t\t\t\t.getFolders(account.id)\n\t\t\t\t\t.filter(folder => !account.collapsed || SHOW_COLLAPSED.indexOf(folder.specialRole) !== -1)\n\t\t\t\t//.map(folderToEntry)\n\n\t\t\t\treturn {\n\t\t\t\t\tid: account.id,\n\t\t\t\t\taccount: account,\n\t\t\t\t\tfolders,\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonNewMessage() {\n\t\t\t// FIXME: assumes that we're on the 'message' route already\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Navigation.vue?vue&type=template&id=783b9159&scoped=true&\"\nimport script from \"./Navigation.vue?vue&type=script&lang=js&\"\nexport * from \"./Navigation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"783b9159\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=style&index=0&id=a9d24ca6&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"009e5834\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=30996fff&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8ff7896e\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=0bf2f7be&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2f6b8e6e\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=40de8a78&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b3b9be8a\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=587be26b&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3ef8a43a\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=1&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"25fe426c\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=3070be90&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9c7a1f4c\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&id=56bdb136&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"382ff971\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=63ae6cbc&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"15450fa7\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0d2c63ea\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"de3e3f3e\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=6b51141c&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b06c7bb2\", content, true, {});","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=style&index=0&id=a9d24ca6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=style&index=0&id=a9d24ca6&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n.toggle[data-v-a9d24ca6] {\\n\\tposition: fixed;\\n\\tdisplay: inline-block;\\n\\tleft: 0;\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tz-index: 149;\\n\\tbackground-color: var(--color-main-background-darker);\\n\\tcursor: pointer;\\n\\topacity: 0.6;\\n\\ttransform: rotate(180deg);\\n\\tmargin-top: 44px; /* under the show navigation button */\\n}\\n\", \"\"]);\n","var map = {\n\t\"./af\": 383,\n\t\"./af.js\": 383,\n\t\"./ar\": 384,\n\t\"./ar-dz\": 385,\n\t\"./ar-dz.js\": 385,\n\t\"./ar-kw\": 386,\n\t\"./ar-kw.js\": 386,\n\t\"./ar-ly\": 387,\n\t\"./ar-ly.js\": 387,\n\t\"./ar-ma\": 388,\n\t\"./ar-ma.js\": 388,\n\t\"./ar-sa\": 389,\n\t\"./ar-sa.js\": 389,\n\t\"./ar-tn\": 390,\n\t\"./ar-tn.js\": 390,\n\t\"./ar.js\": 384,\n\t\"./az\": 391,\n\t\"./az.js\": 391,\n\t\"./be\": 392,\n\t\"./be.js\": 392,\n\t\"./bg\": 393,\n\t\"./bg.js\": 393,\n\t\"./bm\": 394,\n\t\"./bm.js\": 394,\n\t\"./bn\": 395,\n\t\"./bn.js\": 395,\n\t\"./bo\": 396,\n\t\"./bo.js\": 396,\n\t\"./br\": 397,\n\t\"./br.js\": 397,\n\t\"./bs\": 398,\n\t\"./bs.js\": 398,\n\t\"./ca\": 399,\n\t\"./ca.js\": 399,\n\t\"./cs\": 400,\n\t\"./cs.js\": 400,\n\t\"./cv\": 401,\n\t\"./cv.js\": 401,\n\t\"./cy\": 402,\n\t\"./cy.js\": 402,\n\t\"./da\": 403,\n\t\"./da.js\": 403,\n\t\"./de\": 404,\n\t\"./de-at\": 405,\n\t\"./de-at.js\": 405,\n\t\"./de-ch\": 406,\n\t\"./de-ch.js\": 406,\n\t\"./de.js\": 404,\n\t\"./dv\": 407,\n\t\"./dv.js\": 407,\n\t\"./el\": 408,\n\t\"./el.js\": 408,\n\t\"./en-SG\": 409,\n\t\"./en-SG.js\": 409,\n\t\"./en-au\": 410,\n\t\"./en-au.js\": 410,\n\t\"./en-ca\": 411,\n\t\"./en-ca.js\": 411,\n\t\"./en-gb\": 412,\n\t\"./en-gb.js\": 412,\n\t\"./en-ie\": 413,\n\t\"./en-ie.js\": 413,\n\t\"./en-il\": 414,\n\t\"./en-il.js\": 414,\n\t\"./en-nz\": 415,\n\t\"./en-nz.js\": 415,\n\t\"./eo\": 416,\n\t\"./eo.js\": 416,\n\t\"./es\": 417,\n\t\"./es-do\": 418,\n\t\"./es-do.js\": 418,\n\t\"./es-us\": 419,\n\t\"./es-us.js\": 419,\n\t\"./es.js\": 417,\n\t\"./et\": 420,\n\t\"./et.js\": 420,\n\t\"./eu\": 421,\n\t\"./eu.js\": 421,\n\t\"./fa\": 422,\n\t\"./fa.js\": 422,\n\t\"./fi\": 423,\n\t\"./fi.js\": 423,\n\t\"./fo\": 424,\n\t\"./fo.js\": 424,\n\t\"./fr\": 425,\n\t\"./fr-ca\": 426,\n\t\"./fr-ca.js\": 426,\n\t\"./fr-ch\": 427,\n\t\"./fr-ch.js\": 427,\n\t\"./fr.js\": 425,\n\t\"./fy\": 428,\n\t\"./fy.js\": 428,\n\t\"./ga\": 429,\n\t\"./ga.js\": 429,\n\t\"./gd\": 430,\n\t\"./gd.js\": 430,\n\t\"./gl\": 431,\n\t\"./gl.js\": 431,\n\t\"./gom-latn\": 432,\n\t\"./gom-latn.js\": 432,\n\t\"./gu\": 433,\n\t\"./gu.js\": 433,\n\t\"./he\": 434,\n\t\"./he.js\": 434,\n\t\"./hi\": 435,\n\t\"./hi.js\": 435,\n\t\"./hr\": 436,\n\t\"./hr.js\": 436,\n\t\"./hu\": 437,\n\t\"./hu.js\": 437,\n\t\"./hy-am\": 438,\n\t\"./hy-am.js\": 438,\n\t\"./id\": 439,\n\t\"./id.js\": 439,\n\t\"./is\": 440,\n\t\"./is.js\": 440,\n\t\"./it\": 441,\n\t\"./it-ch\": 442,\n\t\"./it-ch.js\": 442,\n\t\"./it.js\": 441,\n\t\"./ja\": 443,\n\t\"./ja.js\": 443,\n\t\"./jv\": 444,\n\t\"./jv.js\": 444,\n\t\"./ka\": 445,\n\t\"./ka.js\": 445,\n\t\"./kk\": 446,\n\t\"./kk.js\": 446,\n\t\"./km\": 447,\n\t\"./km.js\": 447,\n\t\"./kn\": 448,\n\t\"./kn.js\": 448,\n\t\"./ko\": 449,\n\t\"./ko.js\": 449,\n\t\"./ku\": 450,\n\t\"./ku.js\": 450,\n\t\"./ky\": 451,\n\t\"./ky.js\": 451,\n\t\"./lb\": 452,\n\t\"./lb.js\": 452,\n\t\"./lo\": 453,\n\t\"./lo.js\": 453,\n\t\"./lt\": 454,\n\t\"./lt.js\": 454,\n\t\"./lv\": 455,\n\t\"./lv.js\": 455,\n\t\"./me\": 456,\n\t\"./me.js\": 456,\n\t\"./mi\": 457,\n\t\"./mi.js\": 457,\n\t\"./mk\": 458,\n\t\"./mk.js\": 458,\n\t\"./ml\": 459,\n\t\"./ml.js\": 459,\n\t\"./mn\": 460,\n\t\"./mn.js\": 460,\n\t\"./mr\": 461,\n\t\"./mr.js\": 461,\n\t\"./ms\": 462,\n\t\"./ms-my\": 463,\n\t\"./ms-my.js\": 463,\n\t\"./ms.js\": 462,\n\t\"./mt\": 464,\n\t\"./mt.js\": 464,\n\t\"./my\": 465,\n\t\"./my.js\": 465,\n\t\"./nb\": 466,\n\t\"./nb.js\": 466,\n\t\"./ne\": 467,\n\t\"./ne.js\": 467,\n\t\"./nl\": 468,\n\t\"./nl-be\": 469,\n\t\"./nl-be.js\": 469,\n\t\"./nl.js\": 468,\n\t\"./nn\": 470,\n\t\"./nn.js\": 470,\n\t\"./pa-in\": 471,\n\t\"./pa-in.js\": 471,\n\t\"./pl\": 472,\n\t\"./pl.js\": 472,\n\t\"./pt\": 473,\n\t\"./pt-br\": 474,\n\t\"./pt-br.js\": 474,\n\t\"./pt.js\": 473,\n\t\"./ro\": 475,\n\t\"./ro.js\": 475,\n\t\"./ru\": 476,\n\t\"./ru.js\": 476,\n\t\"./sd\": 477,\n\t\"./sd.js\": 477,\n\t\"./se\": 478,\n\t\"./se.js\": 478,\n\t\"./si\": 479,\n\t\"./si.js\": 479,\n\t\"./sk\": 480,\n\t\"./sk.js\": 480,\n\t\"./sl\": 481,\n\t\"./sl.js\": 481,\n\t\"./sq\": 482,\n\t\"./sq.js\": 482,\n\t\"./sr\": 483,\n\t\"./sr-cyrl\": 484,\n\t\"./sr-cyrl.js\": 484,\n\t\"./sr.js\": 483,\n\t\"./ss\": 485,\n\t\"./ss.js\": 485,\n\t\"./sv\": 486,\n\t\"./sv.js\": 486,\n\t\"./sw\": 487,\n\t\"./sw.js\": 487,\n\t\"./ta\": 488,\n\t\"./ta.js\": 488,\n\t\"./te\": 489,\n\t\"./te.js\": 489,\n\t\"./tet\": 490,\n\t\"./tet.js\": 490,\n\t\"./tg\": 491,\n\t\"./tg.js\": 491,\n\t\"./th\": 492,\n\t\"./th.js\": 492,\n\t\"./tl-ph\": 493,\n\t\"./tl-ph.js\": 493,\n\t\"./tlh\": 494,\n\t\"./tlh.js\": 494,\n\t\"./tr\": 495,\n\t\"./tr.js\": 495,\n\t\"./tzl\": 496,\n\t\"./tzl.js\": 496,\n\t\"./tzm\": 497,\n\t\"./tzm-latn\": 498,\n\t\"./tzm-latn.js\": 498,\n\t\"./tzm.js\": 497,\n\t\"./ug-cn\": 499,\n\t\"./ug-cn.js\": 499,\n\t\"./uk\": 500,\n\t\"./uk.js\": 500,\n\t\"./ur\": 501,\n\t\"./ur.js\": 501,\n\t\"./uz\": 502,\n\t\"./uz-latn\": 503,\n\t\"./uz-latn.js\": 503,\n\t\"./uz.js\": 502,\n\t\"./vi\": 504,\n\t\"./vi.js\": 504,\n\t\"./x-pseudo\": 505,\n\t\"./x-pseudo.js\": 505,\n\t\"./yo\": 506,\n\t\"./yo.js\": 506,\n\t\"./zh-cn\": 507,\n\t\"./zh-cn.js\": 507,\n\t\"./zh-hk\": 508,\n\t\"./zh-hk.js\": 508,\n\t\"./zh-tw\": 509,\n\t\"./zh-tw.js\": 509\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 633;","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=30996fff&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=30996fff&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Imports\nvar getUrl = require(\"../../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL___0___ = getUrl(require(\"../../img/reply.svg\"));\n// Module\nexports.push([module.id, \"\\n.mail-message-account-color[data-v-30996fff] {\\n\\tposition: absolute;\\n\\tleft: 0px;\\n\\twidth: 2px;\\n\\theight: 69px;\\n\\tz-index: 1;\\n}\\n.app-content-list-item.unseen[data-v-30996fff] {\\n\\tfont-weight: bold;\\n}\\n.app-content-list-item.draft .app-content-list-item-line-two[data-v-30996fff] {\\n\\tfont-style: italic;\\n}\\n.icon-reply[data-v-30996fff],\\n.icon-attachment[data-v-30996fff] {\\n\\tdisplay: inline-block;\\n\\tvertical-align: text-top;\\n}\\n.icon-reply[data-v-30996fff] {\\n\\tbackground-image: url(\" + ___CSS_LOADER_URL___0___ + \");\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\\n\\topacity: 0.5;\\n}\\n.icon-attachment[data-v-30996fff] {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\\n\\topacity: 0.25;\\n}\\n\", \"\"]);\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYiIHdpZHRoPSIxNiIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPgogPGcgb3BhY2l0eT0iLjUiIHRyYW5zZm9ybT0ibWF0cml4KC0xLDAsMCwxLDE2LC0xMDM2LjQpIj4KICA8cGF0aCBkPSJtMSAxMDUxLjRzMC4zOTE0Ny03LjgwMjUgNy0xMHYtNGw3IDctNyA3di00Yy01LjExNTcgMC03IDQtNyA0eiIvPgogPC9nPgo8L3N2Zz4K\"","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=0bf2f7be&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=0bf2f7be&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n#load-more-mail-messages[data-v-0bf2f7be] {\\n\\tmargin: 10px auto;\\n\\tpadding: 10px;\\n\\tmargin-top: 50px;\\n\\tmargin-bottom: 200px;\\n}\\n\\n/* TODO: put this in core icons.css as general rule for buttons with icons */\\n#load-more-mail-messages.icon-loading-small[data-v-0bf2f7be] {\\n\\tpadding-left: 32px;\\n\\tbackground-position: 9px center;\\n}\\n#list-refreshing[data-v-0bf2f7be] {\\n\\toverflow-y: hidden;\\n\\tmin-height: 0;\\n\\n\\ttransition-property: all;\\n\\ttransition-duration: 0.5s;\\n\\ttransition-timing-function: ease-in;\\n}\\n#list-refreshing.refreshing[data-v-0bf2f7be] {\\n\\tmin-height: 32px;\\n}\\n.list-enter-active[data-v-0bf2f7be],\\n.list-leave-active[data-v-0bf2f7be] {\\n\\ttransition: all 1s;\\n}\\n.list-enter[data-v-0bf2f7be],\\n.list-leave-to[data-v-0bf2f7be] {\\n\\topacity: 0;\\n\\theight: 0px;\\n\\ttransform: scaleY(0);\\n}\\n\", \"\"]);\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=40de8a78&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=40de8a78&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\nbutton[data-v-40de8a78] {\\n\\t/* TODO: remove for Nextcloud 15+ */\\n\\t/* https://github.com/nextcloud/server/pull/12138 */\\n\\tdisplay: inline-block;\\n}\\n.new-message-attachments li[data-v-40de8a78] {\\n\\tpadding: 10px;\\n}\\n.new-message-attachments-action[data-v-40de8a78] {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 22px;\\n\\topacity: 0.5;\\n}\\n\\n/* attachment filenames */\\n.new-message-attachment-name[data-v-40de8a78] {\\n\\tdisplay: inline-block;\\n}\\n\\n/* Colour the filename with a different color during attachment upload */\\n.new-message-attachment-name.upload-ongoing[data-v-40de8a78] {\\n\\tcolor: #0082c9;\\n}\\n\\n/* Colour the filename in red if the attachment upload failed */\\n.new-message-attachment-name.upload-warning[data-v-40de8a78] {\\n\\tcolor: #d2322d;\\n}\\n\\n/* Red ProgressBar for failed attachment uploads */\\n.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-40de8a78] {\\n\\tborder: 1px solid #e9322d;\\n\\tbackground: #e9322d;\\n}\\n\", \"\"]);\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=587be26b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=587be26b&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n.message-composer[data-v-587be26b] {\\n\\tmargin: 0;\\n\\tmargin-bottom: 10px; /* line up with the send button */\\n\\tz-index: 100;\\n}\\n#reply-composer .message-composer[data-v-587be26b] {\\n\\tmargin: 0;\\n}\\n.composer-fields.mail-account > .multiselect[data-v-587be26b] {\\n\\tmax-width: none;\\n\\tmin-height: auto;\\n\\twidth: 350px;\\n}\\n.composer-fields[data-v-587be26b] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tborder-top: 1px solid var(--color-border);\\n\\tpadding-right: 30px;\\n}\\n.composer-fields .multiselect[data-v-587be26b],\\n.composer-fields input[data-v-587be26b],\\n.composer-fields textarea[data-v-587be26b] {\\n\\tflex-grow: 1;\\n\\tmax-width: none;\\n\\tborder: none;\\n\\tborder-radius: 0px;\\n}\\n.noreply-box[data-v-587be26b] {\\n\\tmargin-top: 0;\\n\\tbackground: #fdffc3;\\n\\tpadding-left: 64px;\\n}\\n#to[data-v-587be26b],\\n#cc[data-v-587be26b],\\n#bcc[data-v-587be26b],\\ninput.subject[data-v-587be26b],\\ntextarea.message-body[data-v-587be26b] {\\n\\tpadding: 12px;\\n\\tmargin: 0;\\n}\\n#to[data-v-587be26b] {\\n\\tpadding-right: 60px; /* for cc-bcc-toggle */\\n}\\ninput.cc[data-v-587be26b],\\ninput.bcc[data-v-587be26b],\\ninput.subject[data-v-587be26b],\\ntextarea.message-body[data-v-587be26b] {\\n\\tborder-top: none;\\n}\\ninput.subject[data-v-587be26b] {\\n\\tfont-size: 20px;\\n\\tfont-weight: 300;\\n}\\ntextarea.message-body[data-v-587be26b] {\\n\\tmin-height: 300px;\\n\\tresize: none;\\n\\tpadding-right: 25%;\\n}\\n#draft-status[data-v-587be26b] {\\n\\tpadding: 5px;\\n\\topacity: 0.5;\\n\\tfont-size: small;\\n}\\nlabel.to-label[data-v-587be26b],\\nlabel.cc-label[data-v-587be26b],\\nlabel.bcc-label[data-v-587be26b],\\nlabel.subject-label[data-v-587be26b] {\\n\\tpadding: 12px;\\n\\tpadding-left: 30px;\\n\\tcursor: text;\\n\\topacity: 0.5;\\n\\twidth: 90px;\\n\\ttext-align: right;\\n}\\nlabel.bcc-label[data-v-587be26b] {\\n\\ttop: initial;\\n\\tbottom: 0;\\n}\\ntextarea.reply[data-v-587be26b] {\\n\\tmin-height: 100px;\\n}\\ninput.submit-message[data-v-587be26b],\\n.submit-message-wrapper[data-v-587be26b] {\\n\\tposition: fixed;\\n\\tbottom: 10px;\\n\\tright: 15px;\\n}\\n.submit-message-wrapper[data-v-587be26b] {\\n\\tposition: fixed;\\n\\theight: 36px;\\n\\twidth: 60px;\\n}\\n.submit-message.send[data-v-587be26b] {\\n\\tpadding: 12px;\\n}\\n\", \"\"]);\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=1&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n.multiselect .multiselect__tags {\\n\\tborder: none !important;\\n}\\n\", \"\"]);\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=3070be90&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=3070be90&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n#message-container[data-v-3070be90] {\\n\\tposition: relative;\\n\\twidth: 100%;\\n\\theight: 0;\\n\\tpadding-bottom: 56.25%;\\n}\\n#message-frame[data-v-3070be90] {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\twidth: 100%;\\n\\theight: 100%;\\n}\\n\", \"\"]);\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&id=56bdb136&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&id=56bdb136&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n.mail-signature[data-v-56bdb136] {\\n\\tfont-family: monospace;\\n\\topacity: 0.5;\\n\\tline-height: initial;\\n}\\n\", \"\"]);\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=63ae6cbc&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=63ae6cbc&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n.attachment[data-v-63ae6cbc] {\\n\\tposition: relative;\\n\\tdisplay: inline-block;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: 3px;\\n\\tmargin: 0 10px 10px 0;\\n\\tpadding: 5px;\\n}\\n.attachment[data-v-63ae6cbc]:hover,\\n.attachment span[data-v-63ae6cbc]:hover {\\n\\tbackground-color: var(--color-background-dark);\\n\\tcursor: pointer;\\n}\\n@media only screen and (max-width: 768px) {\\n.attachment[data-v-63ae6cbc] {\\n\\t\\twidth: calc(100% - 5px);\\n}\\n}\\n@media only screen and (min-width: 769px) and (max-width: 1400px) {\\n.attachment[data-v-63ae6cbc] {\\n\\t\\twidth: calc(50% - 10px);\\n}\\n}\\n@media only screen and (min-width: 1401px) {\\n.attachment[data-v-63ae6cbc] {\\n\\t\\twidth: calc(33% - 12px);\\n}\\n}\\n.mail-attached-image[data-v-63ae6cbc] {\\n\\tdisplay: block;\\n\\tmax-width: 100%;\\n\\tmax-height: 120px;\\n}\\n.attachment-save-to-cloud[data-v-63ae6cbc],\\n.attachment-download[data-v-63ae6cbc],\\n.attachment-import[data-v-63ae6cbc] {\\n\\tposition: absolute;\\n\\theight: 32px;\\n\\twidth: 32px;\\n\\tmargin: 0;\\n\\tbottom: 0;\\n\\tbackground-color: transparent;\\n\\tborder-color: transparent;\\n}\\n.attachment-save-to-cloud[data-v-63ae6cbc] {\\n\\tright: 0;\\n}\\n.attachment-download[data-v-63ae6cbc] {\\n\\tright: 32px;\\n\\topacity: 0.6;\\n}\\n.attachment-import[data-v-63ae6cbc] {\\n\\tright: 64px;\\n}\\n.attachment-import-popover[data-v-63ae6cbc] {\\n\\tright: 32px;\\n\\ttop: 42px;\\n}\\n.attachment-import-popover[data-v-63ae6cbc]::after {\\n\\tright: 32px;\\n}\\n.attachment-name[data-v-63ae6cbc] {\\n\\tdisplay: inline-block;\\n\\twidth: calc(100% - 108px);\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tvertical-align: middle;\\n}\\n\\n/* show attachment size less prominent */\\n.attachment-size[data-v-63ae6cbc] {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\\n\\topacity: 0.5;\\n}\\n.attachment-icon[data-v-63ae6cbc] {\\n\\tvertical-align: middle;\\n}\\n\", \"\"]);\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n.mail-message-attachments {\\n\\tmargin-bottom: 20px;\\n}\\n\\n/* show icon + text for Download all button\\n\\t\\tas well as when there is only one attachment */\\n.attachments-save-to-cloud {\\n\\tbackground-position: 9px center;\\n\\tpadding-left: 32px;\\n}\\n\", \"\"]);\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n.mail-message-body {\\n\\tmargin-bottom: 100px;\\n}\\n#mail-message-header h2,\\n#mail-message-header p {\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tpadding-bottom: 7px;\\n\\tmargin-bottom: 0;\\n}\\n#mail-content,\\n.mail-message-attachments {\\n\\tmargin: 10px 10px 50px 30px;\\n}\\n.mail-message-attachments {\\n\\tmargin-top: 10px;\\n}\\n#mail-content iframe {\\n\\twidth: 100%;\\n}\\n#show-images-text {\\n\\tdisplay: none;\\n}\\n#mail-content a,\\n.mail-signature a {\\n\\tcolor: #07d;\\n\\tborder-bottom: 1px dotted #07d;\\n\\ttext-decoration: none;\\n\\tword-wrap: break-word;\\n}\\n#mail-message-header .transparency {\\n\\topacity: 0.6;\\n}\\n#mail-message-header .transparency a {\\n\\tfont-weight: bold;\\n}\\n@media print {\\n#mail-message-header {\\n\\t\\tposition: relative;\\n}\\n#header,\\n\\t#app-navigation,\\n\\t#reply-composer,\\n\\t#forward-button,\\n\\t#mail-message-has-blocked-content,\\n\\t.app-content-list,\\n\\t.message-composer,\\n\\t.mail-message-attachments {\\n\\t\\tdisplay: none !important;\\n}\\n#app-content {\\n\\t\\tmargin-left: 0 !important;\\n}\\n.mail-message-body {\\n\\t\\tmargin-bottom: 0 !important;\\n}\\n}\\n\", \"\"]);\n","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=6b51141c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=6b51141c&scoped=true&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\\n.app-content-details[data-v-6b51141c] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n}\\n.icon[data-v-6b51141c] {\\n\\theight: 64px;\\n\\twidth: 64px;\\n\\tmargin: 0 auto 15px;\\n\\tbackground-size: 64px;\\n\\topacity: 0.4;\\n}\\nh2[data-v-6b51141c],\\np[data-v-6b51141c] {\\n\\ttext-align: center;\\n}\\n\", \"\"]);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Content',{directives:[{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(['c']),expression:\"['c']\",modifiers:{\"once\":true}}],attrs:{\"app-name\":\"mail\"},nativeOn:{\"shortkey\":function($event){return _vm.onNewMessage($event)}}},[_c('Navigation'),_vm._v(\" \"),(_vm.activeAccount)?_c('FolderContent',{attrs:{\"account\":_vm.activeAccount,\"folder\":_vm.activeFolder}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div v-if=\"isMobile\" class=\"toggle icon-confirm\" tabindex=\"0\" @click=\"$emit('close')\"></div>\n</template>\n\n<script>\nimport isMobile from 'nextcloud-vue/dist/Mixins/isMobile'\n\nexport default {\n\tname: 'AppDetailsToggle',\n\tmixins: [isMobile],\n}\n</script>\n\n<style scoped>\n.toggle {\n\tposition: fixed;\n\tdisplay: inline-block;\n\tleft: 0;\n\twidth: 44px;\n\theight: 44px;\n\tz-index: 149;\n\tbackground-color: var(--color-main-background-darker);\n\tcursor: pointer;\n\topacity: 0.6;\n\ttransform: rotate(180deg);\n\tmargin-top: 44px; /* under the show navigation button */\n}\n</style>\n","import { render, staticRenderFns } from \"./AppDetailsToggle.vue?vue&type=template&id=a9d24ca6&scoped=true&\"\nimport script from \"./AppDetailsToggle.vue?vue&type=script&lang=js&\"\nexport * from \"./AppDetailsToggle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppDetailsToggle.vue?vue&type=style&index=0&id=a9d24ca6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a9d24ca6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isMobile)?_c('div',{staticClass:\"toggle icon-confirm\",attrs:{\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.$emit('close')}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyFolder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyFolder.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<div class=\"icon-mail\"></div>\n\t\t<h2>{{ t('mail', 'No messages in this folder') }}</h2>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'EmptyFolder',\n}\n</script>\n","import { render, staticRenderFns } from \"./EmptyFolder.vue?vue&type=template&id=3eaae910&\"\nimport script from \"./EmptyFolder.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyFolder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('div',{staticClass:\"icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No messages in this folder')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<span class=\"live-relative-timestamp\" :data-timestamp=\"timestamp * 1000\" :title=\"title\">{{ formatted }}</span>\n</template>\n\n<script>\nimport {getLocale} from 'nextcloud-l10n'\nimport moment from 'moment'\n\nif (typeof OC !== 'undefined') {\n\tmoment.locale(getLocale())\n}\n\nexport default {\n\tname: 'Moment',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tformat: {\n\t\t\ttype: String,\n\t\t\tdefault: 'LLL',\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\treturn moment.unix(this.timestamp).format(this.format)\n\t\t},\n\t\tformatted() {\n\t\t\treturn moment.unix(this.timestamp).fromNow()\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Moment.vue?vue&type=template&id=a28d597a&\"\nimport script from \"./Moment.vue?vue&type=script&lang=js&\"\nexport * from \"./Moment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"live-relative-timestamp\",attrs:{\"data-timestamp\":_vm.timestamp * 1000,\"title\":_vm.title}},[_vm._v(_vm._s(_vm.formatted))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport _ from 'lodash'\nimport Axios from 'nextcloud-axios'\nimport {generateUrl} from 'nextcloud-router'\n\nexport const fetchAvatarUrl = email => {\n\tif (email === null) {\n\t\treturn Promise.resolve(undefined)\n\t}\n\n\tconst url = generateUrl('/apps/mail/api/avatars/url/{email}', {\n\t\temail,\n\t})\n\n\treturn Axios.get(url)\n\t\t.then(resp => resp.data)\n\t\t.then(avatar => {\n\t\t\tif (avatar.isExternal) {\n\t\t\t\treturn generateUrl('/apps/mail/api/avatars/image/{email}', {\n\t\t\t\t\temail: email,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\treturn avatar.url\n\t\t\t}\n\t\t})\n\t\t.catch(err => {\n\t\t\tif (err.response.status === 404) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\treturn Promise.reject(err)\n\t\t})\n}\n\nexport const fetchAvatarUrlMemoized = _.memoize(fetchAvatarUrl)\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<BaseAvatar v-if=\"loading || !hasAvatar\" :display-name=\"displayName\" />\n\t<BaseAvatar v-else :display-name=\"displayName\" :url=\"avatarUrl\" />\n</template>\n\n<script>\nimport _ from 'lodash'\nimport BaseAvatar from 'nextcloud-vue/dist/Components/Avatar'\n\nimport {fetchAvatarUrlMemoized} from '../service/AvatarService'\n\nexport default {\n\tname: 'Avatar',\n\tcomponents: {\n\t\tBaseAvatar,\n\t},\n\tprops: {\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tavatarUrl: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasAvatar() {\n\t\t\treturn !_.isUndefined(this.avatarUrl)\n\t\t},\n\t},\n\tmounted() {\n\t\tfetchAvatarUrlMemoized(this.email).then(url => {\n\t\t\tthis.avatarUrl = url\n\t\t\tthis.loading = false\n\t\t})\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Avatar.vue?vue&type=template&id=698f6bac&\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loading || !_vm.hasAvatar)?_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName}}):_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"url\":_vm.avatarUrl}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"","<template>\n\t<router-link class=\"app-content-list-item\" :class=\"{unseen: data.flags.unseen, draft}\" :to=\"link\">\n\t\t<div\n\t\t\tv-if=\"showAccountColor\"\n\t\t\tclass=\"mail-message-account-color\"\n\t\t\t:style=\"{'background-color': accountColor}\"\n\t\t></div>\n\t\t<div\n\t\t\tclass=\"app-content-list-item-star icon-starred\"\n\t\t\t:data-starred=\"data.flags.flagged ? 'true' : 'false'\"\n\t\t\t@click.prevent=\"onToggleFlagged\"\n\t\t></div>\n\t\t<div class=\"app-content-list-item-icon\">\n\t\t\t<Avatar :display-name=\"sender\" :email=\"senderEmail\" />\n\t\t</div>\n\t\t<div class=\"app-content-list-item-line-one\" :title=\"sender\">\n\t\t\t{{ sender }}\n\t\t</div>\n\t\t<div class=\"app-content-list-item-line-two\" :title=\"data.subject\">\n\t\t\t<span v-if=\"data.flags.answered\" class=\"icon-reply\" />\n\t\t\t<span v-if=\"data.flags.hasAttachments\" class=\"icon-public icon-attachment\" />\n\t\t\t<span v-if=\"draft\" class=\"draft\">\n\t\t\t\t<em>{{ t('mail', 'Draft: ') }}</em>\n\t\t\t</span>\n\t\t\t{{ data.subject }}\n\t\t</div>\n\t\t<div class=\"app-content-list-item-details date\">\n\t\t\t<Moment :timestamp=\"data.dateInt\" />\n\t\t</div>\n\t\t<Actions class=\"app-content-list-item-menu\" menu-align=\"right\">\n\t\t\t<ActionButton icon=\"icon-mail\" @click=\"onToggleSeen\">{{\n\t\t\t\tdata.flags.unseen ? t('mail', 'Mark read') : t('mail', 'Mark unread')\n\t\t\t}}</ActionButton>\n\t\t\t<ActionButton icon=\"icon-delete\" @click=\"onDelete\">{{ t('mail', 'Delete') }}</ActionButton>\n\t\t</Actions>\n\t</router-link>\n</template>\n\n<script>\nimport Actions from 'nextcloud-vue/dist/Components/Actions'\nimport ActionButton from 'nextcloud-vue/dist/Components/ActionButton'\nimport Moment from './Moment'\n\nimport Avatar from './Avatar'\nimport {calculateAccountColor} from '../util/AccountColor'\n\nexport default {\n\tname: 'Envelope',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tAvatar,\n\t\tMoment,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tshowAccountColor: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\taccountColor() {\n\t\t\treturn calculateAccountColor(this.$store.getters.getAccount(this.data.accountId).emailAddress)\n\t\t},\n\t\tdraft() {\n\t\t\treturn this.data.flags.draft\n\t\t},\n\t\tlink() {\n\t\t\tif (this.draft) {\n\t\t\t\t// TODO: does not work with a unified drafts folder\n\t\t\t\t//       the query should also contain the account and folder\n\t\t\t\t//       id for that to work\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t\t\tdraftUid: this.data.uid,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\t\tmessageUid: this.data.uid,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsender() {\n\t\t\tif (this.data.from.length === 0) {\n\t\t\t\t// No sender\n\t\t\t\treturn '?'\n\t\t\t}\n\n\t\t\tconst first = this.data.from[0]\n\t\t\treturn first.label || first.email\n\t\t},\n\t\tsenderEmail() {\n\t\t\tif (this.data.from.length > 0) {\n\t\t\t\treturn this.data.from[0].email\n\t\t\t} else {\n\t\t\t\treturn undefined\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.data)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', this.data)\n\t\t},\n\t\tonDelete(e) {\n\t\t\t// Don't navigate to the deleted message\n\t\t\te.preventDefault()\n\n\t\t\tthis.$emit('delete', this.data)\n\t\t\tthis.$store.dispatch('deleteMessage', this.data)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.mail-message-account-color {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 2px;\n\theight: 69px;\n\tz-index: 1;\n}\n\n.app-content-list-item.unseen {\n\tfont-weight: bold;\n}\n.app-content-list-item.draft .app-content-list-item-line-two {\n\tfont-style: italic;\n}\n\n.icon-reply,\n.icon-attachment {\n\tdisplay: inline-block;\n\tvertical-align: text-top;\n}\n\n.icon-reply {\n\tbackground-image: url('../../img/reply.svg');\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n\n.icon-attachment {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n</style>\n","import { render, staticRenderFns } from \"./Envelope.vue?vue&type=template&id=30996fff&scoped=true&\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js&\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Envelope.vue?vue&type=style&index=0&id=30996fff&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30996fff\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-link',{staticClass:\"app-content-list-item\",class:{unseen: _vm.data.flags.unseen, draft: _vm.draft},attrs:{\"to\":_vm.link}},[(_vm.showAccountColor)?_c('div',{staticClass:\"mail-message-account-color\",style:({'background-color': _vm.accountColor})}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-star icon-starred\",attrs:{\"data-starred\":_vm.data.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-icon\"},[_c('Avatar',{attrs:{\"display-name\":_vm.sender,\"email\":_vm.senderEmail}})],1),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-line-one\",attrs:{\"title\":_vm.sender}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.sender)+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-line-two\",attrs:{\"title\":_vm.data.subject}},[(_vm.data.flags.answered)?_c('span',{staticClass:\"icon-reply\"}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.hasAttachments)?_c('span',{staticClass:\"icon-public icon-attachment\"}):_vm._e(),_vm._v(\" \"),(_vm.draft)?_c('span',{staticClass:\"draft\"},[_c('em',[_vm._v(_vm._s(_vm.t('mail', 'Draft: ')))])]):_vm._e(),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.data.subject)+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-details date\"},[_c('Moment',{attrs:{\"timestamp\":_vm.data.dateInt}})],1),_vm._v(\" \"),_c('Actions',{staticClass:\"app-content-list-item-menu\",attrs:{\"menu-align\":\"right\"}},[_c('ActionButton',{attrs:{\"icon\":\"icon-mail\"},on:{\"click\":_vm.onToggleSeen}},[_vm._v(_vm._s(_vm.data.flags.unseen ? _vm.t('mail', 'Mark read') : _vm.t('mail', 'Mark unread')))]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\"},on:{\"click\":_vm.onDelete}},[_vm._v(_vm._s(_vm.t('mail', 'Delete')))])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<AppContentList :show-details=\"!show\">\n\t\t<transition-group\n\t\t\tv-infinite-scroll=\"loadMore\"\n\t\t\tv-scroll=\"onScroll\"\n\t\t\tv-shortkey.once=\"shortkeys\"\n\t\t\tname=\"list\"\n\t\t\tinfinite-scroll-disabled=\"loading\"\n\t\t\tinfinite-scroll-distance=\"30\"\n\t\t\t@shortkey.native=\"handleShortcut\"\n\t\t>\n\t\t\t<div id=\"list-refreshing\" key=\"loading\" class=\"icon-loading-small\" :class=\"{refreshing: refreshing}\" />\n\t\t\t<EmptyFolder v-if=\"envelopes.length === 0\" key=\"empty\" />\n\t\t\t<Envelope\n\t\t\t\tv-for=\"env in envelopes\"\n\t\t\t\tv-else\n\t\t\t\t:key=\"env.uid\"\n\t\t\t\t:data=\"env\"\n\t\t\t\t:show-account-color=\"folder.isUnified\"\n\t\t\t\t@delete=\"onEnvelopeDeleted\"\n\t\t\t/>\n\t\t\t<div id=\"load-more-mail-messages\" key=\"loadingMore\" :class=\"{'icon-loading-small': loadingMore}\" />\n\t\t</transition-group>\n\t</AppContentList>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport AppContentList from 'nextcloud-vue/dist/Components/AppContentList'\nimport infiniteScroll from 'vue-infinite-scroll'\nimport vuescroll from 'vue-scroll'\nimport Vue from 'vue'\n\nimport EmptyFolder from './EmptyFolder'\nimport Envelope from './Envelope'\nimport Logger from '../logger'\n\nVue.use(vuescroll, {throttle: 600})\n\nexport default {\n\tname: 'EnvelopeList',\n\tcomponents: {\n\t\tAppContentList,\n\t\tEnvelope,\n\t\tEmptyFolder,\n\t},\n\tdirectives: {\n\t\tinfiniteScroll,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfolder: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloadingMore: false,\n\t\t\trefreshing: false,\n\t\t\tshortkeys: {\n\t\t\t\tdel: ['del'],\n\t\t\t\tflag: ['s'],\n\t\t\t\tnext: ['arrowright'],\n\t\t\t\tprev: ['arrowleft'],\n\t\t\t\trefresh: ['r'],\n\t\t\t\tunseen: ['u'],\n\t\t\t},\n\t\t}\n\t},\n\tcomputed: {\n\t\tisSearch() {\n\t\t\treturn !_.isUndefined(this.searchQuery)\n\t\t},\n\t},\n\tmethods: {\n\t\tloadMore() {\n\t\t\tthis.loadingMore = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchNextEnvelopePage', {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t})\n\t\t\t\t.catch(error => Logger.error('could not fetch next envelope page', {error}))\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loadingMore = false\n\t\t\t\t})\n\t\t},\n\t\tsync() {\n\t\t\tthis.refreshing = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('syncEnvelopes', {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t})\n\t\t\t\t.catch(error => Logger.error('could not sync envelopes', {error}))\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.refreshing = false\n\t\t\t\t})\n\t\t},\n\t\tonEnvelopeDeleted(envelope) {\n\t\t\tconst envelopes = this.envelopes\n\t\t\tconst idx = this.envelopes.indexOf(envelope)\n\t\t\tif (idx === -1) {\n\t\t\t\tLogger.debug('envelope to delete does not exist in envelope list')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (envelope.uid !== this.$route.params.messageUid) {\n\t\t\t\tLogger.debug('other message open, not jumping to the next/previous message')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlet next\n\t\t\tif (idx === 0) {\n\t\t\t\tnext = envelopes[idx + 1]\n\t\t\t} else {\n\t\t\t\tnext = envelopes[idx - 1]\n\t\t\t}\n\n\t\t\tif (!next) {\n\t\t\t\tLogger.debug('no next/previous envelope, not navigating')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep the selected account-folder combination, but navigate to a different message\n\t\t\t// (it's not a bug that we don't use next.accountId and next.folderId here)\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: next.uid,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonScroll(e, p) {\n\t\t\tif (p.scrollTop === 0 && !this.refreshing) {\n\t\t\t\treturn this.sync()\n\t\t\t}\n\t\t},\n\t\thandleShortcut(e) {\n\t\t\tconst envelopes = this.envelopes\n\t\t\tconst currentUid = this.$route.params.messageUid\n\n\t\t\tif (!currentUid) {\n\t\t\t\tLogger.debug('ignoring shortcut: no envelope selected')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst current = envelopes.filter(e => e.uid == currentUid)\n\t\t\tif (current.length === 0) {\n\t\t\t\tLogger.debug('ignoring shortcut: currently displayed messages is not in current envelope list')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst env = current[0]\n\t\t\tconst idx = envelopes.indexOf(env)\n\n\t\t\tswitch (e.srcKey) {\n\t\t\t\tcase 'next':\n\t\t\t\tcase 'prev':\n\t\t\t\t\tlet next\n\t\t\t\t\tif (e.srcKey === 'next') {\n\t\t\t\t\t\tnext = envelopes[idx + 1]\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext = envelopes[idx - 1]\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!next) {\n\t\t\t\t\t\tLogger.debug('ignoring shortcut: head or tail of envelope list reached', {\n\t\t\t\t\t\t\tenvelopes,\n\t\t\t\t\t\t\tidx,\n\t\t\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\t// Keep the selected account-folder combination, but navigate to a different message\n\t\t\t\t\t// (it's not a bug that we don't use next.accountId and next.folderId here)\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\t\t\tmessageUid: next.uid,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\tbreak\n\t\t\t\tcase 'del':\n\t\t\t\t\tLogger.debug('deleting', {env})\n\t\t\t\t\tthis.$store\n\t\t\t\t\t\t.dispatch('deleteMessage', env)\n\t\t\t\t\t\t.catch(error => Logger.error('could not delete envelope', {env, error}))\n\n\t\t\t\t\tbreak\n\t\t\t\tcase 'flag':\n\t\t\t\t\tLogger.debug('flagging envelope via shortkey', {env})\n\t\t\t\t\tthis.$store\n\t\t\t\t\t\t.dispatch('toggleEnvelopeFlagged', env)\n\t\t\t\t\t\t.catch(error => Logger.error('could not flag envelope via shortkey', {env, error}))\n\t\t\t\t\tbreak\n\t\t\t\tcase 'refresh':\n\t\t\t\t\tLogger.debug('syncing envelopes via shortkey')\n\t\t\t\t\tif (!this.refreshing) {\n\t\t\t\t\t\tthis.sync()\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\t\t\t\tcase 'unseen':\n\t\t\t\t\tLogger.debug('marking message as seen/unseen via shortkey', {env})\n\t\t\t\t\tthis.$store\n\t\t\t\t\t\t.dispatch('toggleEnvelopeSeen', env)\n\t\t\t\t\t\t.catch(error =>\n\t\t\t\t\t\t\tLogger.error('could not mark envelope as seen/unseen via shortkey', {env, error})\n\t\t\t\t\t\t)\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tLogger.warn('shortcut ' + e.srcKey + ' is unknown. ignoring.')\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#load-more-mail-messages {\n\tmargin: 10px auto;\n\tpadding: 10px;\n\tmargin-top: 50px;\n\tmargin-bottom: 200px;\n}\n\n/* TODO: put this in core icons.css as general rule for buttons with icons */\n#load-more-mail-messages.icon-loading-small {\n\tpadding-left: 32px;\n\tbackground-position: 9px center;\n}\n\n#list-refreshing {\n\toverflow-y: hidden;\n\tmin-height: 0;\n\n\ttransition-property: all;\n\ttransition-duration: 0.5s;\n\ttransition-timing-function: ease-in;\n}\n\n#list-refreshing.refreshing {\n\tmin-height: 32px;\n}\n\n.list-enter-active,\n.list-leave-active {\n\ttransition: all 1s;\n}\n\n.list-enter,\n.list-leave-to {\n\topacity: 0;\n\theight: 0px;\n\ttransform: scaleY(0);\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EnvelopeList.vue?vue&type=template&id=0bf2f7be&scoped=true&\"\nimport script from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nexport * from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnvelopeList.vue?vue&type=style&index=0&id=0bf2f7be&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bf2f7be\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentList',{attrs:{\"show-details\":!_vm.show}},[_c('transition-group',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"},{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.onScroll),expression:\"onScroll\"},{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(_vm.shortkeys),expression:\"shortkeys\",modifiers:{\"once\":true}}],attrs:{\"name\":\"list\",\"infinite-scroll-disabled\":\"loading\",\"infinite-scroll-distance\":\"30\"},nativeOn:{\"shortkey\":function($event){return _vm.handleShortcut($event)}}},[_c('div',{key:\"loading\",staticClass:\"icon-loading-small\",class:{refreshing: _vm.refreshing},attrs:{\"id\":\"list-refreshing\"}}),_vm._v(\" \"),(_vm.envelopes.length === 0)?_c('EmptyFolder',{key:\"empty\"}):_vm._l((_vm.envelopes),function(env){return _c('Envelope',{key:env.uid,attrs:{\"data\":env,\"show-account-color\":_vm.folder.isUnified},on:{\"delete\":_vm.onEnvelopeDeleted}})}),_vm._v(\" \"),_c('div',{key:\"loadingMore\",class:{'icon-loading-small': _vm.loadingMore},attrs:{\"id\":\"load-more-mail-messages\"}})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","<template>\n\t<div v-if=\"hint\" class=\"emptycontent\">\n\t\t<a class=\"icon-loading\"></a>\n\t\t<h2>{{ hint }}</h2>\n\t</div>\n\t<div v-else class=\"container icon-loading\"></div>\n</template>\n\n<script>\nexport default {\n\tname: 'Loading',\n\tprops: {\n\t\thint: {\n\t\t\ttype: String,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n}\n</script>\n\n<style scoped></style>\n","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=8aa72af6&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8aa72af6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hint)?_c('div',{staticClass:\"emptycontent\"},[_c('a',{staticClass:\"icon-loading\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.hint))])]):_c('div',{staticClass:\"container icon-loading\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Address.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Address.vue?vue&type=script&lang=js&\"","<template>\n\t<router-link v-tooltip.bottom=\"email\" :to=\"newMessageRoute\" exact>{{ label }} </router-link>\n</template>\n\n<script>\nexport default {\n\tname: 'Address',\n\tprops: {\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tnewMessageRoute() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.email,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressList.vue?vue&type=script&lang=js&\"","<template>\n\t<span>\n\t\t<template v-for=\"(entry, idx) in entries\">\n\t\t\t<Address :key=\"entry.email\" :email=\"entry.email\" :label=\"entry.label\" /><!--\n\t\t\t--><span v-if=\"idx + 1 < entries.length\" :key=\"entry.email\">, </span>\n\t\t</template>\n\t</span>\n</template>\n\n<script>\nimport Address from './Address'\n\nexport default {\n\tname: 'AddressList',\n\tcomponents: {\n\t\tAddress,\n\t},\n\tprops: {\n\t\tentries: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Address.vue?vue&type=template&id=02e7532c&\"\nimport script from \"./Address.vue?vue&type=script&lang=js&\"\nexport * from \"./Address.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-link',{directives:[{name:\"tooltip\",rawName:\"v-tooltip.bottom\",value:(_vm.email),expression:\"email\",modifiers:{\"bottom\":true}}],attrs:{\"to\":_vm.newMessageRoute,\"exact\":\"\"}},[_vm._v(_vm._s(_vm.label)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./AddressList.vue?vue&type=template&id=b97504f8&\"\nimport script from \"./AddressList.vue?vue&type=script&lang=js&\"\nexport * from \"./AddressList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._l((_vm.entries),function(entry,idx){return [_c('Address',{key:entry.email,attrs:{\"email\":entry.email,\"label\":entry.label}}),(idx + 1 < _vm.entries.length)?_c('span',{key:entry.email},[_vm._v(\", \")]):_vm._e()]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport _ from 'lodash'\nimport moment from 'moment'\nimport {getLocale} from 'nextcloud-l10n'\n\nmoment.locale(getLocale())\n\nexport const buildReplyBody = (original, from, date) => {\n\tconst start = '\\n\\n'\n\tconst body = '\\n> ' + original.replace(/\\n/g, '\\n> ')\n\n\tif (from) {\n\t\tconst dateString = moment.unix(date).format('LLL')\n\t\treturn start + `\"${from.label}\" <${from.email}> – ${dateString}` + body\n\t} else {\n\t\treturn start + body\n\t}\n}\n\nconst RecipientType = Object.seal({\n\tNone: 0,\n\tTo: 1,\n\tCc: 2,\n})\n\nexport const buildRecipients = (envelope, ownAddress) => {\n\tlet recipientType = RecipientType.None\n\tconst isOwnAddress = a => a.email === ownAddress.email\n\tconst isNotOwnAddress = _.negate(isOwnAddress)\n\n\t// Locate why we received this envelope\n\t// Can be in 'to', 'cc' or unknown\n\tlet replyingAddress = envelope.to.find(isOwnAddress)\n\tif (!_.isUndefined(replyingAddress)) {\n\t\trecipientType = RecipientType.To\n\t} else {\n\t\treplyingAddress = envelope.cc.find(isOwnAddress)\n\t\tif (!_.isUndefined(replyingAddress)) {\n\t\t\trecipientType = RecipientType.Cc\n\t\t} else {\n\t\t\treplyingAddress = ownAddress\n\t\t}\n\t}\n\n\tlet to = []\n\tlet cc = []\n\tif (recipientType === RecipientType.To) {\n\t\t// Send to everyone except yourself plus the original sender\n\t\tto = envelope.to.filter(isNotOwnAddress)\n\t\tto = to.concat(envelope.from)\n\n\t\t// CC remains the same\n\t\tcc = envelope.cc\n\t} else if (recipientType === RecipientType.Cc) {\n\t\t// Send to the same people plus the sender\n\t\tto = envelope.to.concat(envelope.from)\n\n\t\t// All CC values are being kept except the replying address\n\t\tcc = envelope.cc.filter(isNotOwnAddress)\n\t} else {\n\t\t// Send to the same recipient and the sender -> answer all\n\t\tto = envelope.to\n\t\tto = to.concat(envelope.from)\n\n\t\t// Keep CC values\n\t\tcc = envelope.cc\n\t}\n\n\treturn {\n\t\tto,\n\t\tfrom: replyingAddress ? [replyingAddress] : [],\n\t\tcc,\n\t}\n}\n\n// TODO: https://en.wikipedia.org/wiki/List_of_email_subject_abbreviations#Abbreviations_in_other_languages\nconst replyPrepends = ['re']\n\n/*\n * Ref https://tools.ietf.org/html/rfc5322#section-3.6.5\n */\nexport const buildReplySubject = original => {\n\tif (replyPrepends.some(prepend => original.toLowerCase().startsWith(`${prepend}:`))) {\n\t\treturn original\n\t}\n\n\treturn `RE: ${original}`\n}\n\n// TODO: https://en.wikipedia.org/wiki/List_of_email_subject_abbreviations#Abbreviations_in_other_languages\nconst forwardPrepends = ['fwd']\n\nexport const buildFowardSubject = original => {\n\tif (forwardPrepends.some(prepend => original.toLowerCase().startsWith(`${prepend}:`))) {\n\t\treturn original\n\t}\n\n\treturn `FWD: ${original}`\n}\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from 'nextcloud-axios'\nimport {generateUrl} from 'nextcloud-router'\n\nexport function saveAttachmentToFiles(accountId, folderId, messageId, attachmentId, directory) {\n\tconst url = generateUrl(\n\t\t'apps/mail/api/accounts/{accountId}/folders/{folderId}/messages/{messageId}/attachment/{attachmentId}',\n\t\t{\n\t\t\taccountId,\n\t\t\tfolderId,\n\t\t\tmessageId,\n\t\t\tattachmentId,\n\t\t}\n\t)\n\n\treturn Axios.post(url, {\n\t\ttargetPath: directory,\n\t})\n}\n\nexport function saveAttachmentsToFiles(accountId, folderId, messageId, directory) {\n\treturn saveAttachmentToFiles(accountId, folderId, messageId, 0, directory)\n}\n\nexport function downloadAttachment(url) {\n\treturn Axios.get(url).then(res => res.data)\n}\n\nexport const uploadLocalAttachment = (file, progress) => {\n\tconst url = generateUrl('/apps/mail/api/attachments')\n\tconst data = new FormData()\n\tconst opts = {\n\t\tonUploadProgress: prog => progress(prog, prog.loaded, prog.total),\n\t}\n\tdata.append('attachment', file)\n\n\treturn Axios.post(url, data, opts)\n\t\t.then(resp => resp.data)\n\t\t.then(({id}) => {\n\t\t\treturn {\n\t\t\t\tfile,\n\t\t\t\tid,\n\t\t\t}\n\t\t})\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"new-message-attachments\">\n\t\t<ul>\n\t\t\t<li v-for=\"attachment in value\" :key=\"attachment.id\">\n\t\t\t\t<div class=\"new-message-attachment-name\">\n\t\t\t\t\t{{ attachment.displayName }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"new-message-attachments-action svg icon-delete\" @click=\"onDelete(attachment)\"></div>\n\t\t\t</li>\n\t\t</ul>\n\t\t<button class=\"button\" :disabled=\"uploading\" @click=\"onAddLocalAttachment\">\n\t\t\t<span :class=\"{'icon-upload': !uploading, 'icon-loading-small': uploading}\"></span>\n\t\t\t{{\n\t\t\t\tuploading\n\t\t\t\t\t? t('mail', 'Uploading {percent}% …', {percent: uploadProgress})\n\t\t\t\t\t: t('mail', 'Upload attachment')\n\t\t\t}}\n\t\t</button>\n\t\t<button class=\"button\" @click=\"onAddCloudAttachment\">\n\t\t\t<span class=\"icon-folder\" />\n\t\t\t{{ t('mail', 'Add attachment from Files') }}\n\t\t</button>\n\t\t<input ref=\"localAttachments\" type=\"file\" multiple style=\"display: none;\" @change=\"onLocalAttachmentSelected\" />\n\t</div>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport {translate as t} from 'nextcloud-l10n'\nimport {getFilePickerBuilder} from 'nextcloud-dialogs'\nimport Vue from 'vue'\n\nimport Logger from '../logger'\nimport {uploadLocalAttachment} from '../service/AttachmentService'\n\nexport default {\n\tname: 'ComposerAttachments',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuploading: false,\n\t\t\tuploads: {},\n\t\t}\n\t},\n\tcomputed: {\n\t\tuploadProgress() {\n\t\t\tlet uploaded = 0\n\t\t\tlet total = 0\n\t\t\tfor (let id in this.uploads) {\n\t\t\t\tuploaded += this.uploads[id].uploaded\n\t\t\t\ttotal += this.uploads[id].total\n\t\t\t}\n\t\t\treturn ((uploaded / total) * 100).toFixed(1)\n\t\t},\n\t},\n\tmethods: {\n\t\tonAddLocalAttachment() {\n\t\t\tthis.$refs.localAttachments.click()\n\t\t},\n\t\tfileNameToAttachment(name, id) {\n\t\t\treturn {\n\t\t\t\tfileName: name,\n\t\t\t\tdisplayName: _.trimStart(name, '/'),\n\t\t\t\tid,\n\t\t\t\tisLocal: !_.isUndefined(id),\n\t\t\t}\n\t\t},\n\t\temitNewAttachment(attachment) {\n\t\t\tthis.$emit('input', this.value.concat([attachment]))\n\t\t},\n\t\tonLocalAttachmentSelected(e) {\n\t\t\tthis.uploading = true\n\n\t\t\tVue.set(this, 'uploads', {})\n\n\t\t\tconst progress = id => (prog, uploaded) => {\n\t\t\t\tthis.uploads[id].uploaded = uploaded\n\t\t\t}\n\n\t\t\tconst promises = _.map(e.target.files, file => {\n\t\t\t\tVue.set(this.uploads, file.name, {\n\t\t\t\t\ttotal: file.size,\n\t\t\t\t\tuploaded: 0,\n\t\t\t\t})\n\n\t\t\t\treturn uploadLocalAttachment(file, progress(file.name)).then(({file, id}) => {\n\t\t\t\t\tLogger.info('uploaded')\n\t\t\t\t\treturn this.emitNewAttachment(this.fileNameToAttachment(file.name, id))\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tconst done = Promise.all(promises)\n\t\t\t\t.catch(error => Logger.error('could not upload all attachments', {error}))\n\t\t\t\t.then(() => (this.uploading = false))\n\n\t\t\tthis.$emit('upload', done)\n\n\t\t\treturn done\n\t\t},\n\t\tonAddCloudAttachment() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to add as attachment')).build()\n\n\t\t\treturn picker\n\t\t\t\t.pick(t('mail', 'Choose a file to add as attachment'))\n\t\t\t\t.then(path => this.emitNewAttachment(this.fileNameToAttachment(path)))\n\t\t\t\t.catch(error => Logger.error('could not choose a file as attachment', {error}))\n\t\t},\n\t\tonDelete(attachment) {\n\t\t\tthis.$emit('input', this.value.filter(a => a !== attachment))\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\nbutton {\n\t/* TODO: remove for Nextcloud 15+ */\n\t/* https://github.com/nextcloud/server/pull/12138 */\n\tdisplay: inline-block;\n}\n\n.new-message-attachments li {\n\tpadding: 10px;\n}\n\n.new-message-attachments-action {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 22px;\n\topacity: 0.5;\n}\n\n/* attachment filenames */\n.new-message-attachment-name {\n\tdisplay: inline-block;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n</style>\n","import { render, staticRenderFns } from \"./ComposerAttachments.vue?vue&type=template&id=40de8a78&scoped=true&\"\nimport script from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComposerAttachments.vue?vue&type=style&index=0&id=40de8a78&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40de8a78\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"new-message-attachments\"},[_c('ul',_vm._l((_vm.value),function(attachment){return _c('li',{key:attachment.id},[_c('div',{staticClass:\"new-message-attachment-name\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(attachment.displayName)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"new-message-attachments-action svg icon-delete\",on:{\"click\":function($event){return _vm.onDelete(attachment)}}})])}),0),_vm._v(\" \"),_c('button',{staticClass:\"button\",attrs:{\"disabled\":_vm.uploading},on:{\"click\":_vm.onAddLocalAttachment}},[_c('span',{class:{'icon-upload': !_vm.uploading, 'icon-loading-small': _vm.uploading}}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.uploading\n\t\t\t\t? _vm.t('mail', 'Uploading {percent}% …', {percent: _vm.uploadProgress})\n\t\t\t\t: _vm.t('mail', 'Upload attachment'))+\"\\n\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":_vm.onAddCloudAttachment}},[_c('span',{staticClass:\"icon-folder\"}),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Add attachment from Files'))+\"\\n\\t\")]),_vm._v(\" \"),_c('input',{ref:\"localAttachments\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.onLocalAttachmentSelected}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"state === STATES.EDITING\" class=\"message-composer\">\n\t\t<div class=\"composer-fields mail-account\">\n\t\t\t<label class=\"to-label transparency\" for=\"from\">\n\t\t\t\t{{ t('mail', 'from') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"from\"\n\t\t\t\tv-model=\"selectedAlias\"\n\t\t\t\t:options=\"aliases\"\n\t\t\t\tlabel=\"name\"\n\t\t\t\ttrack-by=\"id\"\n\t\t\t\t:custom-label=\"formatAliases\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t/>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label class=\"to-label transparency\" for=\"to\">\n\t\t\t\t{{ t('mail', 'to') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"to\"\n\t\t\t\tv-model=\"selectTo\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewToAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\"\n\t\t\t/>\n\t\t\t<a v-if=\"!showCC\" href=\"#\" @click.prevent=\"showCC = true\">\n\t\t\t\t{{ t('mail', '+ cc/bcc') }}\n\t\t\t</a>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"cc\" class=\"cc-label transparency\">\n\t\t\t\t{{ t('mail', 'cc') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"cc\"\n\t\t\t\tv-model=\"selectCc\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewCcAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\"\n\t\t\t/>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"bcc\" class=\"bcc-label transparency\">\n\t\t\t\t{{ t('mail', 'bcc') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"bcc\"\n\t\t\t\tv-model=\"selectBcc\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewBccAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\"\n\t\t\t/>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label for=\"subject\" class=\"subject-label transparency\">\n\t\t\t\t{{ t('mail', 'Subject') }}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"subject\"\n\t\t\t\tv-model=\"subjectVal\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"subject\"\n\t\t\t\tclass=\"subject\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\t:placeholder=\"t('mail', 'Subject')\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t/>\n\t\t</div>\n\t\t<div v-if=\"noSubject\" class=\"warning\">\n\t\t\t{{ t('mail', 'This mail does not have a subject yet.') }}\n\t\t</div>\n\t\t<div v-if=\"noReply\" class=\"warning noreply-box\">\n\t\t\t{{ t('mail', 'Note that the mail came from a noreply address so\tyour reply will probably not be read.') }}\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<textarea\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\tv-autosize\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Message …')\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@keypress=\"onBodyKeyPress\"\n\t\t\t></textarea>\n\t\t</div>\n\t\t<div class=\"submit-message-wrapper\">\n\t\t\t<input class=\"submit-message send primary\" type=\"submit\" :value=\"submitButtonTitle\" @click=\"onSend\" />\n\t\t</div>\n\t\t<ComposerAttachments v-model=\"attachments\" @upload=\"onAttachmentsUploading\" />\n\t\t<span v-if=\"savingDraft === true\" id=\"draft-status\">{{ t('mail', 'Saving draft …') }}</span>\n\t\t<span v-else-if=\"savingDraft === false\" id=\"draft-status\">{{ t('mail', 'Draft saved') }}</span>\n\t</div>\n\t<Loading v-else-if=\"state === STATES.UPLOADING\" :hint=\"t('mail', 'Uploading attachments …')\" />\n\t<Loading v-else-if=\"state === STATES.SENDING\" :hint=\"t('mail', 'Sending …')\" />\n\t<div v-else-if=\"state === STATES.ERROR\" class=\"emptycontent\">\n\t\t<h2>{{ t('mail', 'Error sending your message') }}</h2>\n\t\t<p v-if=\"errorText\">{{ errorText }}</p>\n\t\t<button class=\"button\" @click=\"state = STATES.EDITING\">{{ t('mail', 'Go back') }}</button>\n\t\t<button class=\"button primary\" @click=\"onSend\">{{ t('mail', 'Retry') }}</button>\n\t</div>\n\t<div v-else class=\"emptycontent\">\n\t\t<h2 v-if=\"!isReply\">{{ t('mail', 'Message sent!') }}</h2>\n\t\t<h2 v-else>{{ t('mail', 'Reply sent!') }}</h2>\n\t\t<button v-if=\"!isReply\" class=\"button primary\" @click=\"reset\">\n\t\t\t{{ t('mail', 'Write another message') }}\n\t\t</button>\n\t</div>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport Autosize from 'vue-autosize'\nimport debouncePromise from 'debounce-promise'\nimport Multiselect from 'nextcloud-vue/dist/Components/Multiselect'\nimport Vue from 'vue'\n\nimport {findRecipient} from '../service/AutocompleteService'\nimport Loading from './Loading'\nimport Logger from '../logger'\nimport ComposerAttachments from './ComposerAttachments'\n\nconst debouncedSearch = debouncePromise(findRecipient, 500)\n\nVue.use(Autosize)\n\nconst STATES = Object.seal({\n\tEDITING: 0,\n\tUPLOADING: 1,\n\tSENDING: 2,\n\tERROR: 3,\n\tFINISHED: 4,\n})\n\nexport default {\n\tname: 'Composer',\n\tcomponents: {\n\t\tComposerAttachments,\n\t\tLoading,\n\t\tMultiselect,\n\t},\n\tprops: {\n\t\treplyTo: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tfromAccount: {\n\t\t\ttype: Number,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tto: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tbcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsubject: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdraft: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tsend: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowCC: this.cc.length > 0,\n\t\t\tselectedAlias: -1, // Fixed in `beforeMount`\n\t\t\tautocompleteRecipients: this.to.concat(this.cc).concat(this.bcc),\n\t\t\tnewRecipients: [],\n\t\t\tsubjectVal: this.subject,\n\t\t\tbodyVal: this.body,\n\t\t\tattachments: [],\n\t\t\tnoReply: this.to.some(to => to.email.startsWith('noreply@') || to.email.startsWith('no-reply@')),\n\t\t\tsubmitButtonTitle: t('mail', 'Send'),\n\t\t\tdraftsPromise: Promise.resolve(),\n\t\t\tattachmentsPromise: Promise.resolve(),\n\t\t\tsavingDraft: undefined,\n\t\t\tsaveDraftDebounced: _.debounce(this.saveDraft, 700),\n\t\t\tstate: STATES.EDITING,\n\t\t\terrorText: undefined,\n\t\t\tSTATES,\n\t\t\tselectTo: this.to,\n\t\t\tselectCc: this.cc,\n\t\t\tselectBcc: this.bcc,\n\t\t}\n\t},\n\tcomputed: {\n\t\taliases() {\n\t\t\treturn this.$store.getters.getAccounts().filter(a => !a.isUnified)\n\t\t},\n\t\tselectableRecipients() {\n\t\t\treturn this.newRecipients.concat(this.autocompleteRecipients)\n\t\t},\n\t\tisReply() {\n\t\t\treturn !_.isUndefined(this.replyTo)\n\t\t},\n\t\tnoSubject() {\n\t\t\treturn this.subjectVal === '' && this.bodyVal !== ''\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tif (this.fromAccount) {\n\t\t\tthis.selectedAlias = this.aliases.find(alias => alias.id === this.fromAccount)\n\t\t} else {\n\t\t\tthis.selectedAlias = this.aliases[0]\n\t\t}\n\t\tthis.bodyVal = this.bodyWithSignature(this.selectedAlias, this.body)\n\t},\n\tmethods: {\n\t\trecipientToRfc822(recipient) {\n\t\t\tif (recipient.email === recipient.label) {\n\t\t\t\t// From mailto or sender without proper label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.label === '') {\n\t\t\t\t// Invalid label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.email.search(/^[a-zA-Z]+:[a-zA-Z]+$/) === 0) {\n\t\t\t\t// Group integration\n\t\t\t\treturn recipient.email\n\t\t\t} else {\n\t\t\t\t// Proper layout with label\n\t\t\t\treturn `\"${recipient.label}\" <${recipient.email}>`\n\t\t\t}\n\t\t},\n\t\tgetMessageData() {\n\t\t\treturn uid => {\n\t\t\t\treturn {\n\t\t\t\t\taccount: this.selectedAlias.id,\n\t\t\t\t\tto: this.selectTo.map(this.recipientToRfc822).join(', '),\n\t\t\t\t\tcc: this.selectCc.map(this.recipientToRfc822).join(', '),\n\t\t\t\t\tbcc: this.selectBcc.map(this.recipientToRfc822).join(', '),\n\t\t\t\t\tdraftUID: uid,\n\t\t\t\t\tsubject: this.subjectVal,\n\t\t\t\t\tbody: this.bodyVal,\n\t\t\t\t\tattachments: this.attachments,\n\t\t\t\t\tfolderId: this.replyTo ? this.replyTo.folderId : undefined,\n\t\t\t\t\tmessageId: this.replyTo ? this.replyTo.messageId : undefined,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsaveDraft(data) {\n\t\t\tthis.savingDraft = true\n\t\t\tthis.draftsPromise = this.draftsPromise\n\t\t\t\t.then(uid => this.draft(data(uid)))\n\t\t\t\t.catch(Logger.error)\n\t\t\t\t.then(uid => {\n\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t},\n\t\tonInputChanged() {\n\t\t\tthis.saveDraftDebounced(this.getMessageData())\n\t\t},\n\t\tonAutocomplete(term) {\n\t\t\tif (_.isUndefined(term) || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdebouncedSearch(term).then(results => {\n\t\t\t\tthis.autocompleteRecipients = _.uniqBy(this.autocompleteRecipients.concat(results), 'email')\n\t\t\t})\n\t\t},\n\t\tonAttachmentsUploading(uploaded) {\n\t\t\tthis.attachmentsPromise = this.attachmentsPromise\n\t\t\t\t.then(() => uploaded)\n\t\t\t\t.catch(error => Logger.error('could not upload attachments', {error}))\n\t\t\t\t.then(() => Logger.debug('attachments uploaded'))\n\t\t},\n\t\tonBodyKeyPress(event) {\n\t\t\t// CTRL+Enter sends the message\n\t\t\tif (event.keyCode === 13 && event.ctrlKey) {\n\t\t\t\treturn this.onSend()\n\t\t\t}\n\t\t},\n\t\tonNewToAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectTo)\n\t\t},\n\t\tonNewCcAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectCc)\n\t\t},\n\t\tonNewBccAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectBcc)\n\t\t},\n\t\tonNewAddr(addr, list) {\n\t\t\tconst res = {\n\t\t\t\tlabel: addr, // TODO: parse if possible\n\t\t\t\temail: addr, // TODO: parse if possible\n\t\t\t}\n\t\t\tthis.newRecipients.push(res)\n\t\t\tlist.push(res)\n\t\t},\n\t\tonSend() {\n\t\t\tthis.state = STATES.UPLOADING\n\n\t\t\treturn this.attachmentsPromise\n\t\t\t\t.then(() => (this.state = STATES.SENDING))\n\t\t\t\t.then(() => this.draftsPromise)\n\t\t\t\t.then(this.getMessageData())\n\t\t\t\t.then(data => this.send(data))\n\t\t\t\t.then(() => Logger.info('message sent'))\n\t\t\t\t.then(() => (this.state = STATES.FINISHED))\n\t\t\t\t.catch(error => {\n\t\t\t\t\tLogger.error('could not send message', {error})\n\t\t\t\t\tif (error && error.toString) {\n\t\t\t\t\t\tthis.errorText = error.toString()\n\t\t\t\t\t}\n\t\t\t\t\tthis.state = STATES.ERROR\n\t\t\t\t})\n\t\t},\n\t\treset() {\n\t\t\tthis.selectTo = []\n\t\t\tthis.selectCc = []\n\t\t\tthis.selectBcc = []\n\t\t\tthis.subjectVal = ''\n\t\t\tthis.bodyVal = ''\n\t\t\tthis.attachments = []\n\t\t\tthis.errorText = undefined\n\t\t\tthis.state = STATES.EDITING\n\t\t},\n\t\t/**\n\t\t * Format aliases for the Multiselect\n\t\t * @returns {string}\n\t\t */\n\t\tformatAliases(alias) {\n\t\t\treturn `${alias.name} <${alias.emailAddress}>`\n\t\t},\n\t\tbodyWithSignature(alias, body) {\n\t\t\tif (!alias || !alias.signature) {\n\t\t\t\treturn body\n\t\t\t}\n\n\t\t\treturn body + '\\n\\n--\\n\\n' + alias.signature\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.message-composer {\n\tmargin: 0;\n\tmargin-bottom: 10px; /* line up with the send button */\n\tz-index: 100;\n}\n\n#reply-composer .message-composer {\n\tmargin: 0;\n}\n\n.composer-fields.mail-account > .multiselect {\n\tmax-width: none;\n\tmin-height: auto;\n\twidth: 350px;\n}\n\n.composer-fields {\n\tdisplay: flex;\n\talign-items: center;\n\tborder-top: 1px solid var(--color-border);\n\tpadding-right: 30px;\n}\n.composer-fields .multiselect,\n.composer-fields input,\n.composer-fields textarea {\n\tflex-grow: 1;\n\tmax-width: none;\n\tborder: none;\n\tborder-radius: 0px;\n}\n.noreply-box {\n\tmargin-top: 0;\n\tbackground: #fdffc3;\n\tpadding-left: 64px;\n}\n\n#to,\n#cc,\n#bcc,\ninput.subject,\ntextarea.message-body {\n\tpadding: 12px;\n\tmargin: 0;\n}\n\n#to {\n\tpadding-right: 60px; /* for cc-bcc-toggle */\n}\n\ninput.cc,\ninput.bcc,\ninput.subject,\ntextarea.message-body {\n\tborder-top: none;\n}\n\ninput.subject {\n\tfont-size: 20px;\n\tfont-weight: 300;\n}\n\ntextarea.message-body {\n\tmin-height: 300px;\n\tresize: none;\n\tpadding-right: 25%;\n}\n\n#draft-status {\n\tpadding: 5px;\n\topacity: 0.5;\n\tfont-size: small;\n}\n\nlabel.to-label,\nlabel.cc-label,\nlabel.bcc-label,\nlabel.subject-label {\n\tpadding: 12px;\n\tpadding-left: 30px;\n\tcursor: text;\n\topacity: 0.5;\n\twidth: 90px;\n\ttext-align: right;\n}\n\nlabel.bcc-label {\n\ttop: initial;\n\tbottom: 0;\n}\n\ntextarea.reply {\n\tmin-height: 100px;\n}\n\ninput.submit-message,\n.submit-message-wrapper {\n\tposition: fixed;\n\tbottom: 10px;\n\tright: 15px;\n}\n\n.submit-message-wrapper {\n\tposition: fixed;\n\theight: 36px;\n\twidth: 60px;\n}\n\n.submit-message.send {\n\tpadding: 12px;\n}\n</style>\n\n<style>\n.multiselect .multiselect__tags {\n\tborder: none !important;\n}\n</style>\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from 'nextcloud-axios'\nimport {generateUrl} from 'nextcloud-router'\n\nexport const findRecipient = term => {\n\tconst url = generateUrl('/apps/mail/api/autoComplete?term={term}', {\n\t\tterm,\n\t})\n\n\treturn Axios.get(url).then(resp => resp.data)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Composer.vue?vue&type=template&id=587be26b&scoped=true&\"\nimport script from \"./Composer.vue?vue&type=script&lang=js&\"\nexport * from \"./Composer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Composer.vue?vue&type=style&index=0&id=587be26b&scoped=true&lang=css&\"\nimport style1 from \"./Composer.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"587be26b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.state === _vm.STATES.EDITING)?_c('div',{staticClass:\"message-composer\"},[_c('div',{staticClass:\"composer-fields mail-account\"},[_c('label',{staticClass:\"to-label transparency\",attrs:{\"for\":\"from\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'from'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"from\",\"options\":_vm.aliases,\"label\":\"name\",\"track-by\":\"id\",\"custom-label\":_vm.formatAliases},on:{\"keyup\":_vm.onInputChanged},model:{value:(_vm.selectedAlias),callback:function ($$v) {_vm.selectedAlias=$$v},expression:\"selectedAlias\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"to-label transparency\",attrs:{\"for\":\"to\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'to'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"to\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewToAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectTo),callback:function ($$v) {_vm.selectTo=$$v},expression:\"selectTo\"}}),_vm._v(\" \"),(!_vm.showCC)?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.showCC = true}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', '+ cc/bcc'))+\"\\n\\t\\t\")]):_vm._e()],1),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"cc-label transparency\",attrs:{\"for\":\"cc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'cc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"cc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewCcAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectCc),callback:function ($$v) {_vm.selectCc=$$v},expression:\"selectCc\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"bcc-label transparency\",attrs:{\"for\":\"bcc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'bcc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"bcc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewBccAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectBcc),callback:function ($$v) {_vm.selectBcc=$$v},expression:\"selectBcc\"}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"subject-label transparency\",attrs:{\"for\":\"subject\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Subject'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.subjectVal),expression:\"subjectVal\"}],staticClass:\"subject\",attrs:{\"id\":\"subject\",\"type\":\"text\",\"name\":\"subject\",\"autocomplete\":\"off\",\"placeholder\":_vm.t('mail', 'Subject')},domProps:{\"value\":(_vm.subjectVal)},on:{\"keyup\":_vm.onInputChanged,\"input\":function($event){if($event.target.composing){ return; }_vm.subjectVal=$event.target.value}}})]),_vm._v(\" \"),(_vm.noSubject)?_c('div',{staticClass:\"warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'This mail does not have a subject yet.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.noReply)?_c('div',{staticClass:\"warning noreply-box\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Note that the mail came from a noreply address so\tyour reply will probably not be read.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.bodyVal),expression:\"bodyVal\"},{name:\"autosize\",rawName:\"v-autosize\"}],staticClass:\"message-body\",attrs:{\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Message …')},domProps:{\"value\":(_vm.bodyVal)},on:{\"keyup\":_vm.onInputChanged,\"keypress\":_vm.onBodyKeyPress,\"input\":function($event){if($event.target.composing){ return; }_vm.bodyVal=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"submit-message-wrapper\"},[_c('input',{staticClass:\"submit-message send primary\",attrs:{\"type\":\"submit\"},domProps:{\"value\":_vm.submitButtonTitle},on:{\"click\":_vm.onSend}})]),_vm._v(\" \"),_c('ComposerAttachments',{on:{\"upload\":_vm.onAttachmentsUploading},model:{value:(_vm.attachments),callback:function ($$v) {_vm.attachments=$$v},expression:\"attachments\"}}),_vm._v(\" \"),(_vm.savingDraft === true)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Saving draft …')))]):(_vm.savingDraft === false)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Draft saved')))]):_vm._e()],1):(_vm.state === _vm.STATES.UPLOADING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Uploading attachments …')}}):(_vm.state === _vm.STATES.SENDING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Sending …')}}):(_vm.state === _vm.STATES.ERROR)?_c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Error sending your message')))]),_vm._v(\" \"),(_vm.errorText)?_c('p',[_vm._v(_vm._s(_vm.errorText))]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":function($event){_vm.state = _vm.STATES.EDITING}}},[_vm._v(_vm._s(_vm.t('mail', 'Go back')))]),_vm._v(\" \"),_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.onSend}},[_vm._v(_vm._s(_vm.t('mail', 'Retry')))])]):_c('div',{staticClass:\"emptycontent\"},[(!_vm.isReply)?_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Message sent!')))]):_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Reply sent!')))]),_vm._v(\" \"),(!_vm.isReply)?_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.reset}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Write another message'))+\"\\n\\t\")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport IssueTemplateBuilder from 'nextcloud_issuetemplate_builder'\n\nconst flattenError = error => {\n\tlet text = ''\n\tif (error.type) {\n\t\ttext += error.type + ': '\n\t}\n\ttext += error.message\n\ttext += '\\n'\n\tif (error.trace) {\n\t\ttext += flattenTrace(error.trace)\n\t}\n\tif (error.stack) {\n\t\ttext += error.stack\n\t}\n\treturn text\n}\n\nconst flattenTrace = trace => {\n\treturn trace.reduce(function(acc, entry) {\n\t\tvar text = ''\n\t\tif (entry.class) {\n\t\t\ttext += '  at ' + entry.class + '::' + entry.function\n\t\t} else {\n\t\t\ttext += '  at ' + entry.function\n\t\t}\n\t\tif (entry.file) {\n\t\t\ttext += '\\n     ' + entry.file + ', line ' + entry.line\n\t\t}\n\t\treturn acc + text + '\\n'\n\t}, '')\n}\n\nexport const getReportUrl = error => {\n\tconsole.error(error)\n\tvar message = error.message || 'An unkown error occurred.'\n\tif (!message.endsWith('.')) {\n\t\tmessage += '.'\n\t}\n\tvar builder = new IssueTemplateBuilder()\n\tvar template = builder\n\t\t.addEmptyStepsToReproduce()\n\t\t.addExpectedActualBehaviour()\n\t\t.addLogs('Error', flattenError(error))\n\t\t.render()\n\n\treturn (\n\t\t'https://github.com/nextcloud/mail/issues/new' +\n\t\t'?title=' +\n\t\tencodeURIComponent(message) +\n\t\t'&body=' +\n\t\tencodeURIComponent(template)\n\t)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"emptycontent\">\n\t\t<h2>{{ error }}</h2>\n\t\t<p>{{ message }}</p>\n\t\t<p v-if=\"data && data.debug\">\n\t\t\t<a class=\"button\" :href=\"reportUrl\" target=\"_blank\" rel=\"noopener\">{{ t('mail', 'Report this bug') }}</a>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport {getReportUrl} from '../util/CrashReport'\n\nexport default {\n\tname: 'Error',\n\tprops: {\n\t\terror: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tcomputed: {\n\t\treportUrl() {\n\t\t\treturn getReportUrl(this.data)\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Error.vue?vue&type=template&id=255d6e54&\"\nimport script from \"./Error.vue?vue&type=script&lang=js&\"\nexport * from \"./Error.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.error))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.message))]),_vm._v(\" \"),(_vm.data && _vm.data.debug)?_c('p',[_c('a',{staticClass:\"button\",attrs:{\"href\":_vm.reportUrl,\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(_vm._s(_vm.t('mail', 'Report this bug')))])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport {translate as t} from 'nextcloud-l10n'\n\nconst smileys = [':-(', ':-/', ':-\\\\', ':-|', \":'-(\", \":'-/\", \":'-\\\\\", \":'-|\"]\n\nconst getRandomSmiley = () => {\n\treturn smileys[Math.floor(Math.random() * smileys.length)]\n}\n\n/**\n * @param {Folder} folder\n * @returns {string}\n */\nexport const getRandomFolderErrorMessage = folder => {\n\tconst folderName = folder.get('name')\n\tconst rawTexts = [\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'There was a problem loading {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t]\n\tconst texts = rawTexts.map(text => text.replace('{tag}', '<strong>').replace('{endtag}', '</strong>'))\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n\n/**\n * @returns {string}\n */\nexport const getRandomMessageErrorMessage = () => {\n\tconst texts = [\n\t\tt('mail', 'Could not load your message'),\n\t\tt('mail', 'Could not load the desired message'),\n\t\tt('mail', 'Could not load the message'),\n\t]\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n","<template>\n\t<div id=\"mail-content\">\n\t\t<div v-if=\"hasBlockedContent\" id=\"mail-message-has-blocked-content\">\n\t\t\t{{ t('mail', 'The images have been blocked to protect your privacy.') }}\n\t\t\t<button @click=\"onShowBlockedContent\">\n\t\t\t\t{{ t('mail', 'Show images from this\tsender') }}\n\t\t\t</button>\n\t\t</div>\n\t\t<div v-if=\"loading\" class=\"icon-loading\" />\n\t\t<div id=\"message-container\" :class=\"{hidden: loading}\">\n\t\t\t<iframe id=\"message-frame\" ref=\"iframe\" :src=\"url\" seamless @load=\"onMessageFrameLoad\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport PrintScout from 'printscout'\nconst scout = new PrintScout()\n\nexport default {\n\tname: 'MessageHTMLBody',\n\tprops: {\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\thasBlockedContent: false,\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tscout.on('beforeprint', this.onBeforePrint)\n\t\tscout.on('afterprint', this.onAfterPrint)\n\t},\n\tbeforeDestroy() {\n\t\tscout.off('beforeprint', this.onBeforePrint)\n\t\tscout.off('afterprint', this.onAfterPrint)\n\t},\n\tmethods: {\n\t\tgetIframeDoc() {\n\t\t\tconst iframe = this.$refs.iframe\n\t\t\treturn iframe.contentDocument || iframe.contentWindow.document\n\t\t},\n\t\tonMessageFrameLoad() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tconst iframeBody = iframeDoc.querySelectorAll('body')[0]\n\t\t\tthis.hasBlockedContent =\n\t\t\t\tiframeDoc.querySelectorAll('[data-original-src]').length > 0 ||\n\t\t\t\tiframeDoc.querySelectorAll('[data-original-style]').length > 0\n\n\t\t\tthis.$emit('loaded', iframeBody.outerHTML)\n\t\t\tthis.loading = false\n\t\t},\n\t\tonAfterPrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', '')\n\t\t},\n\t\tonBeforePrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', `${this.getIframeDoc().body.scrollHeight}px`, 'important')\n\t\t},\n\t\tonShowBlockedContent() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('[data-original-src]')\n\t\t\t\t.forEach(node => node.setAttribute('src', node.getAttribute('data-original-src')))\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('[data-original-style]')\n\t\t\t\t.forEach(node => node.setAttribute('style', node.getAttribute('data-original-style')))\n\n\t\t\tthis.hasBlockedContent = false\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#message-container {\n\tposition: relative;\n\twidth: 100%;\n\theight: 0;\n\tpadding-bottom: 56.25%;\n}\n\n#message-frame {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageHTMLBody.vue?vue&type=template&id=3070be90&scoped=true&\"\nimport script from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageHTMLBody.vue?vue&type=style&index=0&id=3070be90&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3070be90\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mail-content\"}},[(_vm.hasBlockedContent)?_c('div',{attrs:{\"id\":\"mail-message-has-blocked-content\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The images have been blocked to protect your privacy.'))+\"\\n\\t\\t\"),_c('button',{on:{\"click\":_vm.onShowBlockedContent}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Show images from this\tsender'))+\"\\n\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.loading)?_c('div',{staticClass:\"icon-loading\"}):_vm._e(),_vm._v(\" \"),_c('div',{class:{hidden: _vm.loading},attrs:{\"id\":\"message-container\"}},[_c('iframe',{ref:\"iframe\",attrs:{\"id\":\"message-frame\",\"src\":_vm.url,\"seamless\":\"\"},on:{\"load\":_vm.onMessageFrameLoad}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"","<template>\n\t<div>\n\t\t<div id=\"mail-content\" v-html=\"body\"></div>\n\t\t<div v-if=\"signature\" class=\"mail-signature\" v-html=\"signature\"></div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'MessagePlainTextBody',\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsignature: {\n\t\t\ttype: String,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.mail-signature {\n\tfont-family: monospace;\n\topacity: 0.5;\n\tline-height: initial;\n}\n</style>\n","import { render, staticRenderFns } from \"./MessagePlainTextBody.vue?vue&type=template&id=56bdb136&scoped=true&\"\nimport script from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessagePlainTextBody.vue?vue&type=style&index=0&id=56bdb136&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56bdb136\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"mail-content\"},domProps:{\"innerHTML\":_vm._s(_vm.body)}}),_vm._v(\" \"),(_vm.signature)?_c('div',{staticClass:\"mail-signature\",domProps:{\"innerHTML\":_vm._s(_vm.signature)}}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* global $ */\n\n/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport dav from 'davclient.js'\nimport ical from 'ical.js'\nimport {getCurrentUser, getRequestToken} from 'nextcloud-auth'\nimport {generateRemoteUrl} from 'nextcloud-router'\n\nimport Logger from '../logger'\n\nconst client = new dav.Client({\n\tbaseUrl: generateRemoteUrl('dav/calendars'),\n\txmlNamespaces: {\n\t\t'DAV:': 'd',\n\t\t'urn:ietf:params:xml:ns:caldav': 'c',\n\t\t'http://apple.com/ns/ical/': 'aapl',\n\t\t'http://owncloud.org/ns': 'oc',\n\t\t'http://calendarserver.org/ns/': 'cs',\n\t},\n})\nconst props = [\n\t'{DAV:}displayname',\n\t'{urn:ietf:params:xml:ns:caldav}calendar-description',\n\t'{urn:ietf:params:xml:ns:caldav}calendar-timezone',\n\t'{http://apple.com/ns/ical/}calendar-order',\n\t'{http://apple.com/ns/ical/}calendar-color',\n\t'{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set',\n\t'{http://owncloud.org/ns}calendar-enabled',\n\t'{DAV:}acl',\n\t'{DAV:}owner',\n\t'{http://owncloud.org/ns}invite',\n]\n\nconst getResponseCodeFromHTTPResponse = t => {\n\treturn parseInt(t.split(' ')[1])\n}\n\nconst getACLFromResponse = properties => {\n\tlet canWrite = false\n\tlet acl = properties['{DAV:}acl']\n\tif (acl) {\n\t\tfor (var k = 0; k < acl.length; k++) {\n\t\t\tvar href = acl[k].getElementsByTagNameNS('DAV:', 'href')\n\t\t\tif (href.length === 0) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\thref = href[0].textContent\n\t\t\tvar writeNode = acl[k].getElementsByTagNameNS('DAV:', 'write')\n\t\t\tif (writeNode.length > 0) {\n\t\t\t\tcanWrite = true\n\t\t\t}\n\t\t}\n\t}\n\tproperties.canWrite = canWrite\n}\n\nconst getCalendarData = properties => {\n\tgetACLFromResponse(properties)\n\n\tconst data = {\n\t\tdisplayname: properties['{DAV:}displayname'],\n\t\tcolor: properties['{http://apple.com/ns/ical/}calendar-color'],\n\t\torder: properties['{http://apple.com/ns/ical/}calendar-order'],\n\t\tcomponents: {\n\t\t\tvevent: false,\n\t\t},\n\t\twritable: properties.canWrite,\n\t}\n\n\tconst components = properties['{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set'] || []\n\tfor (let i = 0; i < components.length; i++) {\n\t\tvar name = components[i].attributes.getNamedItem('name').textContent.toLowerCase()\n\t\tif (data.components.hasOwnProperty(name)) {\n\t\t\tdata.components[name] = true\n\t\t}\n\t}\n\n\treturn data\n}\n\n/**\n * @returns {Promise}\n */\nexport const getUserCalendars = () => {\n\tvar url = generateRemoteUrl('dav/calendars') + '/' + getCurrentUser().uid + '/'\n\n\treturn getRequestToken()\n\t\t.then(token =>\n\t\t\tclient.propFind(url, props, 1, {\n\t\t\t\trequesttoken: token,\n\t\t\t})\n\t\t)\n\t\t.then(data => {\n\t\t\tconst calendars = []\n\n\t\t\tdata.body.forEach(cal => {\n\t\t\t\tif (cal.propStat.length < 1) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (getResponseCodeFromHTTPResponse(cal.propStat[0].status) === 200) {\n\t\t\t\t\tconst properties = getCalendarData(cal.propStat[0].properties)\n\t\t\t\t\tif (properties && properties.components.vevent && properties.writable === true) {\n\t\t\t\t\t\tproperties.url = cal.href\n\t\t\t\t\t\tcalendars.push(properties)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn calendars\n\t\t})\n}\n\nconst getRandomString = () => {\n\tlet str = ''\n\tfor (let i = 0; i < 7; i++) {\n\t\tstr += Math.random()\n\t\t\t.toString(36)\n\t\t\t.substring(7)\n\t}\n\treturn str\n}\n\nconst createICalElement = () => {\n\tconst root = new ical.Component(['vcalendar', [], []])\n\n\troot.updatePropertyWithValue('prodid', '-//' + OC.theme.name + ' Mail')\n\n\treturn root\n}\n\nconst splitCalendar = data => {\n\tconst timezones = []\n\tconst allObjects = {}\n\tconst jCal = ical.parse(data)\n\tconst components = new ical.Component(jCal)\n\n\tconst vtimezones = components.getAllSubcomponents('vtimezone')\n\tvtimezones.forEach(vtimezone => timezones.push(vtimezone))\n\n\tconst componentNames = ['vevent', 'vjournal', 'vtodo']\n\tcomponentNames.forEach(componentName => {\n\t\tconst vobjects = components.getAllSubcomponents(componentName)\n\t\tallObjects[componentName] = {}\n\n\t\tvobjects.forEach(vobject => {\n\t\t\tvar uid = vobject.getFirstPropertyValue('uid')\n\t\t\tallObjects[componentName][uid] = allObjects[componentName][uid] || []\n\t\t\tallObjects[componentName][uid].push(vobject)\n\t\t})\n\t})\n\n\tconst split = []\n\tcomponentNames.forEach(componentName => {\n\t\tsplit[componentName] = []\n\t\tfor (let objectsId in allObjects[componentName]) {\n\t\t\tconst objects = allObjects[componentName][objectsId]\n\t\t\tconst component = createICalElement()\n\t\t\ttimezones.forEach(component.addSubcomponent)\n\t\t\tfor (let objectId in objects) {\n\t\t\t\tcomponent.addSubcomponent(objects[objectId])\n\t\t\t}\n\t\t\tsplit[componentName].push(component.toString())\n\t\t}\n\t})\n\n\treturn {\n\t\tname: components.getFirstPropertyValue('x-wr-calname'),\n\t\tcolor: components.getFirstPropertyValue('x-apple-calendar-color'),\n\t\tsplit,\n\t}\n}\n\n/**\n * @param {String} url\n * @param {Object} data\n * @returns {Promise}\n */\nexport const importCalendarEvent = url => data => {\n\tLogger.debug('importing event into calendar', {\n\t\turl,\n\t\tdata,\n\t})\n\tconst promises = []\n\n\tconst file = splitCalendar(data)\n\tconst components = ['vevent', 'vjournal', 'vtodo']\n\tcomponents.forEach(componentName => {\n\t\tfor (let componentId in file.split[componentName]) {\n\t\t\tconst component = file.split[componentName][componentId]\n\t\t\tpromises.push(\n\t\t\t\tPromise.resolve(\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: url + getRandomString(),\n\t\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\t\tcontentType: 'text/calendar; charset=utf-8',\n\t\t\t\t\t\tdata: component,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t})\n\n\treturn Promise.all(promises)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"attachment\" @click=\"download\">\n\t\t<img v-if=\"isImage\" class=\"mail-attached-image\" :src=\"url\" />\n\t\t<img class=\"attachment-icon\" :src=\"mimeUrl\" />\n\t\t<span class=\"attachment-name\" :title=\"label\"\n\t\t\t>{{ fileName }}\n\t\t\t<span class=\"attachment-size\">({{ humanReadable(size) }})</span>\n\t\t</span>\n\t\t<button\n\t\t\tv-if=\"isCalendarEvent\"\n\t\t\tclass=\"button attachment-import calendar\"\n\t\t\t:class=\"{'icon-add': !loadingCalendars, 'icon-loading-small': loadingCalendars}\"\n\t\t\t:disabled=\"loadingCalendars\"\n\t\t\t:title=\"t('mail', 'Import into calendar')\"\n\t\t\t@click.stop=\"loadCalendars\"\n\t\t></button>\n\t\t<button class=\"button icon-download attachment-download\" :title=\"t('mail', 'Download attachment')\"></button>\n\t\t<button\n\t\t\tclass=\"attachment-save-to-cloud\"\n\t\t\t:class=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t:disabled=\"savingToCloud\"\n\t\t\t:title=\"t('mail', 'Save to Files')\"\n\t\t\t@click.stop=\"saveToCloud\"\n\t\t></button>\n\t\t<div\n\t\t\tv-on-click-outside=\"closeCalendarPopover\"\n\t\t\tclass=\"popovermenu bubble attachment-import-popover hidden\"\n\t\t\t:class=\"{open: showCalendarPopover}\"\n\t\t>\n\t\t\t<PopoverMenu :menu=\"calendarMenuEntries\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport {formatFileSize} from 'nextcloud-files'\nimport {mixin as onClickOutside} from 'vue-on-click-outside'\nimport {getFilePickerBuilder} from 'nextcloud-dialogs'\nimport PopoverMenu from 'nextcloud-vue/dist/Components/PopoverMenu'\n\nimport {parseUid} from '../util/EnvelopeUidParser'\nimport Logger from '../logger'\n\nimport {downloadAttachment, saveAttachmentToFiles} from '../service/AttachmentService'\nimport {getUserCalendars, importCalendarEvent} from '../service/DAVService'\n\nexport default {\n\tname: 'MessageAttachment',\n\tcomponents: {\n\t\tPopoverMenu,\n\t},\n\tmixins: [onClickOutside],\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tfileName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisImage: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisCalendarEvent: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t\tloadingCalendars: false,\n\t\t\tcalendars: [],\n\t\t\tshowCalendarPopover: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tlabel() {\n\t\t\treturn this.fileName + ' (' + formatFileSize(this.size) + ')'\n\t\t},\n\t\tcalendarMenuEntries() {\n\t\t\treturn this.calendars.map(cal => {\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-add',\n\t\t\t\t\ttext: cal.displayname,\n\t\t\t\t\taction: this.importCalendar(cal.url),\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\thumanReadable(size) {\n\t\t\treturn formatFileSize(size)\n\t\t},\n\t\tsaveToCloud() {\n\t\t\tconst saveAttachment = (accountId, folderId, messageId, attachmentId) => directory => {\n\t\t\t\treturn saveAttachmentToFiles(accountId, folderId, messageId, attachmentId, directory)\n\t\t\t}\n\t\t\tconst {accountId, folderId, id} = parseUid(this.$route.params.messageUid)\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachment in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.build()\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then(dest => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachment(accountId, folderId, id, this.id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch(e => Logger.error('not saved', {error: e}))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownload() {\n\t\t\twindow.open(this.url)\n\t\t\twindow.focus()\n\t\t},\n\t\tloadCalendars() {\n\t\t\tthis.loadingCalendars = true\n\t\t\tgetUserCalendars().then(calendars => {\n\t\t\t\tthis.calendars = calendars\n\t\t\t\tthis.showCalendarPopover = true\n\t\t\t\tthis.loadingCalendars = false\n\t\t\t})\n\t\t},\n\t\tcloseCalendarPopover() {\n\t\t\tthis.showCalendarPopover = false\n\t\t},\n\t\timportCalendar(url) {\n\t\t\treturn () => {\n\t\t\t\tdownloadAttachment(this.url)\n\t\t\t\t\t.then(importCalendarEvent(url))\n\t\t\t\t\t.then(() => Logger.info('calendar imported'))\n\t\t\t\t\t.catch(e => Logger.error('import error', {error: e}))\n\t\t\t\t\t.then(() => (this.showCalendarPopover = false))\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.attachment {\n\tposition: relative;\n\tdisplay: inline-block;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: 3px;\n\tmargin: 0 10px 10px 0;\n\tpadding: 5px;\n}\n\n.attachment:hover,\n.attachment span:hover {\n\tbackground-color: var(--color-background-dark);\n\tcursor: pointer;\n}\n\n@media only screen and (max-width: 768px) {\n\t.attachment {\n\t\twidth: calc(100% - 5px);\n\t}\n}\n\n@media only screen and (min-width: 769px) and (max-width: 1400px) {\n\t.attachment {\n\t\twidth: calc(50% - 10px);\n\t}\n}\n\n@media only screen and (min-width: 1401px) {\n\t.attachment {\n\t\twidth: calc(33% - 12px);\n\t}\n}\n\n.mail-attached-image {\n\tdisplay: block;\n\tmax-width: 100%;\n\tmax-height: 120px;\n}\n\n.attachment-save-to-cloud,\n.attachment-download,\n.attachment-import {\n\tposition: absolute;\n\theight: 32px;\n\twidth: 32px;\n\tmargin: 0;\n\tbottom: 0;\n\tbackground-color: transparent;\n\tborder-color: transparent;\n}\n\n.attachment-save-to-cloud {\n\tright: 0;\n}\n\n.attachment-download {\n\tright: 32px;\n\topacity: 0.6;\n}\n\n.attachment-import {\n\tright: 64px;\n}\n\n.attachment-import-popover {\n\tright: 32px;\n\ttop: 42px;\n}\n\n.attachment-import-popover::after {\n\tright: 32px;\n}\n\n.attachment-name {\n\tdisplay: inline-block;\n\twidth: calc(100% - 108px);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n}\n\n/* show attachment size less prominent */\n.attachment-size {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n\n.attachment-icon {\n\tvertical-align: middle;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"mail-message-attachments\">\n\t\t<div class=\"attachments\">\n\t\t\t<MessageAttachment\n\t\t\t\tv-for=\"attachment in attachments\"\n\t\t\t\t:id=\"attachment.id\"\n\t\t\t\t:key=\"attachment.id\"\n\t\t\t\t:file-name=\"attachment.fileName\"\n\t\t\t\t:size=\"attachment.size\"\n\t\t\t\t:url=\"attachment.downloadUrl\"\n\t\t\t\t:is-image=\"attachment.isImage\"\n\t\t\t\t:is-calendar-event=\"attachment.isCalendarEvent\"\n\t\t\t\t:mime-url=\"attachment.mimeUrl\"\n\t\t\t/>\n\t\t</div>\n\t\t<p v-if=\"moreThanOne\">\n\t\t\t<button\n\t\t\t\tclass=\"attachments-save-to-cloud\"\n\t\t\t\t:class=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t\t:disabled=\"savingToCloud\"\n\t\t\t\t@click=\"saveAll\"\n\t\t\t>\n\t\t\t\t{{ t('mail', 'Save all to Files') }}\n\t\t\t</button>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport MessageAttachment from './MessageAttachment'\nimport Logger from '../logger'\nimport {parseUid} from '../util/EnvelopeUidParser'\nimport {saveAttachmentsToFiles} from '../service/AttachmentService'\n\nexport default {\n\tname: 'MessageAttachments',\n\tcomponents: {\n\t\tMessageAttachment,\n\t},\n\tprops: {\n\t\tattachments: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmoreThanOne() {\n\t\t\treturn this.attachments.length > 1\n\t\t},\n\t},\n\tmethods: {\n\t\tsaveAll() {\n\t\t\tconst pickDestination = () => {\n\t\t\t\treturn new Promise((res, rej) => {\n\t\t\t\t\tOC.dialogs.filepicker(\n\t\t\t\t\t\tt('mail', 'Choose a folder to store the attachments in'),\n\t\t\t\t\t\tres,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t'httpd/unix-directory',\n\t\t\t\t\t\ttrue\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst saveAttachments = (accountId, folderId, messageId) => directory => {\n\t\t\t\treturn saveAttachmentsToFiles(accountId, folderId, messageId, directory)\n\t\t\t}\n\t\t\tconst {accountId, folderId, id} = parseUid(this.$route.params.messageUid)\n\n\t\t\treturn pickDestination()\n\t\t\t\t.then(dest => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachments(accountId, folderId, id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch(error => Logger.error('not saved', {error}))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t},\n}\n</script>\n\n<style>\n.mail-message-attachments {\n\tmargin-bottom: 20px;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-save-to-cloud {\n\tbackground-position: 9px center;\n\tpadding-left: 32px;\n}\n</style>\n","import { render, staticRenderFns } from \"./MessageAttachment.vue?vue&type=template&id=63ae6cbc&scoped=true&\"\nimport script from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachment.vue?vue&type=style&index=0&id=63ae6cbc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63ae6cbc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"attachment\",on:{\"click\":_vm.download}},[(_vm.isImage)?_c('img',{staticClass:\"mail-attached-image\",attrs:{\"src\":_vm.url}}):_vm._e(),_vm._v(\" \"),_c('img',{staticClass:\"attachment-icon\",attrs:{\"src\":_vm.mimeUrl}}),_vm._v(\" \"),_c('span',{staticClass:\"attachment-name\",attrs:{\"title\":_vm.label}},[_vm._v(_vm._s(_vm.fileName)+\"\\n\\t\\t\"),_c('span',{staticClass:\"attachment-size\"},[_vm._v(\"(\"+_vm._s(_vm.humanReadable(_vm.size))+\")\")])]),_vm._v(\" \"),(_vm.isCalendarEvent)?_c('button',{staticClass:\"button attachment-import calendar\",class:{'icon-add': !_vm.loadingCalendars, 'icon-loading-small': _vm.loadingCalendars},attrs:{\"disabled\":_vm.loadingCalendars,\"title\":_vm.t('mail', 'Import into calendar')},on:{\"click\":function($event){$event.stopPropagation();return _vm.loadCalendars($event)}}}):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button icon-download attachment-download\",attrs:{\"title\":_vm.t('mail', 'Download attachment')}}),_vm._v(\" \"),_c('button',{staticClass:\"attachment-save-to-cloud\",class:{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},attrs:{\"disabled\":_vm.savingToCloud,\"title\":_vm.t('mail', 'Save to Files')},on:{\"click\":function($event){$event.stopPropagation();return _vm.saveToCloud($event)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"on-click-outside\",rawName:\"v-on-click-outside\",value:(_vm.closeCalendarPopover),expression:\"closeCalendarPopover\"}],staticClass:\"popovermenu bubble attachment-import-popover hidden\",class:{open: _vm.showCalendarPopover}},[_c('PopoverMenu',{attrs:{\"menu\":_vm.calendarMenuEntries}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./MessageAttachments.vue?vue&type=template&id=2dd808da&\"\nimport script from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachments.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mail-message-attachments\"},[_c('div',{staticClass:\"attachments\"},_vm._l((_vm.attachments),function(attachment){return _c('MessageAttachment',{key:attachment.id,attrs:{\"id\":attachment.id,\"file-name\":attachment.fileName,\"size\":attachment.size,\"url\":attachment.downloadUrl,\"is-image\":attachment.isImage,\"is-calendar-event\":attachment.isCalendarEvent,\"mime-url\":attachment.mimeUrl}})}),1),_vm._v(\" \"),(_vm.moreThanOne)?_c('p',[_c('button',{staticClass:\"attachments-save-to-cloud\",class:{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},attrs:{\"disabled\":_vm.savingToCloud},on:{\"click\":_vm.saveAll}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Save all to Files'))+\"\\n\\t\\t\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContentDetails>\n\t\t<Loading v-if=\"loading\" />\n\t\t<Error\n\t\t\tv-else-if=\"!message\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t>\n\t\t</Error>\n\t\t<template v-else>\n\t\t\t<div id=\"mail-message-header\" class=\"section\">\n\t\t\t\t<h2 :title=\"message.subject\">{{ message.subject }}</h2>\n\t\t\t\t<p class=\"transparency\">\n\t\t\t\t\t<AddressList :entries=\"message.from\" />\n\t\t\t\t\tto\n\t\t\t\t\t<!-- TODO: translate -->\n\t\t\t\t\t<AddressList :entries=\"message.to\" />\n\t\t\t\t\t<template v-if=\"message.cc.length\">\n\t\t\t\t\t\t(cc\n\t\t\t\t\t\t<!-- TODO: translate -->\n\t\t\t\t\t\t<AddressList :entries=\"message.cc\" /><!--\n\t\t\t\t\t\t-->)\n\t\t\t\t\t</template>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class=\"mail-message-body\">\n\t\t\t\t<MessageHTMLBody v-if=\"message.hasHtmlBody\" :url=\"htmlUrl\" @loaded=\"onHtmlBodyLoaded\" />\n\t\t\t\t<MessagePlainTextBody v-else :body=\"message.body\" :signature=\"message.signature\" />\n\t\t\t\t<MessageAttachments :attachments=\"message.attachments\" />\n\t\t\t\t<div id=\"reply-composer\"></div>\n\t\t\t\t<input id=\"forward-button\" type=\"button\" :value=\"t('mail', 'Forward')\" @click=\"forwardMessage\" />\n\t\t\t</div>\n\t\t\t<Composer\n\t\t\t\tv-if=\"!message.hasHtmlBody || htmlBodyLoaded\"\n\t\t\t\t:from-account=\"message.accountId\"\n\t\t\t\t:to=\"replyRecipient.to\"\n\t\t\t\t:cc=\"replyRecipient.cc\"\n\t\t\t\t:subject=\"replySubject\"\n\t\t\t\t:body=\"replyBody\"\n\t\t\t\t:reply-to=\"replyTo\"\n\t\t\t\t:send=\"sendReply\"\n\t\t\t\t:draft=\"saveReplyDraft\"\n\t\t\t/>\n\t\t</template>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport AppContentDetails from 'nextcloud-vue/dist/Components/AppContentDetails'\nimport {generateUrl} from 'nextcloud-router'\n\nimport AddressList from './AddressList'\nimport {buildReplyBody, buildRecipients as buildReplyRecipients, buildReplySubject} from '../ReplyBuilder'\nimport Composer from './Composer'\nimport Error from './Error'\nimport {getRandomMessageErrorMessage} from '../util/ErrorMessageFactory'\nimport {htmlToText} from '../util/HtmlHelper'\nimport MessageHTMLBody from './MessageHTMLBody'\nimport MessagePlainTextBody from './MessagePlainTextBody'\nimport Loading from './Loading'\nimport Logger from '../logger'\nimport MessageAttachments from './MessageAttachments'\nimport {saveDraft, sendMessage} from '../service/MessageService'\n\nexport default {\n\tname: 'Message',\n\tcomponents: {\n\t\tAddressList,\n\t\tAppContentDetails,\n\t\tComposer,\n\t\tError,\n\t\tLoading,\n\t\tMessageAttachments,\n\t\tMessageHTMLBody,\n\t\tMessagePlainTextBody,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tmessage: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t\thtmlBodyLoaded: false,\n\t\t\treplyRecipient: {},\n\t\t\treplySubject: '',\n\t\t\treplyBody: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\thtmlUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/accounts/{accountId}/folders/{folderId}/messages/{id}/html', {\n\t\t\t\taccountId: this.message.accountId,\n\t\t\t\tfolderId: this.message.folderId,\n\t\t\t\tid: this.message.id,\n\t\t\t})\n\t\t},\n\t\treplyTo() {\n\t\t\treturn {\n\t\t\t\taccountId: this.message.accountId,\n\t\t\t\tfolderId: this.message.folderId,\n\t\t\t\tmessageId: this.message.id,\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tthis.fetchMessage()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.fetchMessage()\n\t},\n\tmethods: {\n\t\tfetchMessage() {\n\t\t\tthis.loading = true\n\t\t\tthis.message = undefined\n\t\t\tthis.errorMessage = ''\n\t\t\tthis.error = undefined\n\t\t\tthis.replyRecipient = {}\n\t\t\tthis.replySubject = ''\n\t\t\tthis.replyBody = ''\n\t\t\tthis.htmlBodyLoaded = false\n\n\t\t\tconst messageUid = this.$route.params.messageUid\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchMessage', messageUid)\n\t\t\t\t.then(message => {\n\t\t\t\t\t// TODO: add timeout so that message isn't flagged when only viewed\n\t\t\t\t\t// for a few seconds\n\t\t\t\t\tif (message.uid !== this.$route.params.messageUid) {\n\t\t\t\t\t\tLogger.debug(\"User navigated away, loaded message won't be shown nor flagged as seen\")\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.message = message\n\n\t\t\t\t\tif (_.isUndefined(this.message)) {\n\t\t\t\t\t\tLogger.info('message could not be found', {messageUid})\n\t\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tconst account = this.$store.getters.getAccount(message.accountId)\n\t\t\t\t\tthis.replyRecipient = buildReplyRecipients(message, {\n\t\t\t\t\t\tlabel: account.name,\n\t\t\t\t\t\temail: account.emailAddress,\n\t\t\t\t\t})\n\t\t\t\t\tthis.replySubject = buildReplySubject(message.subject)\n\n\t\t\t\t\tif (!message.hasHtmlBody) {\n\t\t\t\t\t\tthis.setReplyText(message.body)\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.loading = false\n\n\t\t\t\t\tconst envelope = this.$store.getters.getEnvelope(message.accountId, message.folderId, message.id)\n\t\t\t\t\tif (!envelope.flags.unseen) {\n\t\t\t\t\t\t// Already seen -> no change necessary\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.$store.dispatch('toggleEnvelopeSeen', envelope)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tLogger.error('could not load message ', {messageUid, error})\n\t\t\t\t\tif (error.isError) {\n\t\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your message')\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tsetReplyText(text) {\n\t\t\tconst bodyText = htmlToText(text)\n\n\t\t\tthis.$store.commit('setMessageBodyText', {\n\t\t\t\tuid: this.message.uid,\n\t\t\t\tbodyText,\n\t\t\t})\n\n\t\t\tthis.replyBody = buildReplyBody(this.message.bodyText, this.message.from[0], this.message.dateInt)\n\t\t},\n\t\tonHtmlBodyLoaded(bodyString) {\n\t\t\tthis.setReplyText(bodyString)\n\t\t\tthis.htmlBodyLoaded = true\n\t\t},\n\t\tsaveReplyDraft(data) {\n\t\t\treturn saveDraft(data.account, data).then(({uid}) => uid)\n\t\t},\n\t\tsendReply(data) {\n\t\t\treturn sendMessage(data.account, data)\n\t\t},\n\t\tforwardMessage() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tuid: this.message.uid,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style>\n.mail-message-body {\n\tmargin-bottom: 100px;\n}\n\n#mail-message-header h2,\n#mail-message-header p {\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tpadding-bottom: 7px;\n\tmargin-bottom: 0;\n}\n\n#mail-content,\n.mail-message-attachments {\n\tmargin: 10px 10px 50px 30px;\n}\n\n.mail-message-attachments {\n\tmargin-top: 10px;\n}\n\n#mail-content iframe {\n\twidth: 100%;\n}\n\n#show-images-text {\n\tdisplay: none;\n}\n\n#mail-content a,\n.mail-signature a {\n\tcolor: #07d;\n\tborder-bottom: 1px dotted #07d;\n\ttext-decoration: none;\n\tword-wrap: break-word;\n}\n\n#mail-message-header .transparency {\n\topacity: 0.6;\n}\n\n#mail-message-header .transparency a {\n\tfont-weight: bold;\n}\n\n@media print {\n\t#mail-message-header {\n\t\tposition: relative;\n\t}\n\n\t#header,\n\t#app-navigation,\n\t#reply-composer,\n\t#forward-button,\n\t#mail-message-has-blocked-content,\n\t.app-content-list,\n\t.message-composer,\n\t.mail-message-attachments {\n\t\tdisplay: none !important;\n\t}\n\t#app-content {\n\t\tmargin-left: 0 !important;\n\t}\n\t.mail-message-body {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n</style>\n","/**\n * Mail\n *\n * This file is licensed under the Affero General Public License version 3 or\n * later. See the COPYING file.\n *\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n * @copyright Christoph Wurst 2016\n */\n\nimport {fromString} from 'html-to-text'\n\nexport const htmlToText = html => {\n\treturn fromString(html, {\n\t\tnoLinkBrackets: true,\n\t\tignoreHref: true,\n\t\tignoreImage: true,\n\t\twordwrap: 78, // 80 minus '> ' prefix for replies\n\t})\n}\n","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=12e8e392&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[(_vm.loading)?_c('Loading'):(!_vm.message)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error}}):[_c('div',{staticClass:\"section\",attrs:{\"id\":\"mail-message-header\"}},[_c('h2',{attrs:{\"title\":_vm.message.subject}},[_vm._v(_vm._s(_vm.message.subject))]),_vm._v(\" \"),_c('p',{staticClass:\"transparency\"},[_c('AddressList',{attrs:{\"entries\":_vm.message.from}}),_vm._v(\"\\n\\t\\t\\t\\tto\\n\\t\\t\\t\\t\"),_vm._v(\" \"),_c('AddressList',{attrs:{\"entries\":_vm.message.to}}),_vm._v(\" \"),(_vm.message.cc.length)?[_vm._v(\"\\n\\t\\t\\t\\t\\t(cc\\n\\t\\t\\t\\t\\t\"),_vm._v(\" \"),_c('AddressList',{attrs:{\"entries\":_vm.message.cc}}),_vm._v(\")\\n\\t\\t\\t\\t\")]:_vm._e()],2)]),_vm._v(\" \"),_c('div',{staticClass:\"mail-message-body\"},[(_vm.message.hasHtmlBody)?_c('MessageHTMLBody',{attrs:{\"url\":_vm.htmlUrl},on:{\"loaded\":_vm.onHtmlBodyLoaded}}):_c('MessagePlainTextBody',{attrs:{\"body\":_vm.message.body,\"signature\":_vm.message.signature}}),_vm._v(\" \"),_c('MessageAttachments',{attrs:{\"attachments\":_vm.message.attachments}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"reply-composer\"}}),_vm._v(\" \"),_c('input',{attrs:{\"id\":\"forward-button\",\"type\":\"button\",\"value\":_vm.t('mail', 'Forward')},on:{\"click\":_vm.forwardMessage}})],1),_vm._v(\" \"),(!_vm.message.hasHtmlBody || _vm.htmlBodyLoaded)?_c('Composer',{attrs:{\"from-account\":_vm.message.accountId,\"to\":_vm.replyRecipient.to,\"cc\":_vm.replyRecipient.cc,\"subject\":_vm.replySubject,\"body\":_vm.replyBody,\"reply-to\":_vm.replyTo,\"send\":_vm.sendReply,\"draft\":_vm.saveReplyDraft}}):_vm._e()]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageDetail.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContentDetails>\n\t\t<Loading v-if=\"loading\" />\n\t\t<Error\n\t\t\tv-else-if=\"error\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t>\n\t\t</Error>\n\t\t<Composer\n\t\t\tv-else\n\t\t\t:from-account=\"composerData.accountId\"\n\t\t\t:to=\"composerData.to\"\n\t\t\t:cc=\"composerData.cc\"\n\t\t\t:bcc=\"composerData.bcc\"\n\t\t\t:subject=\"composerData.subject\"\n\t\t\t:body=\"composerData.body\"\n\t\t\t:draft=\"saveDraft\"\n\t\t\t:send=\"sendMessage\"\n\t\t/>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport AppContentDetails from 'nextcloud-vue/dist/Components/AppContentDetails'\n\nimport {buildFowardSubject, buildReplyBody} from '../ReplyBuilder'\nimport Composer from './Composer'\nimport {getRandomMessageErrorMessage} from '../util/ErrorMessageFactory'\nimport Error from './Error'\nimport Loading from './Loading'\nimport Logger from '../logger'\nimport {saveDraft, sendMessage} from '../service/MessageService'\n\nexport default {\n\tname: 'NewMessageDetail',\n\tcomponents: {\n\t\tAppContentDetails,\n\t\tComposer,\n\t\tError,\n\t\tLoading,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tdraft: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcomposerData() {\n\t\t\tif (!_.isUndefined(this.draft)) {\n\t\t\t\tLogger.info('todo: handle draft data')\n\t\t\t\treturn {\n\t\t\t\t\tto: this.draft.to,\n\t\t\t\t\tcc: this.draft.cc,\n\t\t\t\t\tbcc: this.draft.bcc, // TODO: impl in composer\n\t\t\t\t\tsubject: this.draft.subject,\n\t\t\t\t\tbody: this.draft.body,\n\t\t\t\t}\n\t\t\t} else if (!_.isUndefined(this.$route.query.uid)) {\n\t\t\t\t// Forwarded message\n\n\t\t\t\tconst message = this.$store.getters.getMessageByUid(this.$route.query.uid)\n\t\t\t\tLogger.debug('forwaring message', message)\n\n\t\t\t\treturn {\n\t\t\t\t\tto: [],\n\t\t\t\t\tcc: [],\n\t\t\t\t\tsubject: buildFowardSubject(message.subject),\n\t\t\t\t\tbody: buildReplyBody(message.bodyText, message.from[0], message.dateInt),\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// New or mailto: message\n\n\t\t\t\tlet accountId\n\t\t\t\t// Only preselect an account when we're not in a unified mailbox\n\t\t\t\tif (this.$route.params.accountId !== 0 && this.$route.params.accountId !== '0') {\n\t\t\t\t\taccountId = parseInt(this.$route.params.accountId, 10)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\taccountId,\n\t\t\t\t\tto: this.stringToRecipients(this.$route.query.to),\n\t\t\t\t\tcc: this.stringToRecipients(this.$route.query.cc),\n\t\t\t\t\tsubject: this.$route.query.subject || '',\n\t\t\t\t\tbody: this.$route.query.body || '',\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\t// `saveDraft` replaced the current URL with the updated draft UID\n\t\t\t// in that case we don't really start a new draft but just keep the\n\t\t\t// URL consistent, hence not loading anything\n\t\t\tif (this.draft && to.name === 'message' && to.params.draftUid === this.draft.uid) {\n\t\t\t\tLogger.debug('detected navigation to current (new) draft UID, not reloading')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.fetchMessage()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.fetchMessage()\n\t},\n\tmethods: {\n\t\tstringToRecipients(str) {\n\t\t\tif (_.isUndefined(str)) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: str,\n\t\t\t\t\temail: str,\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\t\tfetchMessage() {\n\t\t\tthis.draft = undefined\n\t\t\tthis.errorMessage = ''\n\t\t\tthis.error = undefined\n\n\t\t\tconst draftUid = this.$route.params.draftUid\n\t\t\tif (_.isUndefined(draftUid)) {\n\t\t\t\tLogger.debug('not a draft, nothing to fetch')\n\t\t\t\t// Nothing to fetch\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.loading = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchMessage', draftUid)\n\t\t\t\t.then(draft => {\n\t\t\t\t\tif (draft.uid !== this.$route.params.draftUid) {\n\t\t\t\t\t\tLogger.debug(\"User navigated away, loaded draft won't be shown\")\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.draft = draft\n\n\t\t\t\t\tif (_.isUndefined(this.draft)) {\n\t\t\t\t\t\tLogger.info('draft could not be found', {draftUid})\n\t\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tLogger.error('could not load draft ' + draftUid, {error})\n\t\t\t\t\tif (error.isError) {\n\t\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your draft')\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tsaveDraft(data) {\n\t\t\tif (_.isUndefined(data.draftUID) && this.draft) {\n\t\t\t\tLogger.debug('draft data does not have a draftUID, adding one')\n\t\t\t\tdata.draftUID = this.draft.id\n\t\t\t}\n\t\t\treturn saveDraft(data.account, data).then(({uid}) => {\n\t\t\t\tif (_.isUndefined(this.draft)) {\n\t\t\t\t\treturn uid\n\t\t\t\t}\n\n\t\t\t\tLogger.info('replacing draft ' + this.draft.uid + ' with ' + uid)\n\t\t\t\tconst update = {\n\t\t\t\t\tdraft: this.draft,\n\t\t\t\t\tuid,\n\t\t\t\t\tdata,\n\t\t\t\t}\n\t\t\t\treturn this.$store\n\t\t\t\t\t.dispatch('replaceDraft', update)\n\t\t\t\t\t.then(() =>\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t\t\t\t\tdraftUid: this.draft.uid,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t\t.then(() => uid)\n\t\t\t})\n\t\t},\n\t\tsendMessage(data) {\n\t\t\treturn sendMessage(data.account, data)\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./NewMessageDetail.vue?vue&type=template&id=3efa4670&\"\nimport script from \"./NewMessageDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./NewMessageDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[(_vm.loading)?_c('Loading'):(_vm.error)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error}}):_c('Composer',{attrs:{\"from-account\":_vm.composerData.accountId,\"to\":_vm.composerData.to,\"cc\":_vm.composerData.cc,\"bcc\":_vm.composerData.bcc,\"subject\":_vm.composerData.subject,\"body\":_vm.composerData.body,\"draft\":_vm.saveDraft,\"send\":_vm.sendMessage}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppContentDetails>\n\t\t<div class=\"icon icon-mail\"></div>\n\t\t<h2>{{ mailbox }}</h2>\n\t\t<p>{{ t('mail', 'No message selected') }}</p>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from 'nextcloud-vue/dist/Components/AppContentDetails'\n\nexport default {\n\tname: 'NoMessageSelected',\n\tcomponents: {\n\t\tAppContentDetails,\n\t},\n\tprops: {\n\t\tmailbox: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.app-content-details {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n}\n\n.icon {\n\theight: 64px;\n\twidth: 64px;\n\tmargin: 0 auto 15px;\n\tbackground-size: 64px;\n\topacity: 0.4;\n}\n\nh2,\np {\n\ttext-align: center;\n}\n</style>\n","import { render, staticRenderFns } from \"./NoMessageSelected.vue?vue&type=template&id=6b51141c&scoped=true&\"\nimport script from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nexport * from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NoMessageSelected.vue?vue&type=style&index=0&id=6b51141c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6b51141c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[_c('div',{staticClass:\"icon icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.mailbox))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.t('mail', 'No message selected')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FolderContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FolderContent.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContent>\n\t\t<AppDetailsToggle v-if=\"showMessage\" @close=\"hideMessage\" />\n\t\t<div id=\"app-content-wrapper\">\n\t\t\t<Loading v-if=\"loading\" :hint=\"t('mail', 'Loading messages')\" />\n\t\t\t<template v-else>\n\t\t\t\t<EnvelopeList\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:folder=\"folder\"\n\t\t\t\t\t:envelopes=\"envelopes\"\n\t\t\t\t\t:search-query=\"searchQuery\"\n\t\t\t\t\t:show=\"!showMessage\"\n\t\t\t\t/>\n\t\t\t\t<NewMessageDetail v-if=\"newMessage\" />\n\t\t\t\t<Message v-else-if=\"showMessage\" />\n\t\t\t\t<NoMessageSelected v-else-if=\"hasMessages\" :mailbox=\"folder.name\" />\n\t\t\t</template>\n\t\t</div>\n\t</AppContent>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport AppContent from 'nextcloud-vue/dist/Components/AppContent'\nimport isMobile from 'nextcloud-vue/dist/Mixins/isMobile'\n\nimport AppDetailsToggle from './AppDetailsToggle'\nimport EnvelopeList from './EnvelopeList'\nimport Loading from './Loading'\nimport Logger from '../logger'\nimport Message from './Message'\nimport NewMessageDetail from './NewMessageDetail'\nimport NoMessageSelected from './NoMessageSelected'\n\nexport default {\n\tname: 'FolderContent',\n\tcomponents: {\n\t\tAppContent,\n\t\tAppDetailsToggle,\n\t\tEnvelopeList,\n\t\tLoading,\n\t\tMessage,\n\t\tNewMessageDetail,\n\t\tNoMessageSelected,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfolder: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tsearchQuery: undefined,\n\t\t\talive: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasMessages() {\n\t\t\t// it actually should be `return this.$store.getters.getEnvelopes(this.account.id, this.folder.id).length > 0`\n\t\t\t// but for some reason Vue doesn't track the dependencies on reactive data then and messages in subfolders can't\n\t\t\t// be opened then\n\n\t\t\treturn this.folder.envelopes.map(msgId => this.$store.state.envelopes[msgId])\n\t\t},\n\t\tshowMessage() {\n\t\t\treturn this.hasMessages && this.$route.name === 'message'\n\t\t},\n\t\tnewMessage() {\n\t\t\treturn this.$route.params.messageUid === 'new'\n\t\t},\n\t\tenvelopes() {\n\t\t\tif (_.isUndefined(this.searchQuery)) {\n\t\t\t\treturn this.$store.getters.getEnvelopes(this.account.id, this.folder.id)\n\t\t\t} else {\n\t\t\t\treturn this.$store.getters.getSearchEnvelopes(this.account.id, this.folder.id)\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif (to.name === 'folder') {\n\t\t\t\t// Navigate (back) to the folder view -> (re)fetch data\n\t\t\t\tthis.fetchData()\n\t\t\t}\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.alive = true\n\n\t\tnew OCA.Search(this.searchProxy, this.clearSearchProxy)\n\n\t\tthis.fetchData()\n\t},\n\tbeforeDestroy() {\n\t\tthis.alive = false\n\t},\n\tmethods: {\n\t\tfetchData() {\n\t\t\tthis.loading = true\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchEnvelopes', {\n\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\tfolderId: this.folder.id,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tconst envelopes = this.envelopes\n\t\t\t\t\tLogger.debug('envelopes fetched', envelopes)\n\n\t\t\t\t\tthis.loading = false\n\n\t\t\t\t\tif (!this.isMobile && this.$route.name !== 'message' && envelopes.length > 0) {\n\t\t\t\t\t\t// Show first message\n\t\t\t\t\t\tlet first = envelopes[0]\n\n\t\t\t\t\t\t// Keep the selected account-folder combination, but navigate to the message\n\t\t\t\t\t\t// (it's not a bug that we don't use first.accountId and first.folderId here)\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\t\t\t\tfolderId: this.folder.id,\n\t\t\t\t\t\t\t\tmessageUid: first.uid,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\thideMessage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'folder',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\tfolderId: this.folder.id,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tsearchProxy(query) {\n\t\t\tif (this.alive) {\n\t\t\t\tthis.search(query)\n\t\t\t}\n\t\t},\n\t\tclearSearchProxy() {\n\t\t\tif (this.alive) {\n\t\t\t\tthis.clearSearch()\n\t\t\t}\n\t\t},\n\t\tsearch(query) {\n\t\t\tthis.searchQuery = query\n\n\t\t\tthis.fetchData()\n\t\t},\n\t\tclearSearch() {\n\t\t\tthis.searchQuery = undefined\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./FolderContent.vue?vue&type=template&id=0d7c71c4&\"\nimport script from \"./FolderContent.vue?vue&type=script&lang=js&\"\nexport * from \"./FolderContent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContent',[(_vm.showMessage)?_c('AppDetailsToggle',{on:{\"close\":_vm.hideMessage}}):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"app-content-wrapper\"}},[(_vm.loading)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages')}}):[_c('EnvelopeList',{attrs:{\"account\":_vm.account,\"folder\":_vm.folder,\"envelopes\":_vm.envelopes,\"search-query\":_vm.searchQuery,\"show\":!_vm.showMessage}}),_vm._v(\" \"),(_vm.newMessage)?_c('NewMessageDetail'):(_vm.showMessage)?_c('Message'):(_vm.hasMessages)?_c('NoMessageSelected',{attrs:{\"mailbox\":_vm.folder.name}}):_vm._e()]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","<template>\n\t<Content v-shortkey.once=\"['c']\" app-name=\"mail\" @shortkey.native=\"onNewMessage\">\n\t\t<Navigation />\n\t\t<FolderContent v-if=\"activeAccount\" :account=\"activeAccount\" :folder=\"activeFolder\" />\n\t</Content>\n</template>\n\n<script>\nimport Content from 'nextcloud-vue/dist/Components/Content'\n\nimport Navigation from '../components/Navigation'\nimport FolderContent from '../components/FolderContent'\n\nexport default {\n\tname: 'Home',\n\tcomponents: {\n\t\tContent,\n\t\tFolderContent,\n\t\tNavigation,\n\t},\n\tcomputed: {\n\t\tactiveAccount() {\n\t\t\treturn this.$store.getters.getAccount(this.$route.params.accountId)\n\t\t},\n\t\tactiveFolder() {\n\t\t\treturn this.$store.getters.getFolder(this.$route.params.accountId, this.$route.params.folderId)\n\t\t},\n\t\tmenu() {\n\t\t\treturn this.buildMenu()\n\t\t},\n\t},\n\tcreated() {\n\t\tconst accounts = this.$store.getters.getAccounts()\n\n\t\tif (this.$route.name === 'home' && accounts.length > 1) {\n\t\t\t// Show first account\n\t\t\tlet firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one folder\n\t\t\tlet firstFolder = this.$store.getters.getFolders(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading first folder of first account', firstAccount.id, firstFolder.id)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'folder',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: firstAccount.id,\n\t\t\t\t\tfolderId: firstFolder.id,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (this.$route.name === 'home' && accounts.length === 1) {\n\t\t\t// The only account we have is the unified one -> show the setup page\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'setup',\n\t\t\t})\n\t\t} else if (this.$route.name === 'mailto') {\n\t\t\tif (accounts.length === 0) {\n\t\t\t\tconsole.error('cannot handle mailto:, no accounts configured')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Show first account\n\t\t\tlet firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one folder\n\t\t\tlet firstFolder = this.$store.getters.getFolders(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading composer with first account and folder', firstAccount.id, firstFolder.id)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: firstAccount.id,\n\t\t\t\t\tfolderId: firstFolder.id,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.$route.query.to,\n\t\t\t\t\tcc: this.$route.query.cc,\n\t\t\t\t\tbcc: this.$route.query.bcc,\n\t\t\t\t\tsubject: this.$route.query.subject,\n\t\t\t\t\tbody: this.$route.query.body,\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\tonNewMessage() {\n\t\t\t// FIXME: assumes that we're on the 'message' route already\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\taccountId: this.$route.params.accountId,\n\t\t\t\t\tfolderId: this.$route.params.folderId,\n\t\t\t\t\tmessageUid: 'new',\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=16309faa&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
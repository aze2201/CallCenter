(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{189:function(e,t,n){var s=n(199);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,n(5).default)("576d9bce",s,!1,{})},196:function(e,t,n){var s={"./af":62,"./af.js":62,"./ar":63,"./ar-dz":64,"./ar-dz.js":64,"./ar-kw":65,"./ar-kw.js":65,"./ar-ly":66,"./ar-ly.js":66,"./ar-ma":67,"./ar-ma.js":67,"./ar-sa":68,"./ar-sa.js":68,"./ar-tn":69,"./ar-tn.js":69,"./ar.js":63,"./az":70,"./az.js":70,"./be":71,"./be.js":71,"./bg":72,"./bg.js":72,"./bm":73,"./bm.js":73,"./bn":74,"./bn.js":74,"./bo":75,"./bo.js":75,"./br":76,"./br.js":76,"./bs":77,"./bs.js":77,"./ca":78,"./ca.js":78,"./cs":79,"./cs.js":79,"./cv":80,"./cv.js":80,"./cy":81,"./cy.js":81,"./da":82,"./da.js":82,"./de":83,"./de-at":84,"./de-at.js":84,"./de-ch":85,"./de-ch.js":85,"./de.js":83,"./dv":86,"./dv.js":86,"./el":87,"./el.js":87,"./en-SG":88,"./en-SG.js":88,"./en-au":89,"./en-au.js":89,"./en-ca":90,"./en-ca.js":90,"./en-gb":91,"./en-gb.js":91,"./en-ie":92,"./en-ie.js":92,"./en-il":93,"./en-il.js":93,"./en-nz":94,"./en-nz.js":94,"./eo":95,"./eo.js":95,"./es":96,"./es-do":97,"./es-do.js":97,"./es-us":98,"./es-us.js":98,"./es.js":96,"./et":99,"./et.js":99,"./eu":100,"./eu.js":100,"./fa":101,"./fa.js":101,"./fi":102,"./fi.js":102,"./fo":103,"./fo.js":103,"./fr":104,"./fr-ca":105,"./fr-ca.js":105,"./fr-ch":106,"./fr-ch.js":106,"./fr.js":104,"./fy":107,"./fy.js":107,"./ga":108,"./ga.js":108,"./gd":109,"./gd.js":109,"./gl":110,"./gl.js":110,"./gom-latn":111,"./gom-latn.js":111,"./gu":112,"./gu.js":112,"./he":113,"./he.js":113,"./hi":114,"./hi.js":114,"./hr":115,"./hr.js":115,"./hu":116,"./hu.js":116,"./hy-am":117,"./hy-am.js":117,"./id":118,"./id.js":118,"./is":119,"./is.js":119,"./it":120,"./it-ch":121,"./it-ch.js":121,"./it.js":120,"./ja":122,"./ja.js":122,"./jv":123,"./jv.js":123,"./ka":124,"./ka.js":124,"./kk":125,"./kk.js":125,"./km":126,"./km.js":126,"./kn":127,"./kn.js":127,"./ko":128,"./ko.js":128,"./ku":129,"./ku.js":129,"./ky":130,"./ky.js":130,"./lb":131,"./lb.js":131,"./lo":132,"./lo.js":132,"./lt":133,"./lt.js":133,"./lv":134,"./lv.js":134,"./me":135,"./me.js":135,"./mi":136,"./mi.js":136,"./mk":137,"./mk.js":137,"./ml":138,"./ml.js":138,"./mn":139,"./mn.js":139,"./mr":140,"./mr.js":140,"./ms":141,"./ms-my":142,"./ms-my.js":142,"./ms.js":141,"./mt":143,"./mt.js":143,"./my":144,"./my.js":144,"./nb":145,"./nb.js":145,"./ne":146,"./ne.js":146,"./nl":147,"./nl-be":148,"./nl-be.js":148,"./nl.js":147,"./nn":149,"./nn.js":149,"./pa-in":150,"./pa-in.js":150,"./pl":151,"./pl.js":151,"./pt":152,"./pt-br":153,"./pt-br.js":153,"./pt.js":152,"./ro":154,"./ro.js":154,"./ru":155,"./ru.js":155,"./sd":156,"./sd.js":156,"./se":157,"./se.js":157,"./si":158,"./si.js":158,"./sk":159,"./sk.js":159,"./sl":160,"./sl.js":160,"./sq":161,"./sq.js":161,"./sr":162,"./sr-cyrl":163,"./sr-cyrl.js":163,"./sr.js":162,"./ss":164,"./ss.js":164,"./sv":165,"./sv.js":165,"./sw":166,"./sw.js":166,"./ta":167,"./ta.js":167,"./te":168,"./te.js":168,"./tet":169,"./tet.js":169,"./tg":170,"./tg.js":170,"./th":171,"./th.js":171,"./tl-ph":172,"./tl-ph.js":172,"./tlh":173,"./tlh.js":173,"./tr":174,"./tr.js":174,"./tzl":175,"./tzl.js":175,"./tzm":176,"./tzm-latn":177,"./tzm-latn.js":177,"./tzm.js":176,"./ug-cn":178,"./ug-cn.js":178,"./uk":179,"./uk.js":179,"./ur":180,"./ur.js":180,"./uz":181,"./uz-latn":182,"./uz-latn.js":182,"./uz.js":181,"./vi":183,"./vi.js":183,"./x-pseudo":184,"./x-pseudo.js":184,"./yo":185,"./yo.js":185,"./zh-cn":186,"./zh-cn.js":186,"./zh-hk":187,"./zh-hk.js":187,"./zh-tw":188,"./zh-tw.js":188};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=i,e.exports=o,o.id=196},198:function(e,t,n){"use strict";var s=n(189);n.n(s).a},199:function(e,t,n){(e.exports=n(4)(!1)).push([e.i,'#app-content input.hasTimepicker {\n  width: 75px;\n}\n.warning {\n  color: var(--color-error);\n  font-weight: bold;\n}\n.forms-content {\n  display: flex;\n  padding-top: 45px;\n  flex-grow: 1;\n}\ninput[type="text"] {\n  display: block;\n  width: 100%;\n}\n.workbench {\n  margin-top: 45px;\n  display: flex;\n  flex-grow: 1;\n  flex-wrap: wrap;\n  overflow-x: hidden;\n}\n.workbench > div {\n    min-width: 245px;\n    max-width: 540px;\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;\n    padding: 8px;\n}\n.forms-sidebar {\n  margin-top: 45px;\n  width: 25%;\n}\n.forms-sidebar .configBox {\n    display: flex;\n    flex-direction: column;\n    padding: 8px;\n}\n.forms-sidebar .configBox > * {\n      padding-left: 21px;\n}\n.forms-sidebar .configBox > .title {\n      display: flex;\n      background-position: 0 2px;\n      padding-left: 24px;\n      opacity: 0.7;\n      font-weight: bold;\n      margin-bottom: 4px;\n}\n.forms-sidebar .configBox > .title > span {\n        padding-left: 4px;\n}\ninput.error,\ntextarea.error {\n  border: 2px solid var(--color-error);\n  box-shadow: 1px 0 var(--border-radius) var(--color-box-shadow);\n}\n\n/* Transitions for inserting and removing list items */\n.list-enter-active,\n.list-leave-active {\n  transition: all 0.5s ease;\n}\n.list-enter,\n.list-leave-to {\n  opacity: 0;\n}\n.list-move {\n  transition: transform 0.5s;\n}\n\n/*  */\n#form-item-selector-text > input {\n  width: 100%;\n}\n.form-table > li {\n  display: flex;\n  align-items: baseline;\n  padding-left: 8px;\n  padding-right: 8px;\n  line-height: 24px;\n  min-height: 24px;\n  border-bottom: 1px solid var(--color-border);\n  overflow: hidden;\n  white-space: nowrap;\n}\n.form-table > li:active, .form-table > li:hover {\n    transition: var(--background-dark) 0.3s ease;\n    background-color: var(--color-background-dark);\n}\n.form-table > li > div {\n    display: flex;\n    flex-grow: 1;\n    font-size: 1.2em;\n    opacity: 0.7;\n    white-space: normal;\n    padding-right: 4px;\n}\n.form-table > li > div.avatar {\n      flex-grow: 0;\n}\n.form-table > li > div:nth-last-child(1) {\n    justify-content: center;\n    flex-grow: 0;\n    flex-shrink: 0;\n}\nbutton.button-inline {\n  border: 0;\n  background-color: transparent;\n}\n.tab {\n  display: flex;\n  flex-wrap: wrap;\n}\n.selectUnit {\n  display: flex;\n  align-items: center;\n  flex-wrap: nowrap;\n}\n.selectUnit > label {\n    padding-right: 4px;\n}\n#shiftDates {\n  background-repeat: no-repeat;\n  background-position: 10px center;\n  min-width: 16px;\n  min-height: 16px;\n  padding: 10px;\n  padding-left: 34px;\n  text-align: left;\n  margin: 0;\n}\n',""])},209:function(e,n,s){"use strict";s.r(n);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app-content"}},[n("controls",{attrs:{intitle:e.title}},[n("template",{slot:"after"},[n("button",{staticClass:"button btn primary",attrs:{disabled:e.writingForm},on:{click:function(t){return e.writeForm(e.form.mode)}}},[n("span",[e._v(e._s(e.saveButtonTitle))]),e._v(" "),e.writingForm?n("span",{staticClass:"icon-loading-small"}):e._e()]),e._v(" "),n("button",{staticClass:"button symbol icon-settings",on:{click:e.switchSidebar}})])],2),e._v(" "),n("div",{staticClass:"workbench"},[n("div",[n("h2",[e._v(e._s(e.t("forms","Form description")))]),e._v(" "),n("label",[e._v(e._s(e.t("forms","Title")))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.event.title,expression:"form.event.title"}],class:{error:e.titleEmpty},attrs:{id:"formTitle",type:"text"},domProps:{value:e.form.event.title},on:{input:function(t){t.target.composing||e.$set(e.form.event,"title",t.target.value)}}}),e._v(" "),n("label",[e._v(e._s(e.t("forms","Description")))]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.event.description,expression:"form.event.description"}],staticStyle:{resize:"vertical",width:"100%"},attrs:{id:"formDesc"},domProps:{value:e.form.event.description},on:{input:function(t){t.target.composing||e.$set(e.form.event,"description",t.target.value)}}})]),e._v(" "),n("div",[n("h2",[e._v(e._s(e.t("forms","Make a Form")))]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"quizForm"===e.form.event.type,expression:"form.event.type === 'quizForm'"}],attrs:{id:"quiz-form-selector-text"}},[n("label",{attrs:{for:"ans-type"}},[e._v("Answer Type: ")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selected=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",disabled:""}},[e._v("\n\t\t\t\t\t\tSelect\n\t\t\t\t\t")]),e._v(" "),e._l(e.options,function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n\t\t\t\t\t\t"+e._s(t.text)+"\n\t\t\t\t\t")])})],2),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newQuizQuestion,expression:"newQuizQuestion"}],attrs:{placeholder:e.t("forms","Add Question")},domProps:{value:e.newQuizQuestion},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addQuestion()},input:function(t){t.target.composing||(e.newQuizQuestion=t.target.value)}}}),e._v(" "),n("button",{attrs:{id:"questButton"},on:{click:function(t){return e.addQuestion()}}},[e._v("\n\t\t\t\t\t"+e._s(e.t("forms","Add Question"))+"\n\t\t\t\t")])]),e._v(" "),n("transitionGroup",{directives:[{name:"show",rawName:"v-show",value:"create"==e.form.mode,expression:"form.mode == 'create'"}],staticClass:"form-table",attrs:{id:"form-list",name:"list",tag:"ul"}},e._l(e.form.options.formQuizQuestions,function(t,s){return n("quiz-form-item",{key:t.id,tag:"li",attrs:{question:t,type:t.type},on:{"add-answer":e.addAnswer,"remove-answer":e.removeAnswer,remove:function(t){return e.form.options.formQuizQuestions.splice(s,1)}}})}),1)],1)]),e._v(" "),e.sidebar?n("side-bar",[e.adminMode?n("div",{staticClass:"warning"},[e._v("\n\t\t\t"+e._s(e.t("forms","You are editing in admin mode"))+"\n\t\t")]):e._e(),e._v(" "),n("UserDiv",{attrs:{"user-id":e.form.event.owner,description:e.t("forms","Owner")}}),e._v(" "),n("ul",{staticClass:"tabHeaders"},[n("li",{staticClass:"tabHeader selected",attrs:{"data-tabid":"configurationsTabView","data-tabindex":"0"}},[n("a",{attrs:{href:"#"}},[e._v("\n\t\t\t\t\t"+e._s(e.t("forms","Configuration"))+"\n\t\t\t\t")])])]),e._v(" "),e.protect?n("div",[n("span",[e._v(e._s(e.t("forms","Configuration is locked. Changing options may result in unwanted behaviour, but you can unlock it anyway.")))]),e._v(" "),n("button",{on:{click:function(t){e.protect=!1}}},[e._v("\n\t\t\t\t"+e._s(e.t("forms","Unlock configuration "))+"\n\t\t\t")])]):e._e(),e._v(" "),n("div",{staticClass:"tab",attrs:{id:"configurationsTabView"}},[n("div",{staticClass:"configBox "},[n("label",{staticClass:"title icon-settings"},[e._v("\n\t\t\t\t\t"+e._s(e.t("forms","Form configurations"))+"\n\t\t\t\t")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.event.isAnonymous,expression:"form.event.isAnonymous"}],staticClass:"checkbox",attrs:{id:"anonymous",disabled:e.protect,type:"checkbox"},domProps:{checked:Array.isArray(e.form.event.isAnonymous)?e._i(e.form.event.isAnonymous,null)>-1:e.form.event.isAnonymous},on:{change:function(t){var n=e.form.event.isAnonymous,s=t.target,o=!!s.checked;if(Array.isArray(n)){var i=e._i(n,null);s.checked?i<0&&e.$set(e.form.event,"isAnonymous",n.concat([null])):i>-1&&e.$set(e.form.event,"isAnonymous",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.form.event,"isAnonymous",o)}}}),e._v(" "),n("label",{staticClass:"title",attrs:{for:"anonymous"}},[e._v("\n\t\t\t\t\t"+e._s(e.t("forms","Anonymous form"))+"\n\t\t\t\t")]),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:e.form.event.isAnonymous,expression:"form.event.isAnonymous"},{name:"model",rawName:"v-model",value:e.form.event.fullAnonymous,expression:"form.event.fullAnonymous"}],staticClass:"checkbox",attrs:{id:"trueAnonymous",disabled:e.protect,type:"checkbox"},domProps:{checked:Array.isArray(e.form.event.fullAnonymous)?e._i(e.form.event.fullAnonymous,null)>-1:e.form.event.fullAnonymous},on:{change:function(t){var n=e.form.event.fullAnonymous,s=t.target,o=!!s.checked;if(Array.isArray(n)){var i=e._i(n,null);s.checked?i<0&&e.$set(e.form.event,"fullAnonymous",n.concat([null])):i>-1&&e.$set(e.form.event,"fullAnonymous",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.form.event,"fullAnonymous",o)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.event.expiration,expression:"form.event.expiration"}],staticClass:"checkbox",attrs:{id:"expiration",disabled:e.protect,type:"checkbox"},domProps:{checked:Array.isArray(e.form.event.expiration)?e._i(e.form.event.expiration,null)>-1:e.form.event.expiration},on:{change:function(t){var n=e.form.event.expiration,s=t.target,o=!!s.checked;if(Array.isArray(n)){var i=e._i(n,null);s.checked?i<0&&e.$set(e.form.event,"expiration",n.concat([null])):i>-1&&e.$set(e.form.event,"expiration",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.form.event,"expiration",o)}}}),e._v(" "),n("label",{staticClass:"title",attrs:{for:"expiration"}},[e._v("\n\t\t\t\t\t"+e._s(e.t("forms","Expires"))+"\n\t\t\t\t")]),e._v(" "),n("DatePicker",e._b({directives:[{name:"show",rawName:"v-show",value:e.form.event.expiration,expression:"form.event.expiration"}],staticStyle:{width:"170px"},attrs:{disabled:e.protect,"time-picker-options":{start:"00:00",step:"00:05",end:"23:55"}},model:{value:e.form.event.expirationDate,callback:function(t){e.$set(e.form.event,"expirationDate",t)},expression:"form.event.expirationDate"}},"DatePicker",e.expirationDatePicker,!1))],1),e._v(" "),n("div",{staticClass:"configBox"},[n("label",{staticClass:"title icon-user"},[e._v("\n\t\t\t\t\t"+e._s(e.t("forms","Access"))+"\n\t\t\t\t")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.event.access,expression:"form.event.access"}],staticClass:"radio",attrs:{id:"private",disabled:e.protect,type:"radio",value:"registered"},domProps:{checked:e._q(e.form.event.access,"registered")},on:{change:function(t){return e.$set(e.form.event,"access","registered")}}}),e._v(" "),n("label",{staticClass:"title",attrs:{for:"private"}},[n("div",{staticClass:"title icon-group"}),e._v(" "),n("span",[e._v(e._s(e.t("forms","Registered users only")))])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.event.access,expression:"form.event.access"}],staticClass:"radio",attrs:{id:"public",disabled:e.protect,type:"radio",value:"public"},domProps:{checked:e._q(e.form.event.access,"public")},on:{change:function(t){return e.$set(e.form.event,"access","public")}}}),e._v(" "),n("label",{staticClass:"title",attrs:{for:"public"}},[n("div",{staticClass:"title icon-link"}),e._v(" "),n("span",[e._v(e._s(e.t("forms","Public access")))])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.event.access,expression:"form.event.access"}],staticClass:"radio",attrs:{id:"select",disabled:e.protect,type:"radio",value:"select"},domProps:{checked:e._q(e.form.event.access,"select")},on:{change:function(t){return e.$set(e.form.event,"access","select")}}}),e._v(" "),n("label",{staticClass:"title",attrs:{for:"select"}},[n("div",{staticClass:"title icon-shared"}),e._v(" "),n("span",[e._v(e._s(e.t("forms","Only shared")))])])])]),e._v(" "),n("share-div",{directives:[{name:"show",rawName:"v-show",value:"select"===e.form.event.access,expression:"form.event.access === 'select'"}],attrs:{"active-shares":e.form.shares,placeholder:e.t("forms","Name of user or group"),"hide-names":!0},on:{"update-shares":e.updateShares,"remove-share":e.removeShare}})],1):e._e(),e._v(" "),e.loadingForm?n("loading-overlay"):e._e()],1)};o._withStripped=!0;var i=s(61),r=s.n(i),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("div",[e._v(e._s(e.question.text))]),e._v(" "),n("div",[n("input",{directives:[{name:"show",rawName:"v-show",value:"text"!=e.question.type&&"comment"!=e.question.type,expression:"(question.type != 'text') && (question.type != 'comment')"},{name:"model",rawName:"v-model",value:e.newQuizAnswer,expression:"newQuizAnswer"}],staticStyle:{height:"30px"},attrs:{placeholder:e.t("forms","Add Answer")},domProps:{value:e.newQuizAnswer},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitNewAnswer(e.question)},input:function(t){t.target.composing||(e.newQuizAnswer=t.target.value)}}}),e._v(" "),n("transitionGroup",{staticClass:"form-table",attrs:{id:"form-list",name:"list",tag:"ul"}},e._l(e.formQuizAnswers,function(t,s){return n("text-form-item",{key:t.id,tag:"li",attrs:{option:t},on:{remove:function(t){return e.emitRemoveAnswer(e.question,s)},delete:function(t){return e.question.answers.splice(s,1)}}})}),1)],1),e._v(" "),n("div",[n("a",{staticClass:"icon icon-delete svg delete-form",on:{click:function(t){e.$emit("remove"),e.$emit("delete")}}})])])};a._withStripped=!0;var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("div",[e._v(e._s(e.option.text))]),e._v(" "),n("div",[n("a",{staticClass:"icon icon-delete svg delete-form",on:{click:function(t){return e.$emit("remove")}}})])])};l._withStripped=!0;var m={props:{option:{type:Object,default:void 0}}},c=s(1),u=Object(c.a)(m,l,[],!1,null,null,null);u.options.__file="src/js/components/textFormItem.vue";var d={components:{TextFormItem:u.exports},props:{question:{type:Object,default:void 0,answers:[]}},data:function(){return{formQuizAnswers:[],nextQuizAnswerId:1,newQuizAnswer:"",type:""}},methods:{emitNewAnswer:function(e){this.$emit("add-answer",this,e)},emitRemoveAnswer:function(e,t){this.$emit("remove-answer",this,e,t)}}},f=Object(c.a)(d,a,[],!1,null,null,null);f.options.__file="src/js/components/quizFormItem.vue";var p={name:"Create",components:{QuizFormItem:f.exports},data:function(){return{move:{step:1,unit:"week",units:["minute","hour","day","week","month","year"]},form:{mode:"create",votes:[],shares:[],grantedAs:"owner",id:0,result:"new",event:{id:0,hash:"",type:"quizForm",title:"",description:"",created:"",access:"public",expiration:!1,expirationDate:"",expired:!1,isAnonymous:!1,fullAnonymous:!1,owner:void 0},options:{formQuizQuestions:[]}},system:[],lang:"",locale:"",placeholder:"",newQuizAnswer:"",newQuizQuestion:"",nextQuizAnswerId:1,nextQuizQuestionId:1,protect:!1,writingForm:!1,loadingForm:!0,sidebar:!1,titleEmpty:!1,indexPage:"",longDateFormat:"",dateTimeFormat:"",selected:"",uniqueName:!1,uniqueAns:!1,haveAns:!1,options:[{text:"Radio Buttons",value:"radiogroup"},{text:"Checkboxes",value:"checkbox"},{text:"Short Response",value:"text"},{text:"Long Response",value:"comment"},{text:"Drop Down",value:"dropdown"}]}},computed:{adminMode:function(){return this.form.event.owner!==OC.getCurrentUser().uid&&OC.isUserAdmin()},langShort:function(){return this.lang.split("-")[0]},title:function(){return""===this.form.event.title?t("forms","Create new form"):this.form.event.title},saveButtonTitle:function(){return this.writingForm?t("forms","Writing form"):"edit"===this.form.mode?t("forms","Update form"):t("forms","Done")},localeData:function(){return r.a.localeData(r.a.locale(this.locale))},expirationDatePicker:function(){return{editable:!0,minuteStep:1,type:"datetime",format:r.a.localeData().longDateFormat("L")+" "+r.a.localeData().longDateFormat("LT"),lang:this.lang.split("-")[0],placeholder:t("forms","Expiration date"),timePickerOptions:{start:"00:00",step:"00:30",end:"23:30"}}},optionDatePicker:function(){return{editable:!1,minuteStep:1,type:"datetime",format:r.a.localeData().longDateFormat("L")+" "+r.a.localeData().longDateFormat("LT"),lang:this.lang.split("-")[0],placeholder:t("forms","Click to add a date"),timePickerOptions:{start:"00:00",step:"00:30",end:"23:30"}}}},watch:{title:function(){document.title=t("forms","Forms")+" - "+this.title}},created:function(){this.indexPage=OC.generateUrl("apps/forms/"),this.getSystemValues(),this.lang=OC.getLanguage();try{this.locale=OC.getLocale()}catch(e){e instanceof TypeError?this.locale=this.lang:console.log(e)}r.a.locale(this.locale),this.longDateFormat=r.a.localeData().longDateFormat("L"),this.dateTimeFormat=r.a.localeData().longDateFormat("L")+" "+r.a.localeData().longDateFormat("LT"),"create"===this.$route.name?(this.form.event.owner=OC.getCurrentUser().uid,this.loadingForm=!1):"edit"===this.$route.name?(this.loadForm(this.$route.params.hash),this.protect=!0,this.form.mode="edit"):"clone"===this.$route.name&&this.loadForm(this.$route.params.hash),window.innerWidth>1024&&(this.sidebar=!0)},methods:{switchSidebar:function(){this.sidebar=!this.sidebar},getSystemValues:function(){var e=this;this.$http.get(OC.generateUrl("apps/forms/get/system")).then(function(t){e.system=t.data.system},function(t){e.form.event.hash="",console.log(t.response)})},addShare:function(e){this.form.shares.push(e)},updateShares:function(e){this.form.shares=e.slice(0)},removeShare:function(e){this.form.shares.splice(this.form.shares.indexOf(e),1)},checkNames:function(){var e=this;this.uniqueName=!0,this.form.options.formQuizQuestions.forEach(function(t){t.text===e.newQuizQuestion&&(e.uniqueName=!1)})},addQuestion:function(){this.checkNames(),""===this.selected?OC.Notification.showTemporary(t("forms","Select a question type!")):this.uniqueName?(null!==this.newQuizQuestion&""!==this.newQuizQuestion&/\S/.test(this.newQuizQuestion)&&this.form.options.formQuizQuestions.push({id:this.nextQuizQuestionId++,text:this.newQuizQuestion,type:this.selected,answers:[]}),this.newQuizQuestion=""):OC.Notification.showTemporary(t("forms","Cannot have the same question!"))},checkAnsNames:function(e,t){var n=this;this.uniqueAnsName=!0,t.answers.forEach(function(t){t.text===e.newQuizAnswer&&(n.uniqueAnsName=!1)})},removeAnswer:function(e,t,n){e.formQuizAnswers.splice(n,1),t.answers.splice(n,1)},addAnswer:function(e,n){this.checkAnsNames(e,n),this.uniqueAnsName?(null!==e.newQuizAnswer&""!==e.newQuizAnswer&/\S/.test(e.newQuizAnswer)&&(e.formQuizAnswers.push({id:e.nextQuizAnswerId,text:e.newQuizAnswer}),n.answers.push({id:e.nextQuizAnswerId,text:e.newQuizAnswer}),e.nextQuizAnswerId++),e.newQuizAnswer=""):OC.Notification.showTemporary(t("forms","Two answers cannot be the same!"))},allHaveAns:function(){var e=this;this.haveAns=!0,this.form.options.formQuizQuestions.forEach(function(t){"text"!==t.type&&"comment"!==t.type&&0===t.answers.length&&(e.haveAns=!1)})},writeForm:function(e){var n=this;this.allHaveAns(),""!==e&&(this.form.mode=e),0===this.form.event.title.length|!/\S/.test(this.form.event.title)?(this.titleEmpty=!0,OC.Notification.showTemporary(t("forms","Title must not be empty!"))):0===this.form.options.formQuizQuestions.length?OC.Notification.showTemporary(t("forms","Must have at least one question!")):this.haveAns?this.form.event.expiration&""===this.form.event.expirationDate?OC.Notification.showTemporary(t("forms","Need to pick an expiration date!")):(this.writingForm=!0,this.titleEmpty=!1,this.$http.post(OC.generateUrl("apps/forms/write/form"),this.form).then(function(e){n.form.mode="edit",n.form.event.hash=e.data.hash,n.form.event.id=e.data.id,n.writingForm=!1,OC.Notification.showTemporary(t("forms","%n successfully saved",1,n.form.event.title)),n.$router.push("/apps/forms/")},function(e){n.form.event.hash="",n.writingForm=!1,OC.Notification.showTemporary(t("forms","Error on saving form, see console")),console.log(e.response)})):OC.Notification.showTemporary(t("forms","All questions need answers!"))},loadForm:function(e){var n=this;this.loadingForm=!0,this.$http.get(OC.generateUrl("apps/forms/get/form/"+e)).then(function(e){n.form=e.data,null!==n.form.event.expirationDate?n.form.event.expirationDate=new Date(r.a.utc(n.form.event.expirationDate)):n.form.event.expirationDate="","clone"===n.$route.name&&(n.form.event.owner=OC.getCurrentUser().uid,n.form.event.title=t("forms","Clone of %n",1,n.form.event.title),n.form.event.id=0,n.form.id=0,n.form.event.hash="",n.form.grantedAs="owner",n.form.result="new",n.form.mode="create",n.form.votes=[]),n.loadingForm=!1,n.newQuizAnswer="",n.newQuizQuestion=""},function(e){console.log(e.response),n.form.event.hash="",n.loadingForm=!1})}}},v=(s(198),Object(c.a)(p,o,[],!1,null,null,null));v.options.__file="src/js/views/Create.vue";n.default=v.exports}}]);